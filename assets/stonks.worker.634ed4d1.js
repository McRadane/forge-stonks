var qu=Object.defineProperty;var Ku=(Le,se,ke)=>se in Le?qu(Le,se,{enumerable:!0,configurable:!0,writable:!0,value:ke}):Le[se]=ke;var J=(Le,se,ke)=>(Ku(Le,typeof se!="symbol"?se+"":se,ke),ke);(function(){"use strict";const Le={"Amber Material":"auction","Amber-polished Drill Engine":"auction","Ammonite Pet":"auction","Beacon I":"auction","Beacon II":"auction","Beacon III":"auction","Beacon IV":"auction","Beacon V":"auction","Bejeweled Handle":"auction","Blue Cheese Goblin Omelette":"auction","Boots Of Divan":"auction","Chestplate Of Divan":"auction","Control Switch":"auction",Corleonite:"auction",DIAMONITE:"bazaar","Divan Fragment":"auction","Divan's Alloy":"auction","Divan's Drill":"auction","Drill Engine":"auction",ENCHANTED_COAL_BLOCK:"bazaar",ENCHANTED_COBBLESTONE:"bazaar",ENCHANTED_DIAMOND_BLOCK:"bazaar",ENCHANTED_ENDER_PEARL:"bazaar",ENCHANTED_GOLD:"bazaar",ENCHANTED_GOLD_BLOCK:"bazaar",ENCHANTED_IRON_BLOCK:"bazaar",ENCHANTED_MITHRIL:"bazaar",ENCHANTED_REDSTONE_BLOCK:"bazaar",ENCHANTED_TITANIUM:"bazaar","Electron Transmitter":"auction",FINE_AMBER_GEM:"bazaar",FINE_AMETHYST_GEM:"bazaar",FINE_JADE_GEM:"bazaar",FINE_RUBY_GEM:"bazaar",FINE_SAPPHIRE_GEM:"bazaar",FINE_TOPAZ_GEM:"bazaar",FLAWED_RUBY_GEM:"bazaar",FLAWLESS_AMBER_GEM:"bazaar",FLAWLESS_JASPER_GEM:"bazaar",FLAWLESS_RUBY_GEM:"bazaar",FLAWLESS_TOPAZ_GEM:"bazaar","FTX 3070":"auction","Fuel Tank":"auction",GOBLIN_EGG:"bazaar",GOBLIN_EGG_BLUE:"bazaar",GOBLIN_EGG_GREEN:"bazaar",GOBLIN_EGG_RED:"bazaar",GOBLIN_EGG_YELLOW:"bazaar","Gemstone Chamber":"auction","Gemstone Drill LT-522":"auction","Gemstone Fuel Tank":"auction","Gemstone Mixture":"auction","Glacite Jewel":"auction","Goblin Omelette":"auction","Golden Plate":"auction",HARD_STONE:"bazaar",Helix:"auction","Helmet Of Divan":"auction","Hot Stuff":"auction","Jasper Drill X":"auction","Leggings Of Divan":"auction",MITHRIL_ORE:"bazaar","Magma Core":"vendor","Mithril Drill SX-R226":"auction","Mithril Drill SX-R326":"auction","Mithril Pickaxe":"auction","Mithril Plate":"auction","Mithril-Infused Fuel Tank":"auction","Mithril-Plated Drill Engine":"auction",PERFECT_SAPPHIRE_GEM:"bazaar",PLASMA_BUCKET:"bazaar",POWER_CRYSTAL:"bazaar","Perfectly-Cut Fuel Tank":"auction","Pesto Goblin Omelette":"auction","Petrified Starfall":"auction","Pure Mithril":"auction",REFINED_DIAMOND:"bazaar",REFINED_MITHRIL:"bazaar",REFINED_TITANIUM:"bazaar",ROUGH_AMBER_GEM:"bazaar","Refined Mithril Pickaxe":"auction","Robotron Reflector":"auction","Rock Gemstone":"auction","Ruby Drill TX-15":"auction","Ruby-polished Drill Engine":"auction",SLUDGE_JUICE:"bazaar",STARFALL:"bazaar","Sapphire-polished Drill Engine":"auction","Spicy Goblin Omelette":"auction","Sunny Side Goblin Omelette":"auction","Superlite Motor":"auction","Synthetic Heart":"auction",TITANIUM_ORE:"bazaar",TREASURITE:"bazaar","Titanium Artifact":"auction","Titanium Drill DR-X355":"auction","Titanium Drill DR-X455":"auction","Titanium Drill DR-X555":"auction","Titanium Drill DR-X655":"auction","Titanium Relic":"auction","Titanium Ring":"auction","Titanium Talisman":"auction","Titanium-Infused Fuel Tank":"auction","Titanium-Plated Drill Engine":"auction","Topaz Drill KGR-12":"auction","Travel Scroll to the Crystal Hollows":"auction","Travel Scroll to the Dwarven Forge":"auction",WORM_MEMBRANE:"bazaar",coins:"vendor"},se={"Magma Core":0,coins:1},ke=[{bazaarItem:!0,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_DIAMOND_BLOCK",quantity:2,source:"bazaar"}],hotm:2,itemId:"REFINED_DIAMOND",time:8},{bazaarItem:!0,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_MITHRIL",quantity:160,source:"bazaar"}],hotm:2,itemId:"REFINED_MITHRIL",time:6},{bazaarItem:!0,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_TITANIUM",quantity:16,source:"bazaar"}],hotm:2,itemId:"REFINED_TITANIUM",time:12},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_COAL_BLOCK",quantity:2,source:"bazaar"}],hotm:2,itemId:"Fuel Tank",time:10},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Glacite Jewel",quantity:3,source:"auction"}],hotm:2,itemId:"Bejeweled Handle",time:.5},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_IRON_BLOCK",quantity:1,source:"bazaar"},{intermediaryCraft:!1,itemId:"ENCHANTED_REDSTONE_BLOCK",quantity:3,source:"bazaar"},{intermediaryCraft:!0,itemId:"Golden Plate",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"TREASURITE",quantity:10,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:1,source:"bazaar"}],hotm:4,itemId:"Drill Engine",time:30},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_GOLD_BLOCK",quantity:2,source:"bazaar"},{intermediaryCraft:!1,itemId:"Glacite Jewel",quantity:5,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:1,source:"bazaar"}],hotm:3,itemId:"Golden Plate",time:6},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:5,source:"bazaar"},{intermediaryCraft:!0,itemId:"Golden Plate",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"ENCHANTED_IRON_BLOCK",quantity:1,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:1,source:"bazaar"}],hotm:3,itemId:"Mithril Plate",time:18},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"FINE_JADE_GEM",quantity:4,source:"bazaar"},{intermediaryCraft:!1,itemId:"FINE_AMBER_GEM",quantity:4,source:"bazaar"},{intermediaryCraft:!1,itemId:"FINE_AMETHYST_GEM",quantity:4,source:"bazaar"},{intermediaryCraft:!1,itemId:"FINE_SAPPHIRE_GEM",quantity:4,source:"bazaar"},{intermediaryCraft:!1,itemId:"SLUDGE_JUICE",quantity:320,source:"bazaar"}],hotm:3,itemId:"Gemstone Mixture",time:4}],Ra=[{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_MITHRIL",quantity:30,source:"bazaar"},{intermediaryCraft:!0,itemId:"Bejeweled Handle",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"ENCHANTED_GOLD",quantity:10,source:"bazaar"}],hotm:2,itemId:"Mithril Pickaxe",time:.75},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Beacon I",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:5,source:"bazaar"}],hotm:2,itemId:"Beacon II",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:2,source:"bazaar"}],hotm:2,itemId:"Titanium Talisman",time:14},{bazaarItem:!0,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:3,source:"bazaar"}],hotm:2,itemId:"DIAMONITE",time:6},{bazaarItem:!0,craftMaterial:[{intermediaryCraft:!1,itemId:"STARFALL",quantity:256,source:"bazaar"}],hotm:2,itemId:"POWER_CRYSTAL",time:2},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"MITHRIL_ORE",quantity:48,source:"bazaar"},{intermediaryCraft:!1,itemId:"TITANIUM_ORE",quantity:80,source:"bazaar"},{intermediaryCraft:!1,itemId:"ENCHANTED_ENDER_PEARL",quantity:16,source:"bazaar"},{intermediaryCraft:!1,itemId:"coins",quantity:25e3,source:"vendor"}],hotm:2,itemId:"Travel Scroll to the Dwarven Forge",time:5},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:3,source:"bazaar"},{intermediaryCraft:!0,itemId:"Bejeweled Handle",quantity:2,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:1,source:"bazaar"},{intermediaryCraft:!1,itemId:"ENCHANTED_GOLD",quantity:30,source:"bazaar"}],hotm:3,itemId:"Refined Mithril Pickaxe",time:22},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:3,source:"bazaar"},{intermediaryCraft:!0,itemId:"Fuel Tank",quantity:1,source:"auction"}],hotm:3,itemId:"Mithril Drill SX-R226",time:4},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:3,source:"auction"},{intermediaryCraft:!0,itemId:"Fuel Tank",quantity:5,source:"auction"}],hotm:3,itemId:"Mithril-Infused Fuel Tank",time:10},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Drill Engine",quantity:2,source:"auction"},{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:3,source:"auction"}],hotm:3,itemId:"Mithril-Plated Drill Engine",time:15},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Beacon II",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:10,source:"bazaar"}],hotm:3,itemId:"Beacon III",time:30},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:6,source:"bazaar"},{intermediaryCraft:!0,itemId:"Titanium Talisman",quantity:1,source:"auction"}],hotm:3,itemId:"Titanium Ring",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:2,source:"bazaar"}],hotm:3,itemId:"Pure Mithril",time:12},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_COBBLESTONE",quantity:128,source:"bazaar"},{intermediaryCraft:!1,itemId:"TREASURITE",quantity:64,source:"bazaar"}],hotm:3,itemId:"Rock Gemstone",time:22},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"STARFALL",quantity:512,source:"bazaar"}],hotm:3,itemId:"Petrified Starfall",time:14},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"GOBLIN_EGG_GREEN",quantity:99,source:"bazaar"},{intermediaryCraft:!1,itemId:"FINE_JADE_GEM",quantity:1,source:"bazaar"}],hotm:4,itemId:"Pesto Goblin Omelette",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Helix",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"coins",quantity:3e5,source:"vendor"}],hotm:3,itemId:"Ammonite Pet",time:288},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Fuel Tank",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"FINE_RUBY_GEM",quantity:6,source:"bazaar"}],hotm:3,itemId:"Ruby Drill TX-15",time:1},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"FLAWED_RUBY_GEM",quantity:48,source:"bazaar"},{intermediaryCraft:!1,itemId:"FINE_RUBY_GEM",quantity:80,source:"bazaar"},{intermediaryCraft:!1,itemId:"ENCHANTED_ENDER_PEARL",quantity:16,source:"bazaar"},{intermediaryCraft:!1,itemId:"coins",quantity:5e4,source:"vendor"}],hotm:3,itemId:"Travel Scroll to the Crystal Hollows",time:10},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Mithril Drill SX-R226",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Golden Plate",quantity:10,source:"auction"},{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:2,source:"auction"}],hotm:4,itemId:"Mithril Drill SX-R326",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Drill Engine",quantity:10,source:"auction"},{intermediaryCraft:!1,itemId:"PLASMA_BUCKET",quantity:5,source:"bazaar"},{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:4,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:5,source:"bazaar"}],hotm:4,itemId:"Titanium-Plated Drill Engine",time:30},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"GOBLIN_EGG",quantity:99,source:"bazaar"}],hotm:4,itemId:"Goblin Omelette",time:18},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Beacon III",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:20,source:"bazaar"},{intermediaryCraft:!1,itemId:"PLASMA_BUCKET",quantity:1,source:"bazaar"}],hotm:4,itemId:"Beacon IV",time:40},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:12,source:"bazaar"},{intermediaryCraft:!0,itemId:"Titanium Ring",quantity:1,source:"auction"}],hotm:4,itemId:"Titanium Artifact",time:36},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"HARD_STONE",quantity:128,source:"bazaar"},{intermediaryCraft:!1,itemId:"ROUGH_AMBER_GEM",quantity:64,source:"bazaar"}],hotm:4,itemId:"Hot Stuff",time:24},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"GOBLIN_EGG_YELLOW",quantity:99,source:"bazaar"},{intermediaryCraft:!1,itemId:"FINE_TOPAZ_GEM",quantity:1,source:"bazaar"}],hotm:6,itemId:"Sunny Side Goblin Omelette",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Ruby Drill TX-15",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:3,source:"auction"}],hotm:4,itemId:"Gemstone Drill LT-522",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Fuel Tank",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Golden Plate",quantity:6,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:10,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:10,source:"bazaar"}],hotm:5,itemId:"Titanium Drill DR-X355",time:64},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Titanium Drill DR-X355",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:10,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:16,source:"bazaar"},{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:6,source:"auction"}],hotm:5,itemId:"Titanium Drill DR-X455",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Titanium Drill DR-X455",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:20,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:32,source:"bazaar"},{intermediaryCraft:!1,itemId:"ENCHANTED_IRON_BLOCK",quantity:2,source:"bazaar"},{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:15,source:"auction"},{intermediaryCraft:!1,itemId:"PLASMA_BUCKET",quantity:20,source:"bazaar"}],hotm:5,itemId:"Titanium Drill DR-X555",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:10,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:10,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:10,source:"bazaar"},{intermediaryCraft:!0,itemId:"Fuel Tank",quantity:10,source:"auction"}],hotm:5,itemId:"Titanium-Infused Fuel Tank",time:25},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Beacon IV",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:40,source:"bazaar"},{intermediaryCraft:!1,itemId:"PLASMA_BUCKET",quantity:5,source:"bazaar"}],hotm:5,itemId:"Beacon V",time:50},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:20,source:"bazaar"},{intermediaryCraft:!0,itemId:"Titanium Artifact",quantity:1,source:"auction"}],hotm:5,itemId:"Titanium Relic",time:72},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"GOBLIN_EGG_RED",quantity:99,source:"bazaar"},{intermediaryCraft:!1,itemId:"FLAWLESS_RUBY_GEM",quantity:1,source:"bazaar"}],hotm:5,itemId:"Spicy Goblin Omelette",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"WORM_MEMBRANE",quantity:100,source:"bazaar"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"coins",quantity:25e3,source:"vendor"}],hotm:5,itemId:"Gemstone Chamber",time:4},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Gemstone Drill LT-522",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_TOPAZ_GEM",quantity:1,source:"bazaar"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:3,source:"auction"},{intermediaryCraft:!1,itemId:"Magma Core",quantity:5,source:"auction"}],hotm:5,itemId:"Topaz Drill KGR-12",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Mithril-Plated Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"Superlite Motor",quantity:10,source:"auction"},{intermediaryCraft:!1,itemId:"FINE_RUBY_GEM",quantity:10,source:"bazaar"}],hotm:5,itemId:"Ruby-polished Drill Engine",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Titanium-Infused Fuel Tank",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"Control Switch",quantity:30,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:10,source:"auction"}],hotm:5,itemId:"Gemstone Fuel Tank",time:30},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"PERFECT_SAPPHIRE_GEM",quantity:1,source:"bazaar"},{intermediaryCraft:!1,itemId:"GOBLIN_EGG_BLUE",quantity:99,source:"bazaar"}],hotm:6,itemId:"Blue Cheese Goblin Omelette",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Titanium Drill DR-X555",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"Corleonite",quantity:30,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_RUBY_GEM",quantity:1,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:5,source:"bazaar"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:16,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:12,source:"bazaar"},{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:5,source:"auction"}],hotm:6,itemId:"Titanium Drill DR-X655",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Topaz Drill KGR-12",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_JASPER_GEM",quantity:1,source:"bazaar"},{intermediaryCraft:!1,itemId:"TREASURITE",quantity:100,source:"bazaar"}],hotm:6,itemId:"Jasper Drill X",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Titanium-Plated Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"Electron Transmitter",quantity:25,source:"auction"},{intermediaryCraft:!1,itemId:"FTX 3070",quantity:25,source:"auction"},{intermediaryCraft:!1,itemId:"FINE_SAPPHIRE_GEM",quantity:20,source:"bazaar"}],hotm:6,itemId:"Sapphire-polished Drill Engine",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"FINE_AMBER_GEM",quantity:12,source:"bazaar"},{intermediaryCraft:!0,itemId:"Golden Plate",quantity:1,source:"auction"}],hotm:6,itemId:"Amber Material",time:7},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Divan Fragment",quantity:5,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:10,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_RUBY_GEM",quantity:1,source:"bazaar"}],hotm:6,itemId:"Helmet Of Divan",time:23},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Divan Fragment",quantity:8,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:10,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_RUBY_GEM",quantity:1,source:"bazaar"}],hotm:6,itemId:"Chestplate Of Divan",time:23},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Divan Fragment",quantity:7,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:10,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_RUBY_GEM",quantity:1,source:"bazaar"}],hotm:6,itemId:"Leggings Of Divan",time:23},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Divan Fragment",quantity:4,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:10,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_RUBY_GEM",quantity:1,source:"bazaar"}],hotm:6,itemId:"Boots Of Divan",time:23},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Ruby-polished Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Sapphire-polished Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_AMBER_GEM",quantity:1,source:"bazaar"},{intermediaryCraft:!1,itemId:"Robotron Reflector",quantity:50,source:"auction"}],hotm:7,itemId:"Amber-polished Drill Engine",time:50},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Gemstone Fuel Tank",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:25,source:"auction"},{intermediaryCraft:!1,itemId:"Synthetic Heart",quantity:70,source:"auction"}],hotm:7,itemId:"Perfectly-Cut Fuel Tank",time:50},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Divan's Alloy",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Titanium Drill DR-X655",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"coins",quantity:5e7,source:"vendor"}],hotm:7,itemId:"Divan's Drill",time:60}],vn=[...ke.map((e,t)=>({...e,category:"refine",id:t*10})),...Ra.map((e,t)=>({...e,category:"casting",id:t*10+1}))],Aa={items:{"Amber Material":"Amber Material","Amber-polished Drill Engine":"Amber-polished Drill Engine","Ammonite Pet":"Ammonite Pet","Beacon I":"Beacon I","Beacon II":"Beacon II","Beacon III":"Beacon III","Beacon IV":"Beacon IV","Beacon V":"Beacon V","Bejeweled Handle":"Bejeweled Handle","Blue Cheese Goblin Omelette":"Blue Cheese Goblin Omelette","Boots Of Divan":"Boots Of Divan","Chestplate Of Divan":"Chestplate Of Divan","Control Switch":"Control Switch",Corleonite:"Corleonite",DIAMONITE:"Diamonite","Divan Fragment":"Divan Fragment","Divan's Alloy":"Divan's Alloy","Divan's Drill":"Divan's Drill","Drill Engine":"Drill Engine",ENCHANTED_COAL_BLOCK:"Enchanted Block of Coal",ENCHANTED_COBBLESTONE:"Enchanted Cobblestone",ENCHANTED_DIAMOND_BLOCK:"Enchanted Diamond Block",ENCHANTED_ENDER_PEARL:"Enchanted Ender Pearl",ENCHANTED_GOLD:"Enchanted Gold",ENCHANTED_GOLD_BLOCK:"Enchanted Gold Block",ENCHANTED_IRON_BLOCK:"Enchanted Iron Block",ENCHANTED_MITHRIL:"Enchanted Mithril",ENCHANTED_REDSTONE_BLOCK:"Enchanted Redstone Block",ENCHANTED_TITANIUM:"Enchanted Titanium","Electron Transmitter":"Electron Transmitter",FINE_AMBER_GEM:"Fine Amber Gemstone",FINE_AMETHYST_GEM:"Fine Amethyst Gemstone",FINE_JADE_GEM:"Fine Jade Gemstone",FINE_RUBY_GEM:"Fine Ruby Gemstone",FINE_SAPPHIRE_GEM:"Fine Sapphire Gemstone",FINE_TOPAZ_GEM:"Fine Topaz Gemstone",FLAWED_RUBY_GEM:"Flawed Ruby Gemstone",FLAWLESS_AMBER_GEM:"Flawless Amber Gemstone",FLAWLESS_JASPER_GEM:"Flawless Jasper Gemstone",FLAWLESS_RUBY_GEM:"Flawless Ruby Gemstone",FLAWLESS_TOPAZ_GEM:"Flawless Topaz Gemstone","FTX 3070":"FTX 3070","Fuel Tank":"Fuel Tank",GOBLIN_EGG:"Goblin Egg",GOBLIN_EGG_BLUE:"Blue Goblin Egg",GOBLIN_EGG_GREEN:"Green Goblin Egg",GOBLIN_EGG_RED:"Red Goblin Egg",GOBLIN_EGG_YELLOW:"Yellow Goblin Egg","Gemstone Chamber":"Gemstone Chamber","Gemstone Drill LT-522":"Gemstone Drill LT-522","Gemstone Fuel Tank":"Gemstone Fuel Tank","Gemstone Mixture":"Gemstone Mixture","Glacite Jewel":"Glacite Jewel","Goblin Omelette":"Goblin Omelette","Golden Plate":"Golden Plate",HARD_STONE:"Hard Stone",Helix:"Helix","Helmet Of Divan":"Helmet Of Divan","Hot Stuff":"Hot Stuff","Jasper Drill X":"Jasper Drill X","Leggings Of Divan":"Leggings Of Divan",MITHRIL_ORE:"Mithril","Magma Core":"Magma Core","Mithril Drill SX-R226":"Mithril Drill SX-R226","Mithril Drill SX-R326":"Mithril Drill SX-R326","Mithril Pickaxe":"Mithril Pickaxe","Mithril Plate":"Mithril Plate","Mithril-Infused Fuel Tank":"Mithril-Infused Fuel Tank","Mithril-Plated Drill Engine":"Mithril-Plated Drill Engine",PERFECT_SAPPHIRE_GEM:"Perfect Sapphire Gemstone",PLASMA_BUCKET:"Plasma",POWER_CRYSTAL:"Power Crystal","Perfectly-Cut Fuel Tank":"Perfectly-Cut Fuel Tank","Pesto Goblin Omelette":"Pesto Goblin Omelette","Petrified Starfall":"Petrified Starfall","Pure Mithril":"Pure Mithril",REFINED_DIAMOND:"Refined Diamond",REFINED_MITHRIL:"Refined Mithril",REFINED_TITANIUM:"Refined Titanium",ROUGH_AMBER_GEM:"Rough Amber Gemstone","Refined Mithril Pickaxe":"Refined Mithril Pickaxe","Robotron Reflector":"Robotron Reflector","Rock Gemstone":"Rock Gemstone","Ruby Drill TX-15":"Ruby Drill TX-15","Ruby-polished Drill Engine":"Ruby-polished Drill Engine",SLUDGE_JUICE:"Sludge Juice",STARFALL:"Starfall","Sapphire-polished Drill Engine":"Sapphire-polished Drill Engine","Spicy Goblin Omelette":"Spicy Goblin Omelette","Sunny Side Goblin Omelette":"Sunny Side Goblin Omelette","Superlite Motor":"Superlite Motor","Synthetic Heart":"Synthetic Heart",TITANIUM_ORE:"Titanium",TREASURITE:"Treasurite","Titanium Artifact":"Titanium Artifact","Titanium Drill DR-X355":"Titanium Drill DR-X355","Titanium Drill DR-X455":"Titanium Drill DR-X455","Titanium Drill DR-X555":"Titanium Drill DR-X555","Titanium Drill DR-X655":"Titanium Drill DR-X655","Titanium Relic":"Titanium Relic","Titanium Ring":"Titanium Ring","Titanium Talisman":"Titanium Talisman","Titanium-Infused Fuel Tank":"Titanium-Infused Fuel Tank","Titanium-Plated Drill Engine":"Titanium-Plated Drill Engine","Topaz Drill KGR-12":"Topaz Drill KGR-12","Travel Scroll to the Crystal Hollows":"Travel Scroll to the Crystal Hollows","Travel Scroll to the Dwarven Forge":"Travel Scroll to the Dwarven Forge",WORM_MEMBRANE:"Worm Membrane",coins:"Coins"},notification:{timerEnded:"Your {0} timer has ended",timerStarted:"Starting timer for {0}"},ui:{amount:"Amount",auction:"Auction",bazaar:"Bazaar",casting:"Casting",craftCost:"Crafting cost",filters:"Filters",hotm:"HOTM",hour:"H",item:"Item",itemPrice:"Item price",options:{auctionsBINOnlyDescription:"Use BINs Auctions only for material.",auctionsBINOnlyLabel:"BINs material",forceRefresh:"Force refresh",hotmDescription:"Set your HOTM level.",hotmLabel:"HOTM Level",includeAuctionsFlipDescription:"Include Auctions-only craft.",includeAuctionsFlipLabel:"Auctions Craft",intermediateCraftDescription:"Craft intermediary material instead of buying-it.",intermediateCraftLabel:"Intermediary Craft",languageDescription:"Only the interface is translated, the item names are in english.",languageLabel:"Language",languageOptionEnglish:"English",languageOptionFrench:"French",maxCraftingCostDescription:"Limit to max crafting cost. Set to 0 to disable",maxCraftingCostLabel:"Max crafting cost",playFrequencyDescription:"Adjust your play-frequency to profit calculation.",playFrequencyLabel:"Play frequency",playFrequencyOptionEveryday:"Once every day",playFrequencyOptionLess:"Occasionally",playFrequencyOptionNonStop:"Non-stop",playFrequencyOptionThreeTime:"Three-time per days",playFrequencyOptionTwice:"Twice a day",quickForgeDescription:"Quick Forge perks level. Current bonus",quickForgeLabel:"Quick Forge",title:"Options"},profit:"Profit",profitByTimeEveryday:"Profit per day",profitByTimeNonStop:"Profit per hour",profitByTimeThreeTime:"Profits for 8h",profitByTimeTwice:"Profits for 12h",refine:"Refine",sell:"Sell",sellPrice:"Sell price",shoppingList:"Shopping list",time:"Duration",timer:"Timer",timerButton:"Start timer",title:"HyPixel Skyblock's Forge Stonks",totalPrice:"Total price",type:"Type",vendor:"Vendor"}},Oa={items:{"Amber Material":"Amber Material","Amber-polished Drill Engine":"Amber-polished Drill Engine","Ammonite Pet":"Ammonite Pet","Beacon I":"Beacon I","Beacon II":"Beacon II","Beacon III":"Beacon III","Beacon IV":"Beacon IV","Beacon V":"Beacon V","Bejeweled Handle":"Bejeweled Handle","Blue Cheese Goblin Omelette":"Blue Cheese Goblin Omelette","Boots Of Divan":"Boots Of Divan","Chestplate Of Divan":"Chestplate Of Divan","Control Switch":"Control Switch",Corleonite:"Corleonite",DIAMONITE:"Diamonite","Divan Fragment":"Divan Fragment","Divan's Alloy":"Divan's Alloy","Divan's Drill":"Divan's Drill","Drill Engine":"Drill Engine",ENCHANTED_COAL_BLOCK:"Enchanted Block of Coal",ENCHANTED_COBBLESTONE:"Enchanted Cobblestone",ENCHANTED_DIAMOND_BLOCK:"Enchanted Diamond Block",ENCHANTED_ENDER_PEARL:"Enchanted Ender Pearl",ENCHANTED_GOLD:"Enchanted Gold",ENCHANTED_GOLD_BLOCK:"Enchanted Gold Block",ENCHANTED_IRON_BLOCK:"Enchanted Iron Block",ENCHANTED_MITHRIL:"Enchanted Mithril",ENCHANTED_REDSTONE_BLOCK:"Enchanted Redstone Block",ENCHANTED_TITANIUM:"Enchanted Titanium","Electron Transmitter":"Electron Transmitter",FINE_AMBER_GEM:"Fine Amber Gemstone",FINE_AMETHYST_GEM:"Fine Amethyst Gemstone",FINE_JADE_GEM:"Fine Jade Gemstone",FINE_RUBY_GEM:"Fine Ruby Gemstone",FINE_SAPPHIRE_GEM:"Fine Sapphire Gemstone",FINE_TOPAZ_GEM:"Fine Topaz Gemstone",FLAWED_RUBY_GEM:"Flawed Ruby Gemstone",FLAWLESS_AMBER_GEM:"Flawless Amber Gemstone",FLAWLESS_JASPER_GEM:"Flawless Jasper Gemstone",FLAWLESS_RUBY_GEM:"Flawless Ruby Gemstone",FLAWLESS_TOPAZ_GEM:"Flawless Topaz Gemstone","FTX 3070":"FTX 3070","Fuel Tank":"Fuel Tank",GOBLIN_EGG:"Goblin Egg",GOBLIN_EGG_BLUE:"Blue Goblin Egg",GOBLIN_EGG_GREEN:"Green Goblin Egg",GOBLIN_EGG_RED:"Red Goblin Egg",GOBLIN_EGG_YELLOW:"Yellow Goblin Egg","Gemstone Chamber":"Gemstone Chamber","Gemstone Drill LT-522":"Gemstone Drill LT-522","Gemstone Fuel Tank":"Gemstone Fuel Tank","Gemstone Mixture":"Gemstone Mixture","Glacite Jewel":"Glacite Jewel","Goblin Omelette":"Goblin Omelette","Golden Plate":"Golden Plate",HARD_STONE:"Hard Stone",Helix:"Helix","Helmet Of Divan":"Helmet Of Divan","Hot Stuff":"Hot Stuff","Jasper Drill X":"Jasper Drill X","Leggings Of Divan":"Leggings Of Divan",MITHRIL_ORE:"Mithril","Magma Core":"Magma Core","Mithril Drill SX-R226":"Mithril Drill SX-R226","Mithril Drill SX-R326":"Mithril Drill SX-R326","Mithril Pickaxe":"Mithril Pickaxe","Mithril Plate":"Mithril Plate","Mithril-Infused Fuel Tank":"Mithril-Infused Fuel Tank","Mithril-Plated Drill Engine":"Mithril-Plated Drill Engine",PERFECT_SAPPHIRE_GEM:"Perfect Sapphire Gemstone",PLASMA_BUCKET:"Plasma",POWER_CRYSTAL:"Power Crystal","Perfectly-Cut Fuel Tank":"Perfectly-Cut Fuel Tank","Pesto Goblin Omelette":"Pesto Goblin Omelette","Petrified Starfall":"Petrified Starfall","Pure Mithril":"Pure Mithril",REFINED_DIAMOND:"Refined Diamond",REFINED_MITHRIL:"Refined Mithril",REFINED_TITANIUM:"Refined Titanium",ROUGH_AMBER_GEM:"Rough Amber Gemstone","Refined Mithril Pickaxe":"Refined Mithril Pickaxe","Robotron Reflector":"Robotron Reflector","Rock Gemstone":"Rock Gemstone","Ruby Drill TX-15":"Ruby Drill TX-15","Ruby-polished Drill Engine":"Ruby-polished Drill Engine",SLUDGE_JUICE:"Sludge Juice",STARFALL:"Starfall","Sapphire-polished Drill Engine":"Sapphire-polished Drill Engine","Spicy Goblin Omelette":"Spicy Goblin Omelette","Sunny Side Goblin Omelette":"Sunny Side Goblin Omelette","Superlite Motor":"Superlite Motor","Synthetic Heart":"Synthetic Heart",TITANIUM_ORE:"Titanium",TREASURITE:"Treasurite","Titanium Artifact":"Titanium Artifact","Titanium Drill DR-X355":"Titanium Drill DR-X355","Titanium Drill DR-X455":"Titanium Drill DR-X455","Titanium Drill DR-X555":"Titanium Drill DR-X555","Titanium Drill DR-X655":"Titanium Drill DR-X655","Titanium Relic":"Titanium Relic","Titanium Ring":"Titanium Ring","Titanium Talisman":"Titanium Talisman","Titanium-Infused Fuel Tank":"Titanium-Infused Fuel Tank","Titanium-Plated Drill Engine":"Titanium-Plated Drill Engine","Topaz Drill KGR-12":"Topaz Drill KGR-12","Travel Scroll to the Crystal Hollows":"Travel Scroll to the Crystal Hollows","Travel Scroll to the Dwarven Forge":"Travel Scroll to the Dwarven Forge",WORM_MEMBRANE:"Worm Membrane",coins:"Pi\xE8ces"},notification:{timerEnded:"Votre chrono pour {0} s'est termin\xE9",timerStarted:"D\xE9marrage du chrono pour {0}"},ui:{amount:"Quantit\xE9",auction:"Actions",bazaar:"Bazaar",casting:"Moulage",craftCost:"Co\xFBt de fabrication",filters:"Filtres",hotm:"HOTM",hour:"H",item:"Objet",itemPrice:"Prix de l'objet",options:{auctionsBINOnlyDescription:"Utiliser uniquement les ressources en BIN",auctionsBINOnlyLabel:"Ressources en BIN",forceRefresh:"Rafraichissement",hotmDescription:"Indiquez votre niveau d'HOTM",hotmLabel:"Niveau d'HOTM",includeAuctionsFlipDescription:"Include les craft vendus uniquement en actions",includeAuctionsFlipLabel:"Craft d'actions",intermediateCraftDescription:"Crafter les objets interm\xE9diaire",intermediateCraftLabel:"Crafts interm\xE9diaires",languageDescription:"Traduction uniquement de l'interface, les objets restent en anglais",languageLabel:"Langue",languageOptionEnglish:"Anglais",languageOptionFrench:"Baguette",maxCraftingCostDescription:"Limiter les co\xFBts des crafts. Mettre \xE0 0 pour d\xE9sactiver",maxCraftingCostLabel:"Co\xFBt maximum des crafts",playFrequencyDescription:"Ajustez votre fr\xE9quence de jeu pour le calcule des b\xE9n\xE9fices",playFrequencyLabel:"Fr\xE9quence de jeu",playFrequencyOptionEveryday:"Une fois par jour",playFrequencyOptionLess:"Joueur occasionnel",playFrequencyOptionNonStop:"Team Ch\xF4mage",playFrequencyOptionThreeTime:"3x par jour",playFrequencyOptionTwice:"2x par jour",quickForgeDescription:"Niveau d'am\xE9lioration de Quick Forge. Bonus actuel",quickForgeLabel:"Quick Forge",title:"Options"},profit:"B\xE9n\xE9fices",profitByTimeEveryday:"B\xE9n\xE9fices par jour",profitByTimeNonStop:"B\xE9n\xE9fices par heure",profitByTimeThreeTime:"B\xE9n\xE9fices pour 8h",profitByTimeTwice:"B\xE9n\xE9fices pour 12h",refine:"Affinage",sell:"Vente",sellPrice:"Prix de vente",shoppingList:"Liste d'achat",time:"Dur\xE9e",timer:"Chrono",timerButton:"Lancer le chrono",title:"HyPixel Skyblock's Forge Stonks",totalPrice:"Prix total",type:"Type",vendor:"Vendeur"}};function ne(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Te(e){return!!e&&!!e[G]}function he(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===ka}(e)||Array.isArray(e)||!!e[$r]||!!(!((t=e.constructor)===null||t===void 0)&&t[$r])||gn(e)||bn(e))}function Ge(e,t,n){n===void 0&&(n=!1),Ye(e)===0?(n?Object.keys:Qe)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Ye(e){var t=e[G];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:gn(e)?2:bn(e)?3:0}function $e(e,t){return Ye(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Sa(e,t){return Ye(e)===2?e.get(t):e[t]}function Kr(e,t,n){var r=Ye(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function Hr(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function gn(e){return Ba&&e instanceof Map}function bn(e){return La&&e instanceof Set}function ze(e){return e.o||e.t}function En(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Qr(e);delete t[G];for(var n=Qe(t),r=0;r<n.length;r++){var i=n[r],a=t[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function _n(e,t){return t===void 0&&(t=!1),In(e)||Te(e)||!he(e)||(Ye(e)>1&&(e.set=e.add=e.clear=e.delete=Pa),Object.freeze(e),t&&Ge(e,function(n,r){return _n(r,!0)},!0)),e}function Pa(){ne(2)}function In(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function ue(e){var t=Pn[e];return t||ne(18,e),t}function Ma(e,t){Pn[e]||(Pn[e]=t)}function wn(){return lt}function Tn(e,t){t&&(ue("Patches"),e.u=[],e.s=[],e.v=t)}function Lt(e){Cn(e),e.p.forEach(Fa),e.p=null}function Cn(e){e===lt&&(lt=e.l)}function jr(e){return lt={p:[],l:lt,h:e,m:!0,_:0}}function Fa(e){var t=e[G];t.i===0||t.i===1?t.j():t.O=!0}function Dn(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||ue("ES5").S(t,e,r),r?(n[G].P&&(Lt(t),ne(4)),he(e)&&(e=kt(t,e),t.l||Gt(t,e)),t.u&&ue("Patches").M(n[G].t,e,t.u,t.s)):e=kt(t,n,[]),Lt(t),t.u&&t.v(t.u,t.s),e!==Yr?e:void 0}function kt(e,t,n){if(In(t))return t;var r=t[G];if(!r)return Ge(t,function(a,o){return Ur(e,r,t,a,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Gt(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=En(r.k):r.o;Ge(r.i===3?new Set(i):i,function(a,o){return Ur(e,r,i,a,o,n)}),Gt(e,i,!1),n&&e.u&&ue("Patches").R(r,n,e.u,e.s)}return r.o}function Ur(e,t,n,r,i,a){if(Te(i)){var o=kt(e,i,a&&t&&t.i!==3&&!$e(t.D,r)?a.concat(r):void 0);if(Kr(n,r,o),!Te(o))return;e.m=!1}if(he(i)&&!In(i)){if(!e.h.F&&e._<1)return;kt(e,i),t&&t.A.l||Gt(e,i)}}function Gt(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&_n(t,n)}function Rn(e,t){var n=e[G];return(n?ze(n):e)[t]}function Wr(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Ce(e){e.P||(e.P=!0,e.l&&Ce(e.l))}function An(e){e.o||(e.o=En(e.t))}function On(e,t,n){var r=gn(t)?ue("MapSet").N(t,n):bn(t)?ue("MapSet").T(t,n):e.g?function(i,a){var o=Array.isArray(i),s={i:o?1:0,A:a?a.A:wn(),P:!1,I:!1,D:{},l:a,t:i,k:null,o:null,j:null,C:!1},c=s,u=ft;o&&(c=[s],u=dt);var l=Proxy.revocable(c,u),f=l.revoke,h=l.proxy;return s.k=h,s.j=f,h}(t,n):ue("ES5").J(t,n);return(n?n.A:wn()).p.push(r),r}function Na(e){return Te(e)||ne(22,e),function t(n){if(!he(n))return n;var r,i=n[G],a=Ye(n);if(i){if(!i.P&&(i.i<4||!ue("ES5").K(i)))return i.t;i.I=!0,r=Xr(n,a),i.I=!1}else r=Xr(n,a);return Ge(r,function(o,s){i&&Sa(i.t,o)===s||Kr(r,o,t(s))}),a===3?new Set(r):r}(e)}function Xr(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return En(e)}function xa(){function e(a,o){var s=i[a];return s?s.enumerable=o:i[a]=s={configurable:!0,enumerable:o,get:function(){var c=this[G];return ft.get(c,a)},set:function(c){var u=this[G];ft.set(u,a,c)}},s}function t(a){for(var o=a.length-1;o>=0;o--){var s=a[o][G];if(!s.P)switch(s.i){case 5:r(s)&&Ce(s);break;case 4:n(s)&&Ce(s)}}}function n(a){for(var o=a.t,s=a.k,c=Qe(s),u=c.length-1;u>=0;u--){var l=c[u];if(l!==G){var f=o[l];if(f===void 0&&!$e(o,l))return!0;var h=s[l],p=h&&h[G];if(p?p.t!==f:!Hr(h,f))return!0}}var d=!!o[G];return c.length!==Qe(o).length+(d?0:1)}function r(a){var o=a.k;if(o.length!==a.t.length)return!0;var s=Object.getOwnPropertyDescriptor(o,o.length-1);if(s&&!s.get)return!0;for(var c=0;c<o.length;c++)if(!o.hasOwnProperty(c))return!0;return!1}var i={};Ma("ES5",{J:function(a,o){var s=Array.isArray(a),c=function(l,f){if(l){for(var h=Array(f.length),p=0;p<f.length;p++)Object.defineProperty(h,""+p,e(p,!0));return h}var d=Qr(f);delete d[G];for(var m=Qe(d),y=0;y<m.length;y++){var v=m[y];d[v]=e(v,l||!!d[v].enumerable)}return Object.create(Object.getPrototypeOf(f),d)}(s,a),u={i:s?5:4,A:o?o.A:wn(),P:!1,I:!1,D:{},l:o,t:a,k:c,o:null,O:!1,C:!1};return Object.defineProperty(c,G,{value:u,writable:!0}),c},S:function(a,o,s){s?Te(o)&&o[G].A===a&&t(a.p):(a.u&&function c(u){if(u&&typeof u=="object"){var l=u[G];if(l){var f=l.t,h=l.k,p=l.D,d=l.i;if(d===4)Ge(h,function(b){b!==G&&(f[b]!==void 0||$e(f,b)?p[b]||c(h[b]):(p[b]=!0,Ce(l)))}),Ge(f,function(b){h[b]!==void 0||$e(h,b)||(p[b]=!1,Ce(l))});else if(d===5){if(r(l)&&(Ce(l),p.length=!0),h.length<f.length)for(var m=h.length;m<f.length;m++)p[m]=!1;else for(var y=f.length;y<h.length;y++)p[y]=!0;for(var v=Math.min(h.length,f.length),_=0;_<v;_++)h.hasOwnProperty(_)||(p[_]=!0),p[_]===void 0&&c(h[_])}}}}(a.p[0]),t(a.p))},K:function(a){return a.i===4?n(a):r(a)}})}var Vr,lt,Sn=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Ba=typeof Map<"u",La=typeof Set<"u",Jr=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Yr=Sn?Symbol.for("immer-nothing"):((Vr={})["immer-nothing"]=!0,Vr),$r=Sn?Symbol.for("immer-draftable"):"__$immer_draftable",G=Sn?Symbol.for("immer-state"):"__$immer_state",ka=""+Object.prototype.constructor,Qe=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Qr=Object.getOwnPropertyDescriptors||function(e){var t={};return Qe(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Pn={},ft={get:function(e,t){if(t===G)return e;var n=ze(e);if(!$e(n,t))return function(i,a,o){var s,c=Wr(a,o);return c?"value"in c?c.value:(s=c.get)===null||s===void 0?void 0:s.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!he(r)?r:r===Rn(e.t,t)?(An(e),e.o[t]=On(e.A.h,r,e)):r},has:function(e,t){return t in ze(e)},ownKeys:function(e){return Reflect.ownKeys(ze(e))},set:function(e,t,n){var r=Wr(ze(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Rn(ze(e),t),a=i==null?void 0:i[G];if(a&&a.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Hr(n,i)&&(n!==void 0||$e(e.t,t)))return!0;An(e),Ce(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Rn(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,An(e),Ce(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=ze(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){ne(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ne(12)}},dt={};Ge(ft,function(e,t){dt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),dt.deleteProperty=function(e,t){return dt.set.call(this,e,t,void 0)},dt.set=function(e,t,n){return ft.set.call(this,e[0],t,n,e[0])};var Ga=function(){function e(n){var r=this;this.g=Jr,this.F=!0,this.produce=function(i,a,o){if(typeof i=="function"&&typeof a!="function"){var s=a;a=i;var c=r;return function(m){var y=this;m===void 0&&(m=s);for(var v=arguments.length,_=Array(v>1?v-1:0),b=1;b<v;b++)_[b-1]=arguments[b];return c.produce(m,function(I){var g;return(g=a).call.apply(g,[y,I].concat(_))})}}var u;if(typeof a!="function"&&ne(6),o!==void 0&&typeof o!="function"&&ne(7),he(i)){var l=jr(r),f=On(r,i,void 0),h=!0;try{u=a(f),h=!1}finally{h?Lt(l):Cn(l)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(m){return Tn(l,o),Dn(m,l)},function(m){throw Lt(l),m}):(Tn(l,o),Dn(u,l))}if(!i||typeof i!="object"){if((u=a(i))===void 0&&(u=i),u===Yr&&(u=void 0),r.F&&_n(u,!0),o){var p=[],d=[];ue("Patches").M(i,u,p,d),o(p,d)}return u}ne(21,i)},this.produceWithPatches=function(i,a){if(typeof i=="function")return function(u){for(var l=arguments.length,f=Array(l>1?l-1:0),h=1;h<l;h++)f[h-1]=arguments[h];return r.produceWithPatches(u,function(p){return i.apply(void 0,[p].concat(f))})};var o,s,c=r.produce(i,a,function(u,l){o=u,s=l});return typeof Promise<"u"&&c instanceof Promise?c.then(function(u){return[u,o,s]}):[c,o,s]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){he(n)||ne(8),Te(n)&&(n=Na(n));var r=jr(this),i=On(this,n,void 0);return i[G].C=!0,Cn(r),i},t.finishDraft=function(n,r){var i=n&&n[G],a=i.A;return Tn(a,r),Dn(void 0,a)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Jr&&ne(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var a=r[i];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}i>-1&&(r=r.slice(i+1));var o=ue("Patches").$;return Te(n)?o(n,r):this.produce(n,function(s){return o(s,r)})},e}(),Y=new Ga,Zr=Y.produce;Y.produceWithPatches.bind(Y),Y.setAutoFreeze.bind(Y),Y.setUseProxies.bind(Y),Y.applyPatches.bind(Y),Y.createDraft.bind(Y),Y.finishDraft.bind(Y);var za=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qa=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(l){u=[6,l],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Mn=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Ka=Object.defineProperty,Ha=Object.defineProperties,ja=Object.getOwnPropertyDescriptors,ei=Object.getOwnPropertySymbols,Ua=Object.prototype.hasOwnProperty,Wa=Object.prototype.propertyIsEnumerable,ti=function(e,t,n){return t in e?Ka(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},qe=function(e,t){for(var n in t||(t={}))Ua.call(t,n)&&ti(e,n,t[n]);if(ei)for(var r=0,i=ei(t);r<i.length;r++){var n=i[r];Wa.call(t,n)&&ti(e,n,t[n])}return e},Fn=function(e,t){return Ha(e,ja(t))},Xa=function(e,t,n){return new Promise(function(r,i){var a=function(c){try{s(n.next(c))}catch(u){i(u)}},o=function(c){try{s(n.throw(c))}catch(u){i(u)}},s=function(c){return c.done?r(c.value):Promise.resolve(c.value).then(a,o)};s((n=n.apply(e,t)).next())})};(function(e){za(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Mn([void 0],n[0].concat(this)))):new(t.bind.apply(t,Mn([void 0],n.concat(this))))},t})(Array);function Nn(e){return he(e)?Zr(e,function(){}):e}function De(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var a=t.apply(void 0,r);if(!a)throw new Error("prepareAction did not return an object");return qe(qe({type:e,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function ni(e){var t={},n=[],r,i={addCase:function(a,o){var s=typeof a=="string"?a:a.type;if(s in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[s]=o,i},addMatcher:function(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase:function(a){return r=a,i}};return e(i),[t,n,r]}function Va(e){return typeof e=="function"}function Ja(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?ni(t):[t,n,r],a=i[0],o=i[1],s=i[2],c;if(Va(e))c=function(){return Nn(e())};else{var u=Nn(e);c=function(){return u}}function l(f,h){f===void 0&&(f=c());var p=Mn([a[h.type]],o.filter(function(d){var m=d.matcher;return m(h)}).map(function(d){var m=d.reducer;return m}));return p.filter(function(d){return!!d}).length===0&&(p=[s]),p.reduce(function(d,m){if(m)if(Te(d)){var y=d,v=m(y,h);return v===void 0?d:v}else{if(he(d))return Zr(d,function(_){return m(_,h)});var v=m(d,h);if(v===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return d},f)}return l.getInitialState=c,l}function Ya(e,t){return e+"/"+t}function $a(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:Nn(e.initialState),r=e.reducers||{},i=Object.keys(r),a={},o={},s={};i.forEach(function(l){var f=r[l],h=Ya(t,l),p,d;"reducer"in f?(p=f.reducer,d=f.prepare):p=f,a[l]=p,o[h]=p,s[l]=d?De(h,d):De(h)});function c(){var l=typeof e.extraReducers=="function"?ni(e.extraReducers):[e.extraReducers],f=l[0],h=f===void 0?{}:f,p=l[1],d=p===void 0?[]:p,m=l[2],y=m===void 0?void 0:m,v=qe(qe({},h),o);return Ja(n,function(_){for(var b in v)_.addCase(b,v[b]);for(var I=0,g=d;I<g.length;I++){var w=g[I];_.addMatcher(w.matcher,w.reducer)}y&&_.addDefaultCase(y)})}var u;return{name:t,reducer:function(l,f){return u||(u=c()),u(l,f)},actions:s,caseReducers:a,getInitialState:function(){return u||(u=c()),u.getInitialState()}}}var Qa="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Za=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Qa[Math.random()*64|0];return t},eo=["name","message","stack","code"],xn=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),ri=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),to=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=eo;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=De(t+"/fulfilled",function(u,l,f,h){return{payload:u,meta:Fn(qe({},h||{}),{arg:f,requestId:l,requestStatus:"fulfilled"})}}),a=De(t+"/pending",function(u,l,f){return{payload:void 0,meta:Fn(qe({},f||{}),{arg:l,requestId:u,requestStatus:"pending"})}}),o=De(t+"/rejected",function(u,l,f,h,p){return{payload:h,error:(r&&r.serializeError||to)(u||"Rejected"),meta:Fn(qe({},p||{}),{arg:f,requestId:l,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function c(u){return function(l,f,h){var p=r!=null&&r.idGenerator?r.idGenerator(u):Za(),d=new s,m,y=new Promise(function(I,g){return d.signal.addEventListener("abort",function(){return g({name:"AbortError",message:m||"Aborted"})})}),v=!1;function _(I){v&&(m=I,d.abort())}var b=function(){return Xa(this,null,function(){var I,g,w,D,T,A;return qa(this,function(O){switch(O.label){case 0:return O.trys.push([0,4,,5]),D=(I=r==null?void 0:r.condition)==null?void 0:I.call(r,u,{getState:f,extra:h}),ro(D)?[4,D]:[3,2];case 1:D=O.sent(),O.label=2;case 2:if(D===!1)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return v=!0,l(a(p,u,(g=r==null?void 0:r.getPendingMeta)==null?void 0:g.call(r,{requestId:p,arg:u},{getState:f,extra:h}))),[4,Promise.race([y,Promise.resolve(n(u,{dispatch:l,getState:f,extra:h,requestId:p,signal:d.signal,abort:_,rejectWithValue:function(M,x){return new xn(M,x)},fulfillWithValue:function(M,x){return new ri(M,x)}})).then(function(M){if(M instanceof xn)throw M;return M instanceof ri?i(M.payload,p,u,M.meta):i(M,p,u)})])];case 3:return w=O.sent(),[3,5];case 4:return T=O.sent(),w=T instanceof xn?o(null,p,u,T.payload,T.meta):o(T,p,u),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,A||l(w),[2,w]}})})}();return Object.assign(b,{abort:_,requestId:p,arg:u,unwrap:function(){return b.then(no)}})}}return Object.assign(c,{pending:a,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=e,e})();function no(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function ro(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Bn="listenerMiddleware";De(Bn+"/add"),De(Bn+"/removeAll"),De(Bn+"/remove");var ii;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:global),xa();const me={auctionsBINOnly:!0,cacheDuration:60,hotm:2,includeAuctionsFlip:!0,intermediateCraft:!1,maxCraftingCost:0,playFrequency:"nonstop",quickForge:0};$a({initialState:me,name:"Response-Options",reducers:{setOptions:(e,t)=>({...e,...t.payload})}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F=function(){return F=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},F.apply(this,arguments)};function Ln(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var k=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,q=Object.keys,H=Array.isArray;typeof Promise<"u"&&!k.Promise&&(k.Promise=Promise);function X(e,t){return typeof t!="object"||q(t).forEach(function(n){e[n]=t[n]}),e}var ht=Object.getPrototypeOf,io={}.hasOwnProperty;function $(e,t){return io.call(e,t)}function Ze(e,t){typeof t=="function"&&(t=t(ht(e))),(typeof Reflect>"u"?q:Reflect.ownKeys)(t).forEach(function(n){pe(e,n,t[n])})}var ai=Object.defineProperty;function pe(e,t,n,r){ai(e,t,X(n&&$(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function et(e){return{from:function(t){return e.prototype=Object.create(t.prototype),pe(e.prototype,"constructor",e),{extend:Ze.bind(null,e.prototype)}}}}var ao=Object.getOwnPropertyDescriptor;function kn(e,t){var n=ao(e,t),r;return n||(r=ht(e))&&kn(r,t)}var oo=[].slice;function zt(e,t,n){return oo.call(e,t,n)}function oi(e,t){return t(e)}function mt(e){if(!e)throw new Error("Assertion Failed")}function si(e){k.setImmediate?setImmediate(e):setTimeout(e,0)}function ui(e,t){return e.reduce(function(n,r,i){var a=t(r,i);return a&&(n[a[0]]=a[1]),n},{})}function so(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function ye(e,t){if($(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=ye(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(o!==-1){var s=e[t.substr(0,o)];return s===void 0?void 0:ye(s,t.substr(o+1))}}function re(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){mt(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)re(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var o=t.substr(0,a),s=t.substr(a+1);if(s==="")n===void 0?H(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var c=e[o];(!c||!$(e,o))&&(c=e[o]={}),re(c,s,n)}}else n===void 0?H(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function uo(e,t){typeof t=="string"?re(e,t,void 0):"length"in t&&[].map.call(t,function(n){re(e,n,void 0)})}function ci(e){var t={};for(var n in e)$(e,n)&&(t[n]=e[n]);return t}var co=[].concat;function li(e){return co.apply([],e)}var fi="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(li([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return k[e]}),lo=fi.map(function(e){return k[e]});ui(fi,function(e){return[e,!0]});var Re=null;function pt(e){Re=typeof WeakMap<"u"&&new WeakMap;var t=Gn(e);return Re=null,t}function Gn(e){if(!e||typeof e!="object")return e;var t=Re&&Re.get(e);if(t)return t;if(H(e)){t=[],Re&&Re.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Gn(e[n]))}else if(lo.indexOf(e.constructor)>=0)t=e;else{var i=ht(e);t=i===Object.prototype?{}:Object.create(i),Re&&Re.set(e,t);for(var a in e)$(e,a)&&(t[a]=Gn(e[a]))}return t}var fo={}.toString;function zn(e){return fo.call(e).slice(8,-1)}var qn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ho=typeof qn=="symbol"?function(e){var t;return e!=null&&(t=e[qn])&&t.apply(e)}:function(){return null},tt={};function ve(e){var t,n,r,i;if(arguments.length===1){if(H(e))return e.slice();if(this===tt&&typeof e=="string")return[e];if(i=ho(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Kn=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ce=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function di(e,t){ce=e,hi=t}var hi=function(){return!0},mo=!new Error("").stack;function Ke(){if(mo)try{throw Ke.arguments,new Error}catch(e){return e}return new Error}function Hn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(hi).map(function(r){return`
`+r}).join("")):""}var po=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],mi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],jn=po.concat(mi),yo={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function nt(e,t){this._e=Ke(),this.name=e,this.message=t}et(nt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Hn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function pi(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function qt(e,t,n,r){this._e=Ke(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=pi(e,t)}et(qt).from(nt);function yt(e,t){this._e=Ke(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=pi(e,t)}et(yt).from(nt);var Un=jn.reduce(function(e,t){return e[t]=t+"Error",e},{}),vo=nt,S=jn.reduce(function(e,t){var n=t+"Error";function r(i,a){this._e=Ke(),this.name=n,i?typeof i=="string"?(this.message=""+i+(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=yo[t]||n,this.inner=null)}return et(r).from(vo),e[t]=r,e},{});S.Syntax=SyntaxError,S.Type=TypeError,S.Range=RangeError;var yi=mi.reduce(function(e,t){return e[t+"Error"]=S[t],e},{});function go(e,t){if(!e||e instanceof nt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!yi[e.name])return e;var n=new yi[e.name](t||e.message,e);return"stack"in e&&pe(n,"stack",{get:function(){return this.inner.stack}}),n}var Kt=jn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=S[t]),e},{});Kt.ModifyError=qt,Kt.DexieError=nt,Kt.BulkError=yt;function L(){}function vt(e){return e}function bo(e,t){return e==null||e===vt?t:function(n){return t(e(n))}}function He(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Eo(e,t){return e===L?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?He(r,this.onsuccess):r),i&&(this.onerror=this.onerror?He(i,this.onerror):i),a!==void 0?a:n}}function _o(e,t){return e===L?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?He(n,this.onsuccess):n),r&&(this.onerror=this.onerror?He(r,this.onerror):r)}}function Io(e,t){return e===L?t:function(n){var r=e.apply(this,arguments);X(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?He(i,this.onsuccess):i),a&&(this.onerror=this.onerror?He(a,this.onerror):a),r===void 0?o===void 0?void 0:o:X(r,o)}}function wo(e,t){return e===L?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Wn(e,t){return e===L?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var gt={},To=100,Co=20,vi=100,Xn=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,ht(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,ht(t),e]}(),Vn=Xn[0],Ht=Xn[1],Jn=Xn[2],gi=Ht&&Ht.then,jt=Vn&&Vn.constructor,Yn=!!Jn,$n=!1,Do=Jn?function(){Jn.then(Vt)}:k.setImmediate?setImmediate.bind(null,Vt):k.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Vt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Vt,0)},bt=function(e,t){Et.push([e,t]),Ut&&(Do(),Ut=!1)},Qn=!0,Ut=!0,je=[],Wt=[],Zn=null,er=vt,rt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ai,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{Ai(e[0],e[1])}catch{}})}},R=rt,Et=[],Ue=0,Xt=[];function C(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=L,this._lib=!1;var t=this._PSD=R;if(ce&&(this._stackHolder=Ke(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==gt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&nr(this,this._value);return}this._state=null,this._value=null,++t.ref,Ei(this,e)}var tr={get:function(){var e=R,t=$t;function n(r,i){var a=this,o=!e.global&&(e!==R||t!==$t),s=o&&!ge(),c=new C(function(u,l){rr(a,new bi(Zt(r,e,o,s),Zt(i,e,o,s),u,l,e))});return ce&&wi(c,this),c}return n.prototype=gt,n},set:function(e){pe(this,"then",e&&e.prototype===gt?tr:{get:function(){return e},set:tr.set})}};Ze(C.prototype,{then:tr,_then:function(e,t){rr(this,new bi(null,null,e,t,R))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Jt(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Jt(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Jt(t)})},stack:{get:function(){if(this._stack)return this._stack;try{$n=!0;var e=Ii(this,[],Co),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{$n=!1}}},timeout:function(e,t){var n=this;return e<1/0?new C(function(r,i){var a=setTimeout(function(){return i(new S.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&pe(C.prototype,Symbol.toStringTag,"Dexie.Promise"),rt.env=Ti();function bi(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Ze(C,{all:function(){var e=ve.apply(null,arguments).map(Qt);return new C(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return C.resolve(i).then(function(o){e[a]=o,--r||t(e)},n)})})},resolve:function(e){if(e instanceof C)return e;if(e&&typeof e.then=="function")return new C(function(n,r){e.then(n,r)});var t=new C(gt,!0,e);return wi(t,Zn),t},reject:Jt,race:function(){var e=ve.apply(null,arguments).map(Qt);return new C(function(t,n){e.map(function(r){return C.resolve(r).then(t,n)})})},PSD:{get:function(){return R},set:function(e){return R=e}},totalEchoes:{get:function(){return $t}},newPSD:Ae,usePSD:at,scheduler:{get:function(){return bt},set:function(e){bt=e}},rejectionMapper:{get:function(){return er},set:function(e){er=e}},follow:function(e,t){return new C(function(n,r){return Ae(function(i,a){var o=R;o.unhandleds=[],o.onunhandled=a,o.finalize=He(function(){var s=this;Ao(function(){s.unhandleds.length===0?i():a(s.unhandleds[0])})},o.finalize),e()},t,n,r)})}}),jt&&(jt.allSettled&&pe(C,"allSettled",function(){var e=ve.apply(null,arguments).map(Qt);return new C(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return C.resolve(i).then(function(o){return r[a]={status:"fulfilled",value:o}},function(o){return r[a]={status:"rejected",reason:o}}).then(function(){return--n||t(r)})})})}),jt.any&&typeof AggregateError<"u"&&pe(C,"any",function(){var e=ve.apply(null,arguments).map(Qt);return new C(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,o){return C.resolve(a).then(function(s){return t(s)},function(s){i[o]=s,--r||n(new AggregateError(i))})})})}));function Ei(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&_t();n&&typeof n.then=="function"?Ei(e,function(i,a){n instanceof C?n._then(i,a):n.then(i,a)}):(e._state=!0,e._value=n,_i(e)),r&&It()}},nr.bind(null,e))}catch(n){nr(e,n)}}function nr(e,t){if(Wt.push(t),e._state===null){var n=e._lib&&_t();t=er(t),e._state=!1,e._value=t,ce&&t!==null&&typeof t=="object"&&!t._promise&&so(function(){var r=kn(t,"stack");t._promise=e,pe(t,"stack",{get:function(){return $n?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),Oo(e),_i(e),n&&It()}}function _i(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)rr(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Ue===0&&(++Ue,bt(function(){--Ue===0&&ir()},[]))}function rr(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ue,bt(Ro,[n,e,t])}function Ro(e,t,n){try{Zn=t;var r,i=t._value;t._state?r=e(i):(Wt.length&&(Wt=[]),r=e(i),Wt.indexOf(i)===-1&&So(t)),n.resolve(r)}catch(a){n.reject(a)}finally{Zn=null,--Ue===0&&ir(),--n.psd.ref||n.psd.finalize()}}function Ii(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,a,o;i!=null?(a=i.name||"Error",o=i.message||i,r=Hn(i,0)):(a=i,o=""),t.push(a+(o?": "+o:"")+r)}return ce&&(r=Hn(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Ii(e._prev,t,n)),t}function wi(e,t){var n=t?t._numPrev+1:0;n<To&&(e._prev=t,e._numPrev=n)}function Vt(){_t()&&It()}function _t(){var e=Qn;return Qn=!1,Ut=!1,e}function It(){var e,t,n;do for(;Et.length>0;)for(e=Et,Et=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Et.length>0);Qn=!0,Ut=!0}function ir(){var e=je;je=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Xt.slice(0),n=t.length;n;)t[--n]()}function Ao(e){function t(){e(),Xt.splice(Xt.indexOf(t),1)}Xt.push(t),++Ue,bt(function(){--Ue===0&&ir()},[])}function Oo(e){je.some(function(t){return t._value===e._value})||je.push(e)}function So(e){for(var t=je.length;t;)if(je[--t]._value===e._value){je.splice(t,1);return}}function Jt(e){return new C(gt,!1,e)}function z(e,t){var n=R;return function(){var r=_t(),i=R;try{return Oe(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{Oe(i,!1),r&&It()}}}var j={awaits:0,echoes:0,id:0},Po=0,Yt=[],ar=0,$t=0,Mo=0;function Ae(e,t,n,r){var i=R,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Mo;var o=rt.env;a.env=Yn?{Promise:C,PromiseProp:{value:C,configurable:!0,writable:!0},all:C.all,race:C.race,allSettled:C.allSettled,any:C.any,resolve:C.resolve,reject:C.reject,nthen:Di(o.nthen,a),gthen:Di(o.gthen,a)}:{},t&&X(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=at(a,e,n,r);return a.ref===0&&a.finalize(),s}function it(){return j.id||(j.id=++Po),++j.awaits,j.echoes+=vi,j.id}function ge(){return j.awaits?(--j.awaits===0&&(j.id=0),j.echoes=j.awaits*vi,!0):!1}(""+gi).indexOf("[native code]")===-1&&(it=ge=L);function Qt(e){return j.echoes&&e&&e.constructor===jt?(it(),e.then(function(t){return ge(),t},function(t){return ge(),K(t)})):e}function Fo(e){++$t,(!j.echoes||--j.echoes===0)&&(j.echoes=j.id=0),Yt.push(R),Oe(e,!0)}function No(){var e=Yt[Yt.length-1];Yt.pop(),Oe(e,!1)}function Oe(e,t){var n=R;if((t?j.echoes&&(!ar++||e!==R):ar&&(!--ar||e!==R))&&Ci(t?Fo.bind(null,e):No),e!==R&&(R=e,n===rt&&(rt.env=Ti()),Yn)){var r=rt.env.Promise,i=e.env;Ht.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(k,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Ti(){var e=k.Promise;return Yn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(k,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Ht.then,gthen:e.prototype.then}:{}}function at(e,t,n,r,i){var a=R;try{return Oe(e,!0),t(n,r,i)}finally{Oe(a,!1)}}function Ci(e){gi.call(Vn,e)}function Zt(e,t,n,r){return typeof e!="function"?e:function(){var i=R;n&&it(),Oe(t,!0);try{return e.apply(this,arguments)}finally{Oe(i,!1),r&&Ci(ge)}}}function Di(e,t){return function(n,r){return e.call(this,Zt(n,t),Zt(r,t))}}var Ri="unhandledrejection";function Ai(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(k.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Ri,!0,!0),X(r,i)):k.CustomEvent&&(r=new CustomEvent(Ri,{detail:i}),X(r,i)),r&&k.dispatchEvent&&(dispatchEvent(r),!k.PromiseRejectionEvent&&k.onunhandledrejection))try{k.onunhandledrejection(r)}catch{}ce&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var K=C.reject;function or(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!R.letThrough&&!e._vip){if(e._state.openComplete)return K(new S.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return K(new S.DatabaseClosed);e.open().catch(L)}return e._state.dbReadyPromise.then(function(){return or(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===Un.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return or(e,t,n,r)})):K(a)}return i._promise(t,function(a,o){return Ae(function(){return R.trans=i,r(a,o,i)})}).then(function(a){return i._completion.then(function(){return a})})}}var Oi="3.2.2",We=String.fromCharCode(65535),sr=-1/0,be="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Si="String expected.",wt=[],en=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),xo=en,Bo=en,Pi=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},tn="__dbnames",ur="readonly",cr="readwrite";function Xe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Mi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function nn(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=pt(t),delete t[e]),t}:function(t){return t}}var Lo=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||R.trans,a=this.name;function o(c,u,l){if(!l.schema[a])throw new S.NotFound("Table "+a+" not part of transaction");return n(l.idbtrans,l)}var s=_t();try{return i&&i.db===this.db?i===R.trans?i._promise(t,o,r):Ae(function(){return i._promise(t,o,r)},{trans:i,transless:R.transless||R}):or(this.db,t,[this.name],o)}finally{s&&It()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(H(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=q(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(l){return l.compound&&n.every(function(f){return l.keyPath.indexOf(f)>=0})&&l.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==We)return this.where(r.name).equals(r.keyPath.map(function(l){return t[l]}));!r&&ce&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,a=this.db._deps.indexedDB;function o(l,f){try{return a.cmp(l,f)===0}catch{return!1}}var s=n.reduce(function(l,f){var h=l[0],p=l[1],d=i[f],m=t[f];return[h||d,h||!d?Xe(p,d&&d.multi?function(y){var v=ye(y,f);return H(v)&&v.some(function(_){return o(m,_)})}:function(y){return o(m,ye(y,f))}):p]},[null,null]),c=s[0],u=s[1];return c?this.where(c.name).equals(t[c.keyPath]).filter(u):r?this.filter(u):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,H(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var a in r)if($(r,a))try{i[a]=r[a]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){X(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,s=t;return o&&a&&(s=nn(o)(t)),this._trans("readwrite",function(c){return r.core.mutate({trans:c,type:"add",keys:n!=null?[n]:null,values:[s]})}).then(function(c){return c.numFailures?C.reject(c.failures[0]):c.lastResult}).then(function(c){if(o)try{re(t,o,c)}catch{}return c})},e.prototype.update=function(t,n){if(typeof t=="object"&&!H(t)){var r=ye(t,this.schema.primKey.keyPath);if(r===void 0)return K(new S.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?q(n).forEach(function(i){re(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,s=t;return o&&a&&(s=nn(o)(t)),this._trans("readwrite",function(c){return r.core.mutate({trans:c,type:"put",values:[s],keys:n!=null?[n]:null})}).then(function(c){return c.numFailures?C.reject(c.failures[0]):c.lastResult}).then(function(c){if(o)try{re(t,o,c)}catch{}return c})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?C.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Mi})}).then(function(n){return n.numFailures?C.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var c=i.schema.primKey,u=c.auto,l=c.keyPath;if(l&&a)throw new S.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new S.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=l&&u?t.map(nn(l)):t;return i.core.mutate({trans:s,type:"add",keys:a,values:h,wantResults:o}).then(function(p){var d=p.numFailures,m=p.results,y=p.lastResult,v=p.failures,_=o?m:y;if(d===0)return _;throw new yt(i.name+".bulkAdd(): "+d+" of "+f+" operations failed",v)})})},e.prototype.bulkPut=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var c=i.schema.primKey,u=c.auto,l=c.keyPath;if(l&&a)throw new S.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new S.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=l&&u?t.map(nn(l)):t;return i.core.mutate({trans:s,type:"put",keys:a,values:h,wantResults:o}).then(function(p){var d=p.numFailures,m=p.results,y=p.lastResult,v=p.failures,_=o?m:y;if(d===0)return _;throw new yt(i.name+".bulkPut(): "+d+" of "+f+" operations failed",v)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var a=i.numFailures,o=i.lastResult,s=i.failures;if(a===0)return o;throw new yt(n.name+".bulkDelete(): "+a+" of "+r+" operations failed",s)})},e}();function Tt(e){var t={},n=function(s,c){if(c){for(var u=arguments.length,l=new Array(u-1);--u;)l[u-1]=arguments[u];return t[s].subscribe.apply(null,l),e}else if(typeof s=="string")return t[s]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(s,c,u){if(typeof s=="object")return o(s);c||(c=wo),u||(u=L);var l={subscribers:[],fire:u,subscribe:function(f){l.subscribers.indexOf(f)===-1&&(l.subscribers.push(f),l.fire=c(l.fire,f))},unsubscribe:function(f){l.subscribers=l.subscribers.filter(function(h){return h!==f}),l.fire=l.subscribers.reduce(c,u)}};return t[s]=n[s]=l,l}function o(s){q(s).forEach(function(c){var u=s[c];if(H(u))a(c,s[c][0],s[c][1]);else if(u==="asap")var l=a(c,vt,function(){for(var h=arguments.length,p=new Array(h);h--;)p[h]=arguments[h];l.subscribers.forEach(function(d){si(function(){d.apply(null,p)})})});else throw new S.InvalidArgument("Invalid event config")})}}function Ct(e,t){return et(t).from({prototype:e}),t}function ko(e){return Ct(Lo.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Tt(null,{creating:[Eo,L],reading:[bo,vt],updating:[Io,L],deleting:[_o,L]})})}function ot(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function lr(e,t){e.filter=Xe(e.filter,t)}function fr(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Xe(r(),t())}:t,e.justLimit=n&&!r}function Go(e,t){e.isMatch=Xe(e.isMatch,t)}function rn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new S.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Fi(e,t,n){var r=rn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function an(e,t,n,r){var i=e.replayFilter?Xe(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},o=function(s,c,u){if(!i||i(c,u,function(h){return c.stop(h)},function(h){return c.fail(h)})){var l=c.primaryKey,f=""+l;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(l)),$(a,f)||(a[f]=!0,t(s,c,u))}};return Promise.all([e.or._iterate(o,n),Ni(Fi(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}else return Ni(Fi(e,r,n),Xe(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Ni(e,t,n,r){var i=r?function(o,s,c){return n(r(o),s,c)}:n,a=z(i);return e.then(function(o){if(o)return o.start(function(){var s=function(){return o.continue()};(!t||t(o,function(c){return s=c},function(c){o.stop(c),s=L},function(c){o.fail(c),s=L}))&&a(o.value,o,function(c){return s=c}),s()})})}function V(e,t){try{var n=xi(e),r=xi(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return qo(Bi(e),Bi(t));case"Array":return zo(e,t)}}catch{}return NaN}function zo(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var o=V(e[a],t[a]);if(o!==0)return o}return n===r?0:n<r?-1:1}function qo(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function xi(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=zn(e);return n==="ArrayBuffer"?"binary":n}function Bi(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Ko=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,K.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,K.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Xe(n.algorithm,t)},e.prototype._iterate=function(t,n){return an(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&X(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return an(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(ot(i,!0))return a.count({trans:r,query:{index:rn(i,a.schema),range:i.range}}).then(function(s){return Math.min(s,i.limit)});var o=0;return an(i,function(){return++o,!1},r,a).then(function(){return o})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],a=r.length-1;function o(u,l){return l?o(u[r[l]],l-1):u[i]}var s=this._ctx.dir==="next"?1:-1;function c(u,l){var f=o(u,a),h=o(l,a);return f<h?-s:f>h?s:0}return this.toArray(function(u){return u.sort(c)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&ot(i,!0)&&i.limit>0){var a=i.valueMapper,o=rn(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(c){var u=c.result;return a?u.map(a):u})}else{var s=[];return an(i,function(c){return s.push(c)},r,i.table.core).then(function(){return s})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,ot(n)?fr(n,function(){var r=t;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):fr(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),fr(this._ctx,function(){var n=t;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},e.prototype.until=function(t,n){return lr(this._ctx,function(r,i,a){return t(r.value)?(i(a),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return lr(this._ctx,function(n){return t(n.value)}),Go(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&ot(n,!0)&&n.limit>0)return this._read(function(i){var a=rn(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return lr(this._ctx,function(i){var a=i.primaryKey.toString(),o=$(r,a);return r[a]=!0,!o}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof t=="function")a=t;else{var o=q(t),s=o.length;a=function(v){for(var _=!1,b=0;b<s;++b){var I=o[b],g=t[I];ye(v,I)!==g&&(re(v,I,g),_=!0)}return _}}var c=r.table.core,u=c.schema.primaryKey,l=u.outbound,f=u.extractKey,h=n.db._options.modifyChunkSize||200,p=[],d=0,m=[],y=function(v,_){var b=_.failures,I=_.numFailures;d+=v-I;for(var g=0,w=q(b);g<w.length;g++){var D=w[g];p.push(b[D])}};return n.clone().primaryKeys().then(function(v){var _=function(b){var I=Math.min(h,v.length-b);return c.getMany({trans:i,keys:v.slice(b,b+I),cache:"immutable"}).then(function(g){for(var w=[],D=[],T=l?[]:null,A=[],O=0;O<I;++O){var M=g[O],x={value:pt(M),primKey:v[b+O]};a.call(x,x.value,x)!==!1&&(x.value==null?A.push(v[b+O]):!l&&V(f(M),f(x.value))!==0?(A.push(v[b+O]),w.push(x.value)):(D.push(x.value),l&&T.push(v[b+O])))}var B=ot(r)&&r.limit===1/0&&(typeof t!="function"||t===dr)&&{index:r.index,range:r.range};return Promise.resolve(w.length>0&&c.mutate({trans:i,type:"add",values:w}).then(function(W){for(var P in W.failures)A.splice(parseInt(P),1);y(w.length,W)})).then(function(){return(D.length>0||B&&typeof t=="object")&&c.mutate({trans:i,type:"put",keys:T,values:D,criteria:B,changeSpec:typeof t!="function"&&t}).then(function(W){return y(D.length,W)})}).then(function(){return(A.length>0||B&&t===dr)&&c.mutate({trans:i,type:"delete",keys:A,criteria:B}).then(function(W){return y(A.length,W)})}).then(function(){return v.length>b+I&&_(b+h)})})};return _(0).then(function(){if(p.length>0)throw new qt("Error modifying one or more objects",p,d,m);return v.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return ot(t)&&(t.isPrimKey&&!Bo||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,a=n;return t.table.core.count({trans:r,query:{index:i,range:a}}).then(function(o){return t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(s){var c=s.failures;s.lastResult,s.results;var u=s.numFailures;if(u)throw new qt("Could not delete some values",Object.keys(c).map(function(l){return c[l]}),o-u);return o-u})})}):this.modify(dr)},e}(),dr=function(e,t){return t.value=null};function Ho(e){return Ct(Ko.prototype,function(n,r){this.db=e;var i=Mi,a=null;if(r)try{i=r()}catch(u){a=u}var o=n._ctx,s=o.table,c=s.hook.reading.fire;this._ctx={table:s,index:o.index,isPrimKey:!o.index||s.schema.primKey.keyPath&&o.index===s.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:o.or,valueMapper:c!==vt?c:null}})}function jo(e,t){return e<t?-1:e===t?0:1}function Uo(e,t){return e>t?-1:e===t?0:1}function Q(e,t,n){var r=e instanceof ki?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function st(e){return new e.Collection(e,function(){return Li("")}).limit(0)}function Wo(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Xo(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Vo(e,t,n,r,i,a){for(var o=Math.min(e.length,r.length),s=-1,c=0;c<o;++c){var u=t[c];if(u!==r[c])return i(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):i(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[c],u)<0&&(s=c)}return o<r.length&&a==="next"?e+n.substr(e.length):o<e.length&&a==="prev"?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function on(e,t,n,r){var i,a,o,s,c,u,l,f=n.length;if(!n.every(function(m){return typeof m=="string"}))return Q(e,Si);function h(m){i=Wo(m),a=Xo(m),o=m==="next"?jo:Uo;var y=n.map(function(v){return{lower:a(v),upper:i(v)}}).sort(function(v,_){return o(v.lower,_.lower)});s=y.map(function(v){return v.upper}),c=y.map(function(v){return v.lower}),u=m,l=m==="next"?"":r}h("next");var p=new e.Collection(e,function(){return Se(s[0],c[f-1]+r)});p._ondirectionchange=function(m){h(m)};var d=0;return p._addAlgorithm(function(m,y,v){var _=m.key;if(typeof _!="string")return!1;var b=a(_);if(t(b,c,d))return!0;for(var I=null,g=d;g<f;++g){var w=Vo(_,b,s[g],c[g],o,u);w===null&&I===null?d=g+1:(I===null||o(I,w)>0)&&(I=w)}return y(I!==null?function(){m.continue(I+l)}:v),!1}),p}function Se(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Li(e){return{type:1,lower:e,upper:e}}var ki=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?st(this):new this.Collection(this,function(){return Se(t,n,!r,!i)})}catch{return Q(this,be)}},e.prototype.equals=function(t){return t==null?Q(this,be):new this.Collection(this,function(){return Li(t)})},e.prototype.above=function(t){return t==null?Q(this,be):new this.Collection(this,function(){return Se(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Q(this,be):new this.Collection(this,function(){return Se(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Q(this,be):new this.Collection(this,function(){return Se(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Q(this,be):new this.Collection(this,function(){return Se(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Q(this,Si):this.between(t,t+We,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):on(this,function(n,r){return n.indexOf(r[0])===0},[t],We)},e.prototype.equalsIgnoreCase=function(t){return on(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=ve.apply(tt,arguments);return t.length===0?st(this):on(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=ve.apply(tt,arguments);return t.length===0?st(this):on(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,We)},e.prototype.anyOf=function(){var t=this,n=ve.apply(tt,arguments),r=this._cmp;try{n.sort(r)}catch{return Q(this,be)}if(n.length===0)return st(this);var i=new this.Collection(this,function(){return Se(n[0],n[n.length-1])});i._ondirectionchange=function(o){r=o==="next"?t._ascending:t._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(o,s,c){for(var u=o.key;r(u,n[a])>0;)if(++a,a===n.length)return s(c),!1;return r(u,n[a])===0?!0:(s(function(){o.continue(n[a])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[sr,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=ve.apply(tt,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Q(this,be)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[sr,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,a=this._ascending,o=this._descending,s=this._min,c=this._max;if(t.length===0)return st(this);if(!t.every(function(g){return g[0]!==void 0&&g[1]!==void 0&&a(g[0],g[1])<=0}))return Q(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",S.InvalidArgument);var u=!n||n.includeLowers!==!1,l=n&&n.includeUppers===!0;function f(g,w){for(var D=0,T=g.length;D<T;++D){var A=g[D];if(i(w[0],A[1])<0&&i(w[1],A[0])>0){A[0]=s(A[0],w[0]),A[1]=c(A[1],w[1]);break}}return D===T&&g.push(w),g}var h=a;function p(g,w){return h(g[0],w[0])}var d;try{d=t.reduce(f,[]),d.sort(p)}catch{return Q(this,be)}var m=0,y=l?function(g){return a(g,d[m][1])>0}:function(g){return a(g,d[m][1])>=0},v=u?function(g){return o(g,d[m][0])>0}:function(g){return o(g,d[m][0])>=0};function _(g){return!y(g)&&!v(g)}var b=y,I=new this.Collection(this,function(){return Se(d[0][0],d[d.length-1][1],!u,!l)});return I._ondirectionchange=function(g){g==="next"?(b=y,h=a):(b=v,h=o),d.sort(p)},I._addAlgorithm(function(g,w,D){for(var T=g.key;b(T);)if(++m,m===d.length)return w(D),!1;return _(T)?!0:(r._cmp(T,d[m][1])===0||r._cmp(T,d[m][0])===0||w(function(){h===a?g.continue(d[m][0]):g.continue(d[m][1])}),!1)}),I},e.prototype.startsWithAnyOf=function(){var t=ve.apply(tt,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?st(this):this.inAnyRange(t.map(function(n){return[n,n+We]})):Q(this,"startsWithAnyOf() only works with strings")},e}();function Jo(e){return Ct(ki.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var a=e._deps.indexedDB;if(!a)throw new S.MissingAPI;this._cmp=this._ascending=a.cmp.bind(a),this._descending=function(o,s){return a.cmp(s,o)},this._max=function(o,s){return a.cmp(o,s)>0?o:s},this._min=function(o,s){return a.cmp(o,s)<0?o:s},this._IDBKeyRange=e._deps.IDBKeyRange})}function le(e){return z(function(t){return Dt(t),e(t.target.error),!1})}function Dt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Rt="storagemutated",Pe="x-storagemutated-1",Me=Tt(null,Rt),Yo=function(){function e(){}return e.prototype._lock=function(){return mt(!R.global),++this._reculock,this._reculock===1&&!R.global&&(R.lockOwnerFor=this),this},e.prototype._unlock=function(){if(mt(!R.global),--this._reculock===0)for(R.global||(R.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{at(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&R.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(mt(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new S.DatabaseClosed(i);case"MissingAPIError":throw new S.MissingAPI(i.message,i);default:throw new S.OpenFailed(i)}if(!this.active)throw new S.TransactionInactive;return mt(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=z(function(a){Dt(a),n._reject(t.error)}),t.onabort=z(function(a){Dt(a),n.active&&n._reject(new S.Abort(t.error)),n.active=!1,n.on("abort").fire(a)}),t.oncomplete=z(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Me.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return K(new S.ReadOnly("Transaction is readonly"));if(!this.active)return K(new S.TransactionInactive);if(this._locked())return new C(function(o,s){i._blockedFuncs.push([function(){i._promise(t,n,r).then(o,s)},R])});if(r)return Ae(function(){var o=new C(function(s,c){i._lock();var u=n(s,c,i);u&&u.then&&u.then(s,c)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var a=new C(function(o,s){var c=n(o,s,i);c&&c.then&&c.then(o,s)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=C.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var a=n._waitingFor;return new C(function(o,s){r.then(function(c){return n._waitingQueue.push(z(o.bind(null,c)))},function(c){return n._waitingQueue.push(z(s.bind(null,c)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new S.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if($(n,t))return n[t];var r=this.schema[t];if(!r)throw new S.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function $o(e){return Ct(Yo.prototype,function(n,r,i,a,o){var s=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Tt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new C(function(c,u){s._resolve=c,s._reject=u}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(c){var u=s.active;return s.active=!1,s.on.error.fire(c),s.parent?s.parent._reject(c):u&&s.idbtrans&&s.idbtrans.abort(),K(c)})})}function hr(e,t,n,r,i,a,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Gi(t)}}function Gi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function zi(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:ui(n,function(r){return[r.name,r]})}}function Qo(e){return e.length===1?e[0]:e}var At=function(e){try{return e.only([[]]),At=function(){return[[]]},[[]]}catch{return At=function(){return We},We}};function mr(e){return e==null?function(){}:typeof e=="string"?Zo(e):function(t){return ye(t,e)}}function Zo(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return ye(n,e)}}function qi(e){return[].slice.call(e)}var es=0;function Ot(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function ts(e,t,n){function r(f,h){var p=qi(f.objectStoreNames);return{schema:{name:f.name,tables:p.map(function(d){return h.objectStore(d)}).map(function(d){var m=d.keyPath,y=d.autoIncrement,v=H(m),_=m==null,b={},I={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_,compound:v,keyPath:m,autoIncrement:y,unique:!0,extractKey:mr(m)},indexes:qi(d.indexNames).map(function(g){return d.index(g)}).map(function(g){var w=g.name,D=g.unique,T=g.multiEntry,A=g.keyPath,O=H(A),M={name:w,compound:O,keyPath:A,unique:D,multiEntry:T,extractKey:mr(A)};return b[Ot(A)]=M,M}),getIndexByKeyPath:function(g){return b[Ot(g)]}};return b[":id"]=I.primaryKey,m!=null&&(b[Ot(m)]=I.primaryKey),I})},hasGetAll:p.length>0&&"getAll"in h.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var h=f.lower,p=f.upper,d=f.lowerOpen,m=f.upperOpen,y=h===void 0?p===void 0?null:t.upperBound(p,!!m):p===void 0?t.lowerBound(h,!!d):t.bound(h,p,!!d,!!m);return y}function a(f){var h=f.name;function p(y){var v=y.trans,_=y.type,b=y.keys,I=y.values,g=y.range;return new Promise(function(w,D){w=z(w);var T=v.objectStore(h),A=T.keyPath==null,O=_==="put"||_==="add";if(!O&&_!=="delete"&&_!=="deleteRange")throw new Error("Invalid operation type: "+_);var M=(b||I||{length:1}).length;if(b&&I&&b.length!==I.length)throw new Error("Given keys array must have same length as given values array.");if(M===0)return w({numFailures:0,failures:{},results:[],lastResult:void 0});var x,B=[],W=[],P=0,ee=function(de){++P,Dt(de)};if(_==="deleteRange"){if(g.type===4)return w({numFailures:P,failures:W,results:[],lastResult:void 0});g.type===3?B.push(x=T.clear()):B.push(x=T.delete(i(g)))}else{var ae=O?A?[I,b]:[I,null]:[b,null],xe=ae[0],fe=ae[1];if(O)for(var te=0;te<M;++te)B.push(x=fe&&fe[te]!==void 0?T[_](xe[te],fe[te]):T[_](xe[te])),x.onerror=ee;else for(var te=0;te<M;++te)B.push(x=T[_](xe[te])),x.onerror=ee}var Be=function(de){var Bt=de.target.result;B.forEach(function(oe,yn){return oe.error!=null&&(W[yn]=oe.error)}),w({numFailures:P,failures:W,results:_==="delete"?b:B.map(function(oe){return oe.result}),lastResult:Bt})};x.onerror=function(de){ee(de),Be(de)},x.onsuccess=Be})}function d(y){var v=y.trans,_=y.values,b=y.query,I=y.reverse,g=y.unique;return new Promise(function(w,D){w=z(w);var T=b.index,A=b.range,O=v.objectStore(h),M=T.isPrimaryKey?O:O.index(T.name),x=I?g?"prevunique":"prev":g?"nextunique":"next",B=_||!("openKeyCursor"in M)?M.openCursor(i(A),x):M.openKeyCursor(i(A),x);B.onerror=le(D),B.onsuccess=z(function(W){var P=B.result;if(!P){w(null);return}P.___id=++es,P.done=!1;var ee=P.continue.bind(P),ae=P.continuePrimaryKey;ae&&(ae=ae.bind(P));var xe=P.advance.bind(P),fe=function(){throw new Error("Cursor not started")},te=function(){throw new Error("Cursor not stopped")};P.trans=v,P.stop=P.continue=P.continuePrimaryKey=P.advance=fe,P.fail=z(D),P.next=function(){var Be=this,de=1;return this.start(function(){return de--?Be.continue():Be.stop()}).then(function(){return Be})},P.start=function(Be){var de=new Promise(function(oe,yn){oe=z(oe),B.onerror=le(yn),P.fail=yn,P.stop=function(zu){P.stop=P.continue=P.continuePrimaryKey=P.advance=te,oe(zu)}}),Bt=function(){if(B.result)try{Be()}catch(oe){P.fail(oe)}else P.done=!0,P.start=function(){throw new Error("Cursor behind last entry")},P.stop()};return B.onsuccess=z(function(oe){B.onsuccess=Bt,Bt()}),P.continue=ee,P.continuePrimaryKey=ae,P.advance=xe,Bt(),de},w(P)},D)})}function m(y){return function(v){return new Promise(function(_,b){_=z(_);var I=v.trans,g=v.values,w=v.limit,D=v.query,T=w===1/0?void 0:w,A=D.index,O=D.range,M=I.objectStore(h),x=A.isPrimaryKey?M:M.index(A.name),B=i(O);if(w===0)return _({result:[]});if(y){var W=g?x.getAll(B,T):x.getAllKeys(B,T);W.onsuccess=function(xe){return _({result:xe.target.result})},W.onerror=le(b)}else{var P=0,ee=g||!("openKeyCursor"in x)?x.openCursor(B):x.openKeyCursor(B),ae=[];ee.onsuccess=function(xe){var fe=ee.result;if(!fe)return _({result:ae});if(ae.push(g?fe.value:fe.primaryKey),++P===w)return _({result:ae});fe.continue()},ee.onerror=le(b)}})}}return{name:h,schema:f,mutate:p,getMany:function(y){var v=y.trans,_=y.keys;return new Promise(function(b,I){b=z(b);for(var g=v.objectStore(h),w=_.length,D=new Array(w),T=0,A=0,O,M=function(P){var ee=P.target;(D[ee._pos]=ee.result)!=null,++A===T&&b(D)},x=le(I),B=0;B<w;++B){var W=_[B];W!=null&&(O=g.get(_[B]),O._pos=B,O.onsuccess=M,O.onerror=x,++T)}T===0&&b(D)})},get:function(y){var v=y.trans,_=y.key;return new Promise(function(b,I){b=z(b);var g=v.objectStore(h),w=g.get(_);w.onsuccess=function(D){return b(D.target.result)},w.onerror=le(I)})},query:m(c),openCursor:d,count:function(y){var v=y.query,_=y.trans,b=v.index,I=v.range;return new Promise(function(g,w){var D=_.objectStore(h),T=b.isPrimaryKey?D:D.index(b.name),A=i(I),O=A?T.count(A):T.count();O.onsuccess=z(function(M){return g(M.target.result)}),O.onerror=le(w)})}}}var o=r(e,n),s=o.schema,c=o.hasGetAll,u=s.tables.map(function(f){return a(f)}),l={};return u.forEach(function(f){return l[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var h=l[f];if(!h)throw new Error("Table '"+f+"' not found");return l[f]},MIN_KEY:-1/0,MAX_KEY:At(t),schema:s}}function ns(e,t){return t.reduce(function(n,r){var i=r.create;return F(F({},n),i(n))},e)}function rs(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=ns(ts(t,i,r),e.dbcore);return{dbcore:a}}function pr(e,t){var n=e._novip,r=t.db,i=rs(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(a){var o=a.name;n.core.schema.tables.some(function(s){return s.name===o})&&(a.core=n.core.table(o),n[o]instanceof n.Table&&(n[o].core=a.core))})}function sn(e,t,n,r){var i=e._novip;n.forEach(function(a){var o=r[a];t.forEach(function(s){var c=kn(s,a);(!c||"value"in c&&c.value===void 0)&&(s===i.Transaction.prototype||s instanceof i.Transaction?pe(s,a,{get:function(){return this.table(a)},set:function(u){ai(this,a,{value:u,writable:!0,configurable:!0,enumerable:!0})}}):s[a]=new i.Table(a,o))})})}function yr(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function is(e,t){return e._cfg.version-t._cfg.version}function as(e,t,n,r){var i=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),s=R.transless||R;Ae(function(){R.trans=a,R.transless=s,t===0?(q(i).forEach(function(c){vr(n,c,i[c].primKey,i[c].indexes)}),pr(e,n),C.follow(function(){return e.on.populate.fire(a)}).catch(o)):os(e,t,a,n).catch(o)})}function os(e,t,n,r){var i=e._novip,a=[],o=i._versions,s=i._dbSchema=br(i,i.idbdb,r),c=!1,u=o.filter(function(f){return f._cfg.version>=t});u.forEach(function(f){a.push(function(){var h=s,p=f._cfg.dbschema;Er(i,h,r),Er(i,p,r),s=i._dbSchema=p;var d=Ki(h,p);d.add.forEach(function(I){vr(r,I[0],I[1].primKey,I[1].indexes)}),d.change.forEach(function(I){if(I.recreate)throw new S.Upgrade("Not yet support for changing primary key");var g=r.objectStore(I.name);I.add.forEach(function(w){return gr(g,w)}),I.change.forEach(function(w){g.deleteIndex(w.name),gr(g,w)}),I.del.forEach(function(w){return g.deleteIndex(w)})});var m=f._cfg.contentUpgrade;if(m&&f._cfg.version>t){pr(i,r),n._memoizedTables={},c=!0;var y=ci(p);d.del.forEach(function(I){y[I]=h[I]}),yr(i,[i.Transaction.prototype]),sn(i,[i.Transaction.prototype],q(y),y),n.schema=y;var v=Kn(m);v&&it();var _,b=C.follow(function(){if(_=m(n),_&&v){var I=ge.bind(null,null);_.then(I,I)}});return _&&typeof _.then=="function"?C.resolve(_):b.then(function(){return _})}}),a.push(function(h){if(!c||!xo){var p=f._cfg.dbschema;us(p,h)}yr(i,[i.Transaction.prototype]),sn(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function l(){return a.length?C.resolve(a.shift()(n.idbtrans)).then(l):C.resolve()}return l().then(function(){ss(s,r)})}function Ki(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],a=t[r];if(!i)n.add.push([r,a]);else{var o={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!en)o.recreate=!0,n.change.push(o);else{var s=i.idxByName,c=a.idxByName,u=void 0;for(u in s)c[u]||o.del.push(u);for(u in c){var l=s[u],f=c[u];l?l.src!==f.src&&o.change.push(f):o.add.push(f)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function vr(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return gr(i,a)}),i}function ss(e,t){q(e).forEach(function(n){t.db.objectStoreNames.contains(n)||vr(t,n,e[n].primKey,e[n].indexes)})}function us(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function gr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function br(e,t,n){var r={},i=zt(t.objectStoreNames,0);return i.forEach(function(a){for(var o=n.objectStore(a),s=o.keyPath,c=hr(Gi(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),u=[],l=0;l<o.indexNames.length;++l){var f=o.index(o.indexNames[l]);s=f.keyPath;var h=hr(f.name,s,!!f.unique,!!f.multiEntry,!1,s&&typeof s!="string",!1);u.push(h)}r[a]=zi(a,c,u)}),r}function cs(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=br(r,t,n);r._storeNames=zt(t.objectStoreNames,0),sn(r,[r._allTables],q(i),i)}function ls(e,t){var n=br(e,e.idbdb,t),r=Ki(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Er(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,a=0;a<i.length;++a){var o=i[a],s=n.objectStore(o);r._hasGetAll="getAll"in s;for(var c=0;c<s.indexNames.length;++c){var u=s.indexNames[c],l=s.index(u).keyPath,f=typeof l=="string"?l:"["+zt(l).join("+")+"]";if(t[o]){var h=t[o].idxByName[f];h&&(h.name=u,delete t[o].idxByName[f],t[o].idxByName[u]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&k.WorkerGlobalScope&&k instanceof k.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function fs(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return hr(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),H(i),n===0)})}var ds=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){q(t).forEach(function(r){if(t[r]!==null){var i=fs(t[r]),a=i.shift();if(a.multi)throw new S.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new S.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new S.Schema("Index must have a name and cannot be an empty string")}),n[r]=zi(r,a,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?X(this._cfg.storesSource,t):t;var r=n._versions,i={},a={};return r.forEach(function(o){X(i,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(i,a)}),n._dbSchema=a,yr(n,[n._allTables,n,n.Transaction.prototype]),sn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],q(a),a),n._storeNames=q(a),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Wn(this._cfg.contentUpgrade||L,t),this},e}();function hs(e){return Ct(ds.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function _r(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Or(tn,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Ir(e){return e&&typeof e.databases=="function"}function ms(e){var t=e.indexedDB,n=e.IDBKeyRange;return Ir(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==tn})}):_r(t,n).toCollection().primaryKeys()}function ps(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!Ir(n)&&t!==tn&&_r(n,r).put({name:t}).catch(L)}function ys(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!Ir(n)&&t!==tn&&_r(n,r).delete(t).catch(L)}function wr(e){return Ae(function(){return R.letThrough=!0,e()})}function vs(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function gs(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?K(t.dbOpenError):e});ce&&(t.openCanceller._stackHolder=Ke()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new S.DatabaseClosed("db.open() was cancelled")}var a=t.dbReadyResolve,o=null,s=!1;return C.race([r,(typeof navigator>"u"?C.resolve():vs()).then(function(){return new C(function(c,u){if(i(),!n)throw new S.MissingAPI;var l=e.name,f=t.autoSchema?n.open(l):n.open(l,Math.round(e.verno*10));if(!f)throw new S.MissingAPI;f.onerror=le(u),f.onblocked=z(e._fireOnBlocked),f.onupgradeneeded=z(function(h){if(o=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=Dt,o.abort(),f.result.close();var p=n.deleteDatabase(l);p.onsuccess=p.onerror=z(function(){u(new S.NoSuchDatabase("Database "+l+" doesnt exist"))})}else{o.onerror=le(u);var d=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;s=d<1,e._novip.idbdb=f.result,as(e,d/10,o,u)}},u),f.onsuccess=z(function(){o=null;var h=e._novip.idbdb=f.result,p=zt(h.objectStoreNames);if(p.length>0)try{var d=h.transaction(Qo(p),"readonly");t.autoSchema?cs(e,h,d):(Er(e,e._dbSchema,d),ls(e,d)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),pr(e,d)}catch{}wt.push(e),h.onversionchange=z(function(m){t.vcFired=!0,e.on("versionchange").fire(m)}),h.onclose=z(function(m){e.on("close").fire(m)}),s&&ps(e._deps,l),c()},u)})})]).then(function(){return i(),t.onReadyBeingFired=[],C.resolve(wr(function(){return e.on.ready.fire(e.vip)})).then(function c(){if(t.onReadyBeingFired.length>0){var u=t.onReadyBeingFired.reduce(Wn,L);return t.onReadyBeingFired=[],C.resolve(wr(function(){return u(e.vip)})).then(c)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(c){t.dbOpenError=c;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),K(c)}).finally(function(){t.openComplete=!0,a()})}function Tr(e){var t=function(o){return e.next(o)},n=function(o){return e.throw(o)},r=a(t),i=a(n);function a(o){return function(s){var c=o(s),u=c.value;return c.done?u:!u||typeof u.then!="function"?H(u)?Promise.all(u).then(r,i):r(u):u.then(r,i)}}return a(t)()}function bs(e,t,n){var r=arguments.length;if(r<2)throw new S.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=li(i);return[e,a,n]}function Hi(e,t,n,r,i){return C.resolve().then(function(){var a=R.transless||R,o=e._createTransaction(t,n,e._dbSchema,r),s={trans:o,transless:a};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===Un.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Hi(e,t,n,null,i)})):K(f)}var c=Kn(i);c&&it();var u,l=C.follow(function(){if(u=i.call(o,o),u)if(c){var f=ge.bind(null,null);u.then(f,f)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=Tr(u))},s);return(u&&typeof u.then=="function"?C.resolve(u).then(function(f){return o.active?f:K(new S.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):l.then(function(){return u})).then(function(f){return r&&o._resolve(),o._completion.then(function(){return f})}).catch(function(f){return o._reject(f),K(f)})})}function un(e,t,n){for(var r=H(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function Es(e){return F(F({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function o(m,y,v){var _=Ot(m),b=i[_]=i[_]||[],I=m==null?0:typeof m=="string"?1:m.length,g=y>0,w=F(F({},v),{isVirtual:g,keyTail:y,keyLength:I,extractKey:mr(m),unique:!g&&v.unique});if(b.push(w),w.isPrimaryKey||a.push(w),I>1){var D=I===2?m[0]:m.slice(0,I-1);o(D,y+1,v)}return b.sort(function(T,A){return T.keyTail-A.keyTail}),w}var s=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var c=0,u=r.indexes;c<u.length;c++){var l=u[c];o(l.keyPath,0,l)}function f(m){var y=i[Ot(m)];return y&&y[0]}function h(m,y){return{type:m.type===1?2:m.type,lower:un(m.lower,m.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:un(m.upper,m.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0}}function p(m){var y=m.query.index;return y.isVirtual?F(F({},m),{query:{index:y,range:h(m.query.range,y.keyTail)}}):m}var d=F(F({},n),{schema:F(F({},r),{primaryKey:s,indexes:a,getIndexByKeyPath:f}),count:function(m){return n.count(p(m))},query:function(m){return n.query(p(m))},openCursor:function(m){var y=m.query.index,v=y.keyTail,_=y.isVirtual,b=y.keyLength;if(!_)return n.openCursor(m);function I(g){function w(T){T!=null?g.continue(un(T,m.reverse?e.MAX_KEY:e.MIN_KEY,v)):m.unique?g.continue(g.key.slice(0,b).concat(m.reverse?e.MIN_KEY:e.MAX_KEY,v)):g.continue()}var D=Object.create(g,{continue:{value:w},continuePrimaryKey:{value:function(T,A){g.continuePrimaryKey(un(T,e.MAX_KEY,v),A)}},primaryKey:{get:function(){return g.primaryKey}},key:{get:function(){var T=g.key;return b===1?T[0]:T.slice(0,b)}},value:{get:function(){return g.value}}});return D}return n.openCursor(p(m)).then(function(g){return g&&I(g)})}});return d}})}var _s={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Es};function Cr(e,t,n,r){return n=n||{},r=r||"",q(e).forEach(function(i){if(!$(t,i))n[r+i]=void 0;else{var a=e[i],o=t[i];if(typeof a=="object"&&typeof o=="object"&&a&&o){var s=zn(a),c=zn(o);s!==c?n[r+i]=t[i]:s==="Object"?Cr(a,o,n,r+i+"."):a!==o&&(n[r+i]=t[i])}else a!==o&&(n[r+i]=t[i])}}),q(t).forEach(function(i){$(e,i)||(n[r+i]=t[i])}),n}function Is(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ws={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return F(F({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=F(F({},n),{mutate:function(a){var o=R.trans,s=o.table(t).hook,c=s.deleting,u=s.creating,l=s.updating;switch(a.type){case"add":if(u.fire===L)break;return o._promise("readwrite",function(){return f(a)},!0);case"put":if(u.fire===L&&l.fire===L)break;return o._promise("readwrite",function(){return f(a)},!0);case"delete":if(c.fire===L)break;return o._promise("readwrite",function(){return f(a)},!0);case"deleteRange":if(c.fire===L)break;return o._promise("readwrite",function(){return h(a)},!0)}return n.mutate(a);function f(d){var m=R.trans,y=d.keys||Is(r,d);if(!y)throw new Error("Keys missing");return d=d.type==="add"||d.type==="put"?F(F({},d),{keys:y}):F({},d),d.type!=="delete"&&(d.values=Ln([],d.values,!0)),d.keys&&(d.keys=Ln([],d.keys,!0)),Ts(n,d,y).then(function(v){var _=y.map(function(b,I){var g=v[I],w={onerror:null,onsuccess:null};if(d.type==="delete")c.fire.call(w,b,g,m);else if(d.type==="add"||g===void 0){var D=u.fire.call(w,b,d.values[I],m);b==null&&D!=null&&(b=D,d.keys[I]=b,r.outbound||re(d.values[I],r.keyPath,b))}else{var T=Cr(g,d.values[I]),A=l.fire.call(w,T,b,g,m);if(A){var O=d.values[I];Object.keys(A).forEach(function(M){$(O,M)?O[M]=A[M]:re(O,M,A[M])})}}return w});return n.mutate(d).then(function(b){for(var I=b.failures,g=b.results,w=b.numFailures,D=b.lastResult,T=0;T<y.length;++T){var A=g?g[T]:y[T],O=_[T];A==null?O.onerror&&O.onerror(I[T]):O.onsuccess&&O.onsuccess(d.type==="put"&&v[T]?d.values[T]:A)}return{failures:I,results:g,numFailures:w,lastResult:D}}).catch(function(b){return _.forEach(function(I){return I.onerror&&I.onerror(b)}),Promise.reject(b)})})}function h(d){return p(d.trans,d.range,1e4)}function p(d,m,y){return n.query({trans:d,values:!1,query:{index:r,range:m},limit:y}).then(function(v){var _=v.result;return f({type:"delete",keys:_,trans:d}).then(function(b){return b.numFailures>0?Promise.reject(b.failures[0]):_.length<y?{failures:[],numFailures:0,lastResult:void 0}:p(d,F(F({},m),{lower:_[_.length-1],lowerOpen:!0}),y)})})}}});return i}})}};function Ts(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function ji(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)V(t.keys[i],e[a])===0&&(r.push(n?pt(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var Cs={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return F(F({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=ji(r.keys,r.trans._cache,r.cache==="clone");return i?C.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?pt(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},Dr;function Rr(e){return!("from"in e)}var Ee=function(e,t){if(this)X(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new Ee;return e&&"d"in e&&X(n,e),n}};Ze(Ee.prototype,(Dr={add:function(e){return cn(this,e),this},addKey:function(e){return St(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return St(t,n,n)}),this}},Dr[qn]=function(){return Ar(this)},Dr));function St(e,t,n){var r=V(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(Rr(e))return X(e,{from:t,to:n,d:1});var i=e.l,a=e.r;if(V(n,e.from)<0)return i?St(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ui(e);if(V(t,e.to)>0)return a?St(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ui(e);V(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),V(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var o=!e.r;i&&!e.l&&cn(e,i),a&&o&&cn(e,a)}}function cn(e,t){function n(r,i){var a=i.from,o=i.to,s=i.l,c=i.r;St(r,a,o),s&&n(r,s),c&&n(r,c)}Rr(t)||n(e,t)}function Ds(e,t){var n=Ar(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=Ar(e),o=a.next(i.from),s=o.value;!r.done&&!o.done;){if(V(s.from,i.to)<=0&&V(s.to,i.from)>=0)return!0;V(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(o=a.next(i.from)).value}return!1}function Ar(e){var t=Rr(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&V(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||V(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ui(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",o=F({},e),s=e[i];e.from=s.from,e.to=s.to,e[i]=s[i],o[i]=s[a],e[a]=o,o.d=Wi(o)}e.d=Wi(e)}function Wi(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var Rs={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new Ee(e.MIN_KEY,e.MAX_KEY);return F(F({},e),{table:function(r){var i=e.table(r),a=i.schema,o=a.primaryKey,s=o.extractKey,c=o.outbound,u=F(F({},i),{mutate:function(h){var p=h.trans,d=p.mutatedParts||(p.mutatedParts={}),m=function(D){var T="idb://"+t+"/"+r+"/"+D;return d[T]||(d[T]=new Ee)},y=m(""),v=m(":dels"),_=h.type,b=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],I=b[0],g=b[1],w=h.trans._cache;return i.mutate(h).then(function(D){if(H(I)){_!=="delete"&&(I=D.results),y.addKeys(I);var T=ji(I,w);!T&&_!=="add"&&v.addKeys(I),(T||g)&&As(m,a,T,g)}else if(I){var A={from:I.lower,to:I.upper};v.add(A),y.add(A)}else y.add(n),v.add(n),a.indexes.forEach(function(O){return m(O.name).add(n)});return D})}}),l=function(h){var p,d,m=h.query,y=m.index,v=m.range;return[y,new Ee((p=v.lower)!==null&&p!==void 0?p:e.MIN_KEY,(d=v.upper)!==null&&d!==void 0?d:e.MAX_KEY)]},f={get:function(h){return[o,new Ee(h.key)]},getMany:function(h){return[o,new Ee().addKeys(h.keys)]},count:l,query:l,openCursor:l};return q(f).forEach(function(h){u[h]=function(p){var d=R.subscr;if(d){var m=function(w){var D="idb://"+t+"/"+r+"/"+w;return d[D]||(d[D]=new Ee)},y=m(""),v=m(":dels"),_=f[h](p),b=_[0],I=_[1];if(m(b.name||"").add(I),!b.isPrimaryKey)if(h==="count")v.add(n);else{var g=h==="query"&&c&&p.values&&i.query(F(F({},p),{values:!1}));return i[h].apply(this,arguments).then(function(w){if(h==="query"){if(c&&p.values)return g.then(function(O){var M=O.result;return y.addKeys(M),w});var D=p.values?w.result.map(s):w.result;p.values?y.addKeys(D):v.addKeys(D)}else if(h==="openCursor"){var T=w,A=p.values;return T&&Object.create(T,{key:{get:function(){return v.addKey(T.primaryKey),T.key}},primaryKey:{get:function(){var O=T.primaryKey;return v.addKey(O),O}},value:{get:function(){return A&&y.addKey(T.primaryKey),T.value}}})}return w})}}return i[h].apply(this,arguments)}}),u}})}};function As(e,t,n,r){function i(a){var o=e(a.name||"");function s(u){return u!=null?a.extractKey(u):null}var c=function(u){return a.multiEntry&&H(u)?u.forEach(function(l){return o.addKey(l)}):o.addKey(u)};(n||r).forEach(function(u,l){var f=n&&s(n[l]),h=r&&s(r[l]);V(f,h)!==0&&(f!=null&&c(f),h!=null&&c(h))})}t.indexes.forEach(i)}var Or=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=F({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:L,dbReadyPromise:null,cancelOpen:L,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new C(function(s){o.dbReadyResolve=s}),o.openCanceller=new C(function(s,c){o.cancelOpen=c}),this._state=o,this.name=t,this.on=Tt(this,"populate","blocked","versionchange","close",{ready:[Wn,L]}),this.on.ready.subscribe=oi(this.on.ready.subscribe,function(s){return function(c,u){e.vip(function(){var l=r._state;if(l.openComplete)l.dbOpenError||C.resolve().then(c),u&&s(c);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(c),u&&s(c);else{s(c);var f=r;u||s(function h(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(h)})}})}}),this.Collection=Ho(this),this.Table=ko(this),this.Transaction=$o(this),this.Version=hs(this),this.WhereClause=Jo(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+s.oldVersion/10)}),this._maxKey=At(n.IDBKeyRange),this._createTransaction=function(s,c,u,l){return new r.Transaction(s,c,u,r._options.chromeTransactionDurability,l)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),wt.filter(function(c){return c.name===r.name&&c!==r&&!c._state.vcFired}).map(function(c){return c.on("versionchange").fire(s)})},this.use(_s),this.use(ws),this.use(Rs),this.use(Cs),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new S.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new S.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(is),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||R.letThrough||this._vip)?t():new C(function(r,i){if(n._state.openComplete)return i(new S.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new S.DatabaseClosed);return}n.open().catch(L)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,a=t.name;a&&this.unuse({stack:n,name:a});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:i==null?10:i,name:a}),o.sort(function(s,c){return s.level-c.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},e.prototype.open=function(){return gs(this)},e.prototype._close=function(){var t=this._state,n=wt.indexOf(this);if(n>=0&&wt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new C(function(r){t.dbReadyResolve=r}),t.openCanceller=new C(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new S.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new C(function(i,a){var o=function(){t.close();var s=t._deps.indexedDB.deleteDatabase(t.name);s.onsuccess=z(function(){ys(t._deps,t.name),i()}),s.onerror=le(a),s.onblocked=t._fireOnBlocked};if(n)throw new S.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return q(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=bs.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,a=R.trans;(!a||a.db!==this||t.indexOf("!")!==-1)&&(a=null);var o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var s,c;try{if(c=n.map(function(l){var f=l instanceof i.Table?l.name:l;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===ur)s=ur;else if(t=="rw"||t==cr)s=cr;else throw new S.InvalidArgument("Invalid transaction mode: "+t);if(a){if(a.mode===ur&&s===cr)if(o)a=null;else throw new S.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&c.forEach(function(l){if(a&&a.storeNames.indexOf(l)===-1)if(o)a=null;else throw new S.SubTransaction("Table "+l+" not included in parent transaction.")}),o&&a&&!a.active&&(a=null)}}catch(l){return a?a._promise(null,function(f,h){h(l)}):K(l)}var u=Hi.bind(null,this,s,c,a,r);return a?a._promise(s,u,"lock"):R.trans?at(R.transless,function(){return i._whenReady(u)}):this._whenReady(u)},e.prototype.table=function(t){if(!$(this._allTables,t))throw new S.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),Os=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ss=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[Os]=function(){return this},e}();function Xi(e,t){return q(t).forEach(function(n){var r=e[n]||(e[n]=new Ee);cn(r,t[n])}),e}function Ps(e){return new Ss(function(t){var n=Kn(e);function r(p){n&&it();var d=function(){return Ae(e,{subscr:p,trans:null})},m=R.trans?at(R.transless,d):d();return n&&m.then(ge,ge),m}var i=!1,a={},o={},s={get closed(){return i},unsubscribe:function(){i=!0,Me.storagemutated.unsubscribe(f)}};t.start&&t.start(s);var c=!1,u=!1;function l(){return q(o).some(function(p){return a[p]&&Ds(a[p],o[p])})}var f=function(p){Xi(a,p),l()&&h()},h=function(){if(!(c||i)){a={};var p={},d=r(p);u||(Me(Rt,f),u=!0),c=!0,Promise.resolve(d).then(function(m){c=!1,!i&&(l()?h():(a={},o=p,t.next&&t.next(m)))},function(m){c=!1,t.error&&t.error(m),s.unsubscribe()})}};return h(),s})}var Sr;try{Sr={indexedDB:k.indexedDB||k.mozIndexedDB||k.webkitIndexedDB||k.msIndexedDB,IDBKeyRange:k.IDBKeyRange||k.webkitIDBKeyRange}}catch{Sr={indexedDB:null,IDBKeyRange:null}}var Ve=Or;Ze(Ve,F(F({},Kt),{delete:function(e){var t=new Ve(e,{addons:[]});return t.delete()},exists:function(e){return new Ve(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return ms(Ve.dependencies).then(e)}catch{return K(new S.MissingAPI)}},defineClass:function(){function e(t){X(this,t)}return e},ignoreTransaction:function(e){return R.trans?at(R.transless,e):e()},vip:wr,async:function(e){return function(){try{var t=Tr(e.apply(this,arguments));return!t||typeof t.then!="function"?C.resolve(t):t}catch(n){return K(n)}}},spawn:function(e,t,n){try{var r=Tr(e.apply(n,t||[]));return!r||typeof r.then!="function"?C.resolve(r):r}catch(i){return K(i)}},currentTransaction:{get:function(){return R.trans||null}},waitFor:function(e,t){var n=C.resolve(typeof e=="function"?Ve.ignoreTransaction(e):e).timeout(t||6e4);return R.trans?R.trans.waitFor(n):n},Promise:C,debug:{get:function(){return ce},set:function(e){di(e,e==="dexie"?function(){return!0}:Pi)}},derive:et,extend:X,props:Ze,override:oi,Events:Tt,on:Me,liveQuery:Ps,extendObservabilitySet:Xi,getByKeyPath:ye,setByKeyPath:re,delByKeyPath:uo,shallowClone:ci,deepClone:pt,getObjectDiff:Cr,cmp:V,asap:si,minKey:sr,addons:[],connections:wt,errnames:Un,dependencies:Sr,semVer:Oi,version:Oi.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})})),Ve.maxKey=At(Ve.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Me(Rt,function(e){if(!_e){var t;en?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Pe,!0,!0,e)):t=new CustomEvent(Pe,{detail:e}),_e=!0,dispatchEvent(t),_e=!1}}),addEventListener(Pe,function(e){var t=e.detail;_e||ln(t)}));function ln(e){var t=_e;try{_e=!0,Me.storagemutated.fire(e)}finally{_e=t}}var _e=!1;if(typeof BroadcastChannel<"u"){var Vi=new BroadcastChannel(Pe);Me(Rt,function(e){_e||Vi.postMessage(e)}),Vi.onmessage=function(e){e.data&&ln(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Me(Rt,function(e){try{_e||(typeof localStorage<"u"&&localStorage.setItem(Pe,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&Ln([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:Pe,changedParts:e})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(e){if(e.key===Pe){var t=JSON.parse(e.newValue);t&&ln(t.changedParts)}});var Ji=self.document&&navigator.serviceWorker;Ji&&Ji.addEventListener("message",Ms)}function Ms(e){var t=e.data;t&&t.type===Pe&&ln(t.changedParts)}C.rejectionMapper=go,di(ce,Pi);function Yi(e,t){return function(){return e.apply(t,arguments)}}const{toString:$i}=Object.prototype,{getPrototypeOf:Pr}=Object,Mr=(e=>t=>{const n=$i.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ie=e=>(e=e.toLowerCase(),t=>Mr(t)===e),fn=e=>t=>typeof t===e,{isArray:Pt}=Array,Fr=fn("undefined");function Fs(e){return e!==null&&!Fr(e)&&e.constructor!==null&&!Fr(e.constructor)&&ut(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Qi=Ie("ArrayBuffer");function Ns(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Qi(e.buffer),t}const xs=fn("string"),ut=fn("function"),Zi=fn("number"),ea=e=>e!==null&&typeof e=="object",Bs=e=>e===!0||e===!1,dn=e=>{if(Mr(e)!=="object")return!1;const t=Pr(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ls=Ie("Date"),ks=Ie("File"),Gs=Ie("Blob"),zs=Ie("FileList"),qs=e=>ea(e)&&ut(e.pipe),Ks=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||$i.call(e)===t||ut(e.toString)&&e.toString()===t)},Hs=Ie("URLSearchParams"),js=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hn(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Pt(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let s;for(r=0;r<o;r++)s=a[r],t.call(null,e[s],s,e)}}function Nr(){const e={},t=(n,r)=>{dn(e[r])&&dn(n)?e[r]=Nr(e[r],n):dn(n)?e[r]=Nr({},n):Pt(n)?e[r]=n.slice():e[r]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&hn(arguments[n],t);return e}const Us=(e,t,n,{allOwnKeys:r}={})=>(hn(t,(i,a)=>{n&&ut(i)?e[a]=Yi(i,n):e[a]=i},{allOwnKeys:r}),e),Ws=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Xs=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Vs=(e,t,n,r)=>{let i,a,o;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],(!r||r(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=n!==!1&&Pr(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Js=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Ys=e=>{if(!e)return null;if(Pt(e))return e;let t=e.length;if(!Zi(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},$s=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Pr(Uint8Array)),Qs=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},Zs=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},eu=Ie("HTMLFormElement"),tu=e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),ta=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),nu=Ie("RegExp"),na=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};hn(n,(i,a)=>{t(i,a,e)!==!1&&(r[a]=i)}),Object.defineProperties(e,r)};var E={isArray:Pt,isArrayBuffer:Qi,isBuffer:Fs,isFormData:Ks,isArrayBufferView:Ns,isString:xs,isNumber:Zi,isBoolean:Bs,isObject:ea,isPlainObject:dn,isUndefined:Fr,isDate:Ls,isFile:ks,isBlob:Gs,isRegExp:nu,isFunction:ut,isStream:qs,isURLSearchParams:Hs,isTypedArray:$s,isFileList:zs,forEach:hn,merge:Nr,extend:Us,trim:js,stripBOM:Ws,inherits:Xs,toFlatObject:Vs,kindOf:Mr,kindOfTest:Ie,endsWith:Js,toArray:Ys,forEachEntry:Qs,matchAll:Zs,isHTMLForm:eu,hasOwnProperty:ta,hasOwnProp:ta,reduceDescriptors:na,freezeMethods:e=>{na(e,(t,n)=>{const r=e[n];if(!!ut(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not read-only method '"+n+"'")})}})},toObjectSet:(e,t)=>{const n={},r=i=>{i.forEach(a=>{n[a]=!0})};return Pt(e)?r(e):r(String(e).split(t)),n},toCamelCase:tu,noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t)};function N(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}E.inherits(N,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ra=N.prototype,ia={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ia[e]={value:e}}),Object.defineProperties(N,ia),Object.defineProperty(ra,"isAxiosError",{value:!0}),N.from=(e,t,n,r,i,a)=>{const o=Object.create(ra);return E.toFlatObject(e,o,function(c){return c!==Error.prototype},s=>s!=="isAxiosError"),N.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var ru=typeof self=="object"?self.FormData:window.FormData;function xr(e){return E.isPlainObject(e)||E.isArray(e)}function aa(e){return E.endsWith(e,"[]")?e.slice(0,-2):e}function oa(e,t,n){return e?e.concat(t).map(function(i,a){return i=aa(i),!n&&a?"["+i+"]":i}).join(n?".":""):t}function iu(e){return E.isArray(e)&&!e.some(xr)}const au=E.toFlatObject(E,{},null,function(t){return/^is[A-Z]/.test(t)});function ou(e){return e&&E.isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator]}function mn(e,t,n){if(!E.isObject(e))throw new TypeError("target must be an object");t=t||new(ru||FormData),n=E.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!E.isUndefined(y[m])});const r=n.metaTokens,i=n.visitor||l,a=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&ou(t);if(!E.isFunction(i))throw new TypeError("visitor must be a function");function u(d){if(d===null)return"";if(E.isDate(d))return d.toISOString();if(!c&&E.isBlob(d))throw new N("Blob is not supported. Use a Buffer instead.");return E.isArrayBuffer(d)||E.isTypedArray(d)?c&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function l(d,m,y){let v=d;if(d&&!y&&typeof d=="object"){if(E.endsWith(m,"{}"))m=r?m:m.slice(0,-2),d=JSON.stringify(d);else if(E.isArray(d)&&iu(d)||E.isFileList(d)||E.endsWith(m,"[]")&&(v=E.toArray(d)))return m=aa(m),v.forEach(function(b,I){!(E.isUndefined(b)||b===null)&&t.append(o===!0?oa([m],I,a):o===null?m:m+"[]",u(b))}),!1}return xr(d)?!0:(t.append(oa(y,m,a),u(d)),!1)}const f=[],h=Object.assign(au,{defaultVisitor:l,convertValue:u,isVisitable:xr});function p(d,m){if(!E.isUndefined(d)){if(f.indexOf(d)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(d),E.forEach(d,function(v,_){(!(E.isUndefined(v)||v===null)&&i.call(t,v,E.isString(_)?_.trim():_,m,h))===!0&&p(v,m?m.concat(_):[_])}),f.pop()}}if(!E.isObject(e))throw new TypeError("data must be an object");return p(e),t}function sa(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Br(e,t){this._pairs=[],e&&mn(e,this,t)}const ua=Br.prototype;ua.append=function(t,n){this._pairs.push([t,n])},ua.toString=function(t){const n=t?function(r){return t.call(this,r,sa)}:sa;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function su(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ca(e,t,n){if(!t)return e;const r=n&&n.encode||su,i=n&&n.serialize;let a;if(i?a=i(t,n):a=E.isURLSearchParams(t)?t.toString():new Br(t,n).toString(r),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class la{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){E.forEach(this.handlers,function(r){r!==null&&t(r)})}}var fa={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uu=typeof URLSearchParams<"u"?URLSearchParams:Br,cu=FormData;const lu=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})();var we={isBrowser:!0,classes:{URLSearchParams:uu,FormData:cu,Blob},isStandardBrowserEnv:lu,protocols:["http","https","file","blob","url","data"]};function fu(e,t){return mn(e,new we.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,a){return we.isNode&&E.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function du(e){return E.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function hu(e){const t={},n=Object.keys(e);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],t[a]=e[a];return t}function da(e){function t(n,r,i,a){let o=n[a++];const s=Number.isFinite(+o),c=a>=n.length;return o=!o&&E.isArray(i)?i.length:o,c?(E.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!s):((!i[o]||!E.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],a)&&E.isArray(i[o])&&(i[o]=hu(i[o])),!s)}if(E.isFormData(e)&&E.isFunction(e.entries)){const n={};return E.forEachEntry(e,(r,i)=>{t(du(r),i,n,0)}),n}return null}function mu(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new N("Request failed with status code "+n.status,[N.ERR_BAD_REQUEST,N.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}var pu=we.isStandardBrowserEnv?function(){return{write:function(n,r,i,a,o,s){const c=[];c.push(n+"="+encodeURIComponent(r)),E.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),E.isString(a)&&c.push("path="+a),E.isString(o)&&c.push("domain="+o),s===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function yu(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function vu(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function ha(e,t){return e&&!yu(t)?vu(e,t):t}var gu=we.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(a){let o=a;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const s=E.isString(o)?i(o):o;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}();function Mt(e,t,n){N.call(this,e==null?"canceled":e,N.ERR_CANCELED,t,n),this.name="CanceledError"}E.inherits(Mt,N,{__CANCEL__:!0});function bu(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}const Eu=E.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var _u=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&Eu[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t};const ma=Symbol("internals"),pa=Symbol("defaults");function Ft(e){return e&&String(e).trim().toLowerCase()}function pn(e){return e===!1||e==null?e:E.isArray(e)?e.map(pn):String(e)}function Iu(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}function ya(e,t,n,r){if(E.isFunction(r))return r.call(this,t,n);if(!!E.isString(t)){if(E.isString(r))return t.indexOf(r)!==-1;if(E.isRegExp(r))return r.test(t)}}function wu(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Tu(e,t){const n=E.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,a,o){return this[r].call(this,t,i,a,o)},configurable:!0})})}function Nt(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}function Z(e,t){e&&this.set(e),this[pa]=t||null}Object.assign(Z.prototype,{set:function(e,t,n){const r=this;function i(a,o,s){const c=Ft(o);if(!c)throw new Error("header name must be a non-empty string");const u=Nt(r,c);u&&s!==!0&&(r[u]===!1||s===!1)||(r[u||o]=pn(a))}return E.isPlainObject(e)?E.forEach(e,(a,o)=>{i(a,o,t)}):i(t,e,n),this},get:function(e,t){if(e=Ft(e),!e)return;const n=Nt(this,e);if(n){const r=this[n];if(!t)return r;if(t===!0)return Iu(r);if(E.isFunction(t))return t.call(this,r,n);if(E.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}},has:function(e,t){if(e=Ft(e),e){const n=Nt(this,e);return!!(n&&(!t||ya(this,this[n],n,t)))}return!1},delete:function(e,t){const n=this;let r=!1;function i(a){if(a=Ft(a),a){const o=Nt(n,a);o&&(!t||ya(n,n[o],o,t))&&(delete n[o],r=!0)}}return E.isArray(e)?e.forEach(i):i(e),r},clear:function(){return Object.keys(this).forEach(this.delete.bind(this))},normalize:function(e){const t=this,n={};return E.forEach(this,(r,i)=>{const a=Nt(n,i);if(a){t[a]=pn(r),delete t[i];return}const o=e?wu(i):String(i).trim();o!==i&&delete t[i],t[o]=pn(r),n[o]=!0}),this},toJSON:function(e){const t=Object.create(null);return E.forEach(Object.assign({},this[pa]||null,this),(n,r)=>{n==null||n===!1||(t[r]=e&&E.isArray(n)?n.join(", "):n)}),t}}),Object.assign(Z,{from:function(e){return E.isString(e)?new this(_u(e)):e instanceof this?e:new this(e)},accessor:function(e){const n=(this[ma]=this[ma]={accessors:{}}).accessors,r=this.prototype;function i(a){const o=Ft(a);n[o]||(Tu(r,a),n[o]=!0)}return E.isArray(e)?e.forEach(i):i(e),this}}),Z.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),E.freezeMethods(Z.prototype),E.freezeMethods(Z);function Cu(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,a=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),l=r[a];o||(o=u),n[i]=c,r[i]=u;let f=a,h=0;for(;f!==i;)h+=n[f++],f=f%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),u-o<t)return;const p=l&&u-l;return p?Math.round(h*1e3/p):void 0}}function va(e,t){let n=0;const r=Cu(50,250);return i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-n,c=r(s),u=a<=o;n=a;const l={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:c||void 0,estimated:c&&o&&u?(o-a)/c:void 0};l[t?"download":"upload"]=!0,e(l)}}function ga(e){return new Promise(function(n,r){let i=e.data;const a=Z.from(e.headers).normalize(),o=e.responseType;let s;function c(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}E.isFormData(i)&&we.isStandardBrowserEnv&&a.setContentType(!1);let u=new XMLHttpRequest;if(e.auth){const p=e.auth.username||"",d=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(p+":"+d))}const l=ha(e.baseURL,e.url);u.open(e.method.toUpperCase(),ca(l,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function f(){if(!u)return;const p=Z.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),m={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:p,config:e,request:u};mu(function(v){n(v),c()},function(v){r(v),c()},m),u=null}if("onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(f)},u.onabort=function(){!u||(r(new N("Request aborted",N.ECONNABORTED,e,u)),u=null)},u.onerror=function(){r(new N("Network Error",N.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let d=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const m=e.transitional||fa;e.timeoutErrorMessage&&(d=e.timeoutErrorMessage),r(new N(d,m.clarifyTimeoutError?N.ETIMEDOUT:N.ECONNABORTED,e,u)),u=null},we.isStandardBrowserEnv){const p=(e.withCredentials||gu(l))&&e.xsrfCookieName&&pu.read(e.xsrfCookieName);p&&a.set(e.xsrfHeaderName,p)}i===void 0&&a.setContentType(null),"setRequestHeader"in u&&E.forEach(a.toJSON(),function(d,m){u.setRequestHeader(m,d)}),E.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&o!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",va(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",va(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=p=>{!u||(r(!p||p.type?new Mt(null,e,u):p),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const h=bu(l);if(h&&we.protocols.indexOf(h)===-1){r(new N("Unsupported protocol "+h+":",N.ERR_BAD_REQUEST,e));return}u.send(i||null)})}const ba={http:ga,xhr:ga};var Ea={getAdapter:e=>{if(E.isString(e)){const t=ba[e];if(!e)throw Error(E.hasOwnProp(e)?`Adapter '${e}' is not available in the build`:`Can not resolve adapter '${e}'`);return t}if(!E.isFunction(e))throw new TypeError("adapter is not a function");return e},adapters:ba};const Du={"Content-Type":"application/x-www-form-urlencoded"};function Ru(){let e;return typeof XMLHttpRequest<"u"?e=Ea.getAdapter("xhr"):typeof process<"u"&&E.kindOf(process)==="process"&&(e=Ea.getAdapter("http")),e}function Au(e,t,n){if(E.isString(e))try{return(t||JSON.parse)(e),E.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const ct={transitional:fa,adapter:Ru(),transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,a=E.isObject(t);if(a&&E.isHTMLForm(t)&&(t=new FormData(t)),E.isFormData(t))return i&&i?JSON.stringify(da(t)):t;if(E.isArrayBuffer(t)||E.isBuffer(t)||E.isStream(t)||E.isFile(t)||E.isBlob(t))return t;if(E.isArrayBufferView(t))return t.buffer;if(E.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return fu(t,this.formSerializer).toString();if((s=E.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return mn(s?{"files[]":t}:t,c&&new c,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),Au(t)):t}],transformResponse:[function(t){const n=this.transitional||ct.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(t&&E.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(o)throw s.name==="SyntaxError"?N.from(s,N.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:we.classes.FormData,Blob:we.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};E.forEach(["delete","get","head"],function(t){ct.headers[t]={}}),E.forEach(["post","put","patch"],function(t){ct.headers[t]=E.merge(Du)});function Lr(e,t){const n=this||ct,r=t||n,i=Z.from(r.headers);let a=r.data;return E.forEach(e,function(s){a=s.call(n,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function _a(e){return!!(e&&e.__CANCEL__)}function kr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Mt}function Ia(e){return kr(e),e.headers=Z.from(e.headers),e.data=Lr.call(e,e.transformRequest),(e.adapter||ct.adapter)(e).then(function(r){return kr(e),r.data=Lr.call(e,e.transformResponse,r),r.headers=Z.from(r.headers),r},function(r){return _a(r)||(kr(e),r&&r.response&&(r.response.data=Lr.call(e,e.transformResponse,r.response),r.response.headers=Z.from(r.response.headers))),Promise.reject(r)})}function xt(e,t){t=t||{};const n={};function r(u,l){return E.isPlainObject(u)&&E.isPlainObject(l)?E.merge(u,l):E.isPlainObject(l)?E.merge({},l):E.isArray(l)?l.slice():l}function i(u){if(E.isUndefined(t[u])){if(!E.isUndefined(e[u]))return r(void 0,e[u])}else return r(e[u],t[u])}function a(u){if(!E.isUndefined(t[u]))return r(void 0,t[u])}function o(u){if(E.isUndefined(t[u])){if(!E.isUndefined(e[u]))return r(void 0,e[u])}else return r(void 0,t[u])}function s(u){if(u in t)return r(e[u],t[u]);if(u in e)return r(void 0,e[u])}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s};return E.forEach(Object.keys(e).concat(Object.keys(t)),function(l){const f=c[l]||i,h=f(l);E.isUndefined(h)&&f!==s||(n[l]=h)}),n}const wa="1.1.3",Gr={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Gr[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Ta={};Gr.transitional=function(t,n,r){function i(a,o){return"[Axios v"+wa+"] Transitional option '"+a+"'"+o+(r?". "+r:"")}return(a,o,s)=>{if(t===!1)throw new N(i(o," has been removed"+(n?" in "+n:"")),N.ERR_DEPRECATED);return n&&!Ta[o]&&(Ta[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,o,s):!0}};function Ou(e,t,n){if(typeof e!="object")throw new N("options must be an object",N.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],o=t[a];if(o){const s=e[a],c=s===void 0||o(s,a,e);if(c!==!0)throw new N("option "+a+" must be "+c,N.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new N("Unknown option "+a,N.ERR_BAD_OPTION)}}var zr={assertOptions:Ou,validators:Gr};const Fe=zr.validators;class Je{constructor(t){this.defaults=t,this.interceptors={request:new la,response:new la}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=xt(this.defaults,n);const{transitional:r,paramsSerializer:i}=n;r!==void 0&&zr.assertOptions(r,{silentJSONParsing:Fe.transitional(Fe.boolean),forcedJSONParsing:Fe.transitional(Fe.boolean),clarifyTimeoutError:Fe.transitional(Fe.boolean)},!1),i!==void 0&&zr.assertOptions(i,{encode:Fe.function,serialize:Fe.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();const a=n.headers&&E.merge(n.headers.common,n.headers[n.method]);a&&E.forEach(["delete","get","head","post","put","patch","common"],function(d){delete n.headers[d]}),n.headers=new Z(n.headers,a);const o=[];let s=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(n)===!1||(s=s&&d.synchronous,o.unshift(d.fulfilled,d.rejected))});const c=[];this.interceptors.response.forEach(function(d){c.push(d.fulfilled,d.rejected)});let u,l=0,f;if(!s){const p=[Ia.bind(this),void 0];for(p.unshift.apply(p,o),p.push.apply(p,c),f=p.length,u=Promise.resolve(n);l<f;)u=u.then(p[l++],p[l++]);return u}f=o.length;let h=n;for(l=0;l<f;){const p=o[l++],d=o[l++];try{h=p(h)}catch(m){d.call(this,m);break}}try{u=Ia.call(this,h)}catch(p){return Promise.reject(p)}for(l=0,f=c.length;l<f;)u=u.then(c[l++],c[l++]);return u}getUri(t){t=xt(this.defaults,t);const n=ha(t.baseURL,t.url);return ca(n,t.params,t.paramsSerializer)}}E.forEach(["delete","get","head","options"],function(t){Je.prototype[t]=function(n,r){return this.request(xt(r||{},{method:t,url:n,data:(r||{}).data}))}}),E.forEach(["post","put","patch"],function(t){function n(r){return function(a,o,s){return this.request(xt(s||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Je.prototype[t]=n(),Je.prototype[t+"Form"]=n(!0)});class qr{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(s=>{r.subscribe(s),a=s}).then(i);return o.cancel=function(){r.unsubscribe(a)},o},t(function(a,o,s){r.reason||(r.reason=new Mt(a,o,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new qr(function(i){t=i}),cancel:t}}}function Su(e){return function(n){return e.apply(null,n)}}function Pu(e){return E.isObject(e)&&e.isAxiosError===!0}function Ca(e){const t=new Je(e),n=Yi(Je.prototype.request,t);return E.extend(n,Je.prototype,t,{allOwnKeys:!0}),E.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return Ca(xt(e,i))},n}const U=Ca(ct);U.Axios=Je,U.CanceledError=Mt,U.CancelToken=qr,U.isCancel=_a,U.VERSION=wa,U.toFormData=mn,U.AxiosError=N,U.Cancel=U.CanceledError,U.all=function(t){return Promise.all(t)},U.spread=Su,U.isAxiosError=Pu,U.formToJSON=e=>da(E.isHTMLForm(e)?new FormData(e):e);const Mu=()=>U.get("https://api.hypixel.net/skyblock/bazaar").then(e=>e.data).then(e=>{if(!e||!e.success)throw new Error("Invalid query");return Object.keys(e.products).map(n=>({buyPrice:e.products[n].quick_status.buyPrice,item_name:n,sellPrice:e.products[n].quick_status.sellPrice}))}),Fu=async e=>{const n=(await U.get(`https://api.hypixel.net/skyblock/auctions?page=${e}`)).data;return n&&n.success?n.auctions.filter(r=>!r.claimed):Promise.reject()},Nu=e=>{const t=new Map;return e.auctions.filter(n=>!n.claimed).forEach(({bin:n,highest_bid_amount:r,item_name:i,starting_bid:a,uuid:o})=>{t.set(o,{bin:n,buyPrice:n||r?a:r,item_name:i,sellPrice:n||r?a:r})}),t},xu=()=>U.get("https://api.hypixel.net/skyblock/auctions").then(e=>e.data).then(e=>{if(!e||!e.success)throw new Error("Invalid query");const t=Nu(e),n=[];if(e.totalPages>1)for(let r=1;r<e.totalPages;r++)n.push(Fu(r));return Promise.all(n).then(r=>(r.forEach(i=>{i.forEach(a=>{const{bin:o,highest_bid_amount:s,item_name:c,starting_bid:u,uuid:l}=a;t.set(l,{bin:o,buyPrice:o||s===0?u:s,item_name:c,sellPrice:o||s===0?u:s})})}),Array.from(t.values())))}),Bu={command:"Response-Loading",loading:!0},Da={command:"Response-Loading",loading:!1};class Lu extends Or{constructor(n,r){super("Database");J(this,"bazaars");J(this,"auctions");J(this,"bins");J(this,"cache");J(this,"timers");J(this,"_cacheDuration",-1);J(this,"_lastRefresh",-1);J(this,"_polling");J(this,"ctx");J(this,"postRefresh");this.ctx=n,this.postRefresh=r,this.version(1).stores({auctions:"item_name, sellPrice, buyPrice",bazaars:"item_name, sellPrice, buyPrice",bins:"item_name, sellPrice, buyPrice",cache:"key",timers:"id++, itemId, startTime, endTime"}),this.cache.get("lastRefresh").then(i=>{if(i){const a=Number(i.value);Number.isNaN(a)||(this._lastRefresh=a)}})}set cacheDuration(n){n===void 0?(this._cacheDuration=-1,this._stopPolling()):(this._cacheDuration=n,this._startPolling())}_startPolling(){!this._polling&&this._cacheDuration!==-1&&(this._polling=setInterval(()=>{this._doPolling()},1e3))}_stopPolling(){this._polling&&clearInterval(this._polling)}_doPolling(){const n=Date.now();this._lastRefresh+this._cacheDuration<n&&(this._lastRefresh=n,this.addToCache("lastRefresh",n),this._refresh())}addToCache(n,r){return this.cache.get(n).then(i=>{i?this.cache.update(n,{value:r}):this.cache.add({key:n,value:r})})}removeFromCache(n){return this.cache.get(n).then(r=>{r&&this.cache.delete(n)})}getFromCache(n){return this.cache.get(n).then(r=>r==null?void 0:r.value)}async forceRefresh(){const n=Date.now();this._lastRefresh=n,this.addToCache("lastRefresh",n),await this._refresh()}sendMessage(n){const r={command:"Response-Message",message:n};this.ctx.postMessage(r)}async _refresh(){this.ctx.postMessage(Bu);const n=new Promise(i=>Mu().then(a=>{this.transaction("rw",this.bazaars,async()=>{this.bazaars.toCollection().delete().then(()=>{this.bazaars.bulkAdd(a),i(),this.sendMessage("Bazaar data has been updated")})})})),r=xu().then(i=>this.transaction("rw",this.auctions,this.bins,async()=>{const a=i.filter(f=>!f.bin),o=i.filter(f=>f.bin),s=this._findMinPrice(a),c=this._findMinPrice(o),u=new Promise(f=>this.auctions.toCollection().delete().then(()=>{this.auctions.bulkAdd(s),f(),this.sendMessage("Auctions data has been updated")})),l=new Promise(f=>this.bins.toCollection().delete().then(()=>{this.bins.bulkAdd(c),f(),this.sendMessage("BINs data has been updated")}));return Promise.all([u,l])}));Promise.all([n,r]).then(()=>{this.sendMessage("All data has been updated"),this.ctx.postMessage(Da),this.postRefresh()}).catch(i=>{this.sendMessage(JSON.stringify({err:i,message:"An error occurred"})),this.ctx.postMessage(Da),this.postRefresh()})}_findMinPrice(n){const r=n.reduce((i,a)=>(i[a.item_name]?i[a.item_name].min>a.buyPrice&&(i[a.item_name]={item:a,min:a.buyPrice}):i[a.item_name]={item:a,min:a.buyPrice},i),{});return Object.values(r).map(i=>i.item)}async getItemPrice(n,r){if(r==="bins")return await this.bins.get(n);if(r==="auctions")return await this.auctions.get(n);if(r==="auctions+bins"){const i=await this.bins.get(n),a=await this.auctions.get(n);return i?a?(i==null?void 0:i.buyPrice)<(a==null?void 0:a.buyPrice)?i:a:i:a}return await this.bazaars.get(n)}async getItemBazaarPrice(n){return await this.bazaars.get(n)}async getItemAuctionsPrice(n){return await this.auctions.get(n)}async getItemBinsPrice(n){return await this.bins.get(n)}}const ie=self,ku=36e5;class Gu{constructor(){J(this,"database");J(this,"timersInterval");J(this,"languageKey","en-US");J(this,"withNotification",!1);this.database=new Lu(ie,()=>{}),this.database.cacheDuration=ku}async forceRefresh(){this.messageResponse("Starting forceRefresh"),await this.database.forceRefresh()}async getLanguage(){this.messageResponse("ask for language");const t=await this.database.cache.get("language");if(t){this.languageKey=t.value;const r={command:"Response-GetLanguage",language:this.languageKey};ie.postMessage(r)}const n={command:"Response-GetLanguage",language:void 0};ie.postMessage(n)}async getPrices(){const t=await this.getAllOptions(),n=await this.getCrafts();this.messageResponse("Starting getPrices"),this.getItemsWithCraftPrice({crafts:n,...t}).then(r=>{this.messageResponse("Ending getPrices");const i={command:"Response-GetPrices",results:r};ie.postMessage(i)})}async initialize(t){this.messageResponse("Initializing"),this.getOptions(),this.withNotification=t,await this.database.timers.count()!==0&&this.timersInterval===void 0&&(this.timersInterval=setInterval(()=>{this.checkTimers()},1e3)),this.getTimers(),this.getPrices()}setLanguage(t){this.database.addToCache("language",t),this.languageKey=t}async setOptions(t){const n=await this.getAllOptions(),r={};if(Object.keys(t).forEach(i=>{const a=t[i];a!==n[i]&&(this.database.addToCache(i,a),r[i]=a)}),Object.keys(r).length>0){const i={command:"Response-Options",...r};ie.postMessage(i),this.getPrices()}}async startTimer({itemId:t}){const n=vn.find(i=>i.itemId===t);if(n){this.messageResponse(`Start timer for ${JSON.stringify(n)}`);const i=await this.database.timers.count();if(i<=4){const a=Date.now(),o=a+n.time*1e3*60*60;this.database.timers.add({endTime:o,itemId:t,startTime:a})}i===0&&this.timersInterval===void 0&&(this.timersInterval=setInterval(()=>{this.checkTimers()},1e3))}else this.messageResponse(`Start timer but item not found ${t}`);this.getTimers();const r={command:"Response-TimerSet",itemId:t};ie.postMessage(r)}async stopTimer({id:t}){await this.database.timers.delete(t),await this.database.timers.count()===0&&clearInterval(this.timersInterval),this.getTimers()}getTimers(){this.database.timers.toArray().then(t=>{const n={command:"Response-Timers",timers:t};ie.postMessage(n)})}async getOptions(){const t={command:"Response-Options",...await this.getAllOptions()};ie.postMessage(t)}async getCrafts(){const{hotm:t,includeAuctionsFlip:n}=await this.getAllOptions();let r=vn;return n||(r=r.filter(i=>i.bazaarItem)),r=r.filter(i=>i.hotm<=t),r}async getAllOptions(){var t,n,r,i,a,o,s,c;return{auctionsBINOnly:(t=await this.database.getFromCache("auctionsBINOnly"))!=null?t:me.auctionsBINOnly,cacheDuration:(n=await this.database.getFromCache("cacheDuration"))!=null?n:me.cacheDuration,hotm:(r=await this.database.getFromCache("hotm"))!=null?r:me.hotm,includeAuctionsFlip:(i=await this.database.getFromCache("includeAuctionsFlip"))!=null?i:me.includeAuctionsFlip,intermediateCraft:(a=await this.database.getFromCache("intermediateCraft"))!=null?a:me.intermediateCraft,maxCraftingCost:(o=await this.database.getFromCache("maxCraftingCost"))!=null?o:me.maxCraftingCost,playFrequency:(s=await this.database.getFromCache("playFrequency"))!=null?s:me.playFrequency,quickForge:(c=await this.database.getFromCache("quickForge"))!=null?c:me.quickForge}}async checkTimers(){const t=Date.now(),n=await this.database.timers.toArray(),r=this.getLang();n.forEach(i=>{if(t>i.endTime){this.notifyMe(r.notification.timerEnded.replace("{0}",r.items[i.itemId])),this.database.timers.delete(i.id),this.getTimers();const a={command:"Response-TimerEnded",itemId:i.itemId};ie.postMessage(a)}})}notifyMe(t){this.withNotification&&Notification.permission==="granted"&&new Notification(t)}messageResponse(t){const n={command:"Response-Message",message:t};ie.postMessage(n)}async resolveItemPrices(t,n,r){var o;if(n==="bazaar"){const s=await this.database.getItemBazaarPrice(t);return s?{buy:s.buyPrice,sell:s.sellPrice}:{buy:NaN,sell:NaN}}else if(n==="vendor"){const s=(o=se[t])!=null?o:0;return{buy:s,sell:s}}const i=await this.database.getItemBinsPrice(t);if(i&&r)return{buy:i==null?void 0:i.buyPrice,sell:i==null?void 0:i.buyPrice};const a=await this.database.getItemAuctionsPrice(t);if(i||a){const s=Math.min(...[i==null?void 0:i.buyPrice,a==null?void 0:a.buyPrice].filter(c=>c));return{buy:s,sell:s}}return{buy:NaN,sell:NaN}}async resolveItemCraftPrice(t,n,r){var a;const i=vn.find(o=>o.itemId===t);if(i){let o=0;for await(const s of i.craftMaterial)if(n&&s.intermediaryCraft){const c=await this.resolveItemCraftPrice(s.itemId,n,r);o+=c*s.quantity}else if(s.source==="vendor")o+=((a=se[s.itemId])!=null?a:0)*s.quantity;else{const{buy:c}=await this.resolveItemPrices(s.itemId,s.source,r);o+=c*s.quantity}return o}return NaN}async updater(t){const{auctionsBINOnly:n,callback:r,id:i,intermediateCraft:a,isCraft:o,source:s}=t;if(o){const c=await this.resolveItemCraftPrice(i,a,n);r(c)}else{const{buy:c}=await this.resolveItemPrices(i,s,n);r(c)}}getQuickForgeBonus(t){return t>=2&&t<=10?.85:t>=11&&t<=19?.805:t===20?.7:1}async getItemsWithCraftPrice({auctionsBINOnly:t,crafts:n,intermediateCraft:r,playFrequency:i,quickForge:a}){var c,u;const o={},s=this.getQuickForgeBonus(a);for await(const l of n){const f=(c=Le[l.itemId])!=null?c:"vendor",h=l.bazaarItem?await this.database.getItemPrice(l.itemId,"bazaar"):await this.database.getItemPrice(l.itemId,"bins"),p=(u=h==null?void 0:h.sellPrice)!=null?u:0;await this.updater({auctionsBINOnly:t,id:l.itemId,intermediateCraft:r,isCraft:!0,source:f,callback:d=>{const m=p-d;let y=1;switch(i){case"everyday":y=24;break;case"three-time":y=8;break;case"twice":y=12;break}const v=l.time*s,_=m/Math.max(v,y)*y;o[l.itemId]={...l,craft:d,profit:m,profitHourly:_,sell:p,time:v}}})}return o}getLang(){switch(this.languageKey){case"fr-FR":return Oa;case"en-US":default:return Aa}}}const Ne=new Gu;ie.addEventListener("message",e=>{switch(e.data.command){case"Command-ForceRefresh":Ne.forceRefresh();break;case"Command-GetLanguage":Ne.getLanguage();break;case"Command-GetPrices":Ne.getPrices();break;case"Command-Initialize":Ne.initialize(e.data.withNotification);break;case"Command-SetLanguage":Ne.setLanguage(e.data.language);break;case"Command-SetOptions":Ne.setOptions(e.data.options);break;case"Command-StartTimer":Ne.startTimer(e.data);break;case"Command-StopTimer":Ne.stopTimer(e.data);break}})})();
