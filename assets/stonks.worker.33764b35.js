var Ti=Object.defineProperty;var Ci=(e,t,n)=>t in e?Ti(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var W=(e,t,n)=>(Ci(e,typeof t!="symbol"?t+"":t,n),n);const Di={"Amber Material":"auction","Amber-polished Drill Engine":"auction","Ammonite Pet":"auction","Beacon I":"auction","Beacon II":"auction","Beacon III":"auction","Beacon IV":"auction","Beacon V":"auction","Bejeweled Handle":"auction","Blue Cheese Goblin Omelette":"auction","Boots Of Divan":"auction","Chestplate Of Divan":"auction","Control Switch":"auction",Corleonite:"auction",DIAMONITE:"bazaar","Divan Fragment":"auction","Divan's Alloy":"auction","Divan's Drill":"auction","Drill Engine":"auction",ENCHANTED_COAL_BLOCK:"bazaar",ENCHANTED_COBBLESTONE:"bazaar",ENCHANTED_DIAMOND_BLOCK:"bazaar",ENCHANTED_ENDER_PEARL:"bazaar",ENCHANTED_GOLD:"bazaar",ENCHANTED_GOLD_BLOCK:"bazaar",ENCHANTED_IRON_BLOCK:"bazaar",ENCHANTED_MITHRIL:"bazaar",ENCHANTED_REDSTONE_BLOCK:"bazaar",ENCHANTED_TITANIUM:"bazaar","Electron Transmitter":"auction",FINE_AMBER_GEM:"bazaar",FINE_AMETHYST_GEM:"bazaar",FINE_JADE_GEM:"bazaar",FINE_RUBY_GEM:"bazaar",FINE_SAPPHIRE_GEM:"bazaar",FINE_TOPAZ_GEM:"bazaar",FLAWED_RUBY_GEM:"bazaar",FLAWLESS_AMBER_GEM:"bazaar",FLAWLESS_JASPER_GEM:"bazaar",FLAWLESS_RUBY_GEM:"bazaar",FLAWLESS_TOPAZ_GEM:"bazaar","FTX 3070":"auction","Fuel Tank":"auction",GOBLIN_EGG:"bazaar",GOBLIN_EGG_BLUE:"bazaar",GOBLIN_EGG_GREEN:"bazaar",GOBLIN_EGG_RED:"bazaar",GOBLIN_EGG_YELLOW:"bazaar","Gemstone Chamber":"auction","Gemstone Drill LT-522":"auction","Gemstone Fuel Tank":"auction","Gemstone Mixture":"auction","Glacite Jewel":"auction","Goblin Omelette":"auction","Golden Plate":"auction",HARD_STONE:"bazaar",Helix:"auction","Helmet Of Divan":"auction","Hot Stuff":"auction","Jasper Drill X":"auction","Leggings Of Divan":"auction",MITHRIL_ORE:"bazaar","Magma Core":"vendor","Mithril Drill SX-R226":"auction","Mithril Drill SX-R326":"auction","Mithril Pickaxe":"auction","Mithril Plate":"auction","Mithril-Infused Fuel Tank":"auction","Mithril-Plated Drill Engine":"auction",PERFECT_SAPPHIRE_GEM:"bazaar",PLASMA_BUCKET:"bazaar",POWER_CRYSTAL:"bazaar","Perfectly-Cut Fuel Tank":"auction","Pesto Goblin Omelette":"auction","Petrified Starfall":"auction","Pure Mithril":"auction",REFINED_DIAMOND:"bazaar",REFINED_MITHRIL:"bazaar",REFINED_TITANIUM:"bazaar",ROUGH_AMBER_GEM:"bazaar","Refined Mithril Pickaxe":"auction","Robotron Reflector":"auction","Rock Gemstone":"auction","Ruby Drill TX-15":"auction","Ruby-polished Drill Engine":"auction",SLUDGE_JUICE:"bazaar",STARFALL:"bazaar","Sapphire-polished Drill Engine":"auction","Spicy Goblin Omelette":"auction","Sunny Side Goblin Omelette":"auction","Superlite Motor":"auction","Synthetic Heart":"auction",TITANIUM_ORE:"bazaar",TREASURITE:"bazaar","Titanium Artifact":"auction","Titanium Drill DR-X355":"auction","Titanium Drill DR-X455":"auction","Titanium Drill DR-X555":"auction","Titanium Drill DR-X655":"auction","Titanium Relic":"auction","Titanium Ring":"auction","Titanium Talisman":"auction","Titanium-Infused Fuel Tank":"auction","Titanium-Plated Drill Engine":"auction","Topaz Drill KGR-12":"auction","Travel Scroll to the Crystal Hollows":"auction","Travel Scroll to the Dwarven Forge":"auction",WORM_MEMBRANE:"bazaar",coins:"vendor"},er={"Magma Core":0,coins:1},Ri=[{bazaarItem:!0,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_DIAMOND_BLOCK",quantity:2,source:"bazaar"}],hotm:2,itemId:"REFINED_DIAMOND",time:8},{bazaarItem:!0,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_MITHRIL",quantity:160,source:"bazaar"}],hotm:2,itemId:"REFINED_MITHRIL",time:6},{bazaarItem:!0,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_TITANIUM",quantity:16,source:"bazaar"}],hotm:2,itemId:"REFINED_TITANIUM",time:12},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_COAL_BLOCK",quantity:2,source:"bazaar"}],hotm:2,itemId:"Fuel Tank",time:10},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Glacite Jewel",quantity:3,source:"auction"}],hotm:2,itemId:"Bejeweled Handle",time:.5},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_IRON_BLOCK",quantity:1,source:"bazaar"},{intermediaryCraft:!1,itemId:"ENCHANTED_REDSTONE_BLOCK",quantity:3,source:"bazaar"},{intermediaryCraft:!0,itemId:"Golden Plate",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"TREASURITE",quantity:10,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:1,source:"bazaar"}],hotm:4,itemId:"Drill Engine",time:30},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_GOLD_BLOCK",quantity:2,source:"bazaar"},{intermediaryCraft:!1,itemId:"Glacite Jewel",quantity:5,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:1,source:"bazaar"}],hotm:3,itemId:"Golden Plate",time:6},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:5,source:"bazaar"},{intermediaryCraft:!0,itemId:"Golden Plate",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"ENCHANTED_IRON_BLOCK",quantity:1,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:1,source:"bazaar"}],hotm:3,itemId:"Mithril Plate",time:18},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"FINE_JADE_GEM",quantity:4,source:"bazaar"},{intermediaryCraft:!1,itemId:"FINE_AMBER_GEM",quantity:4,source:"bazaar"},{intermediaryCraft:!1,itemId:"FINE_AMETHYST_GEM",quantity:4,source:"bazaar"},{intermediaryCraft:!1,itemId:"FINE_SAPPHIRE_GEM",quantity:4,source:"bazaar"},{intermediaryCraft:!1,itemId:"SLUDGE_JUICE",quantity:320,source:"bazaar"}],hotm:3,itemId:"Gemstone Mixture",time:4}],Ai=[{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_MITHRIL",quantity:30,source:"bazaar"},{intermediaryCraft:!0,itemId:"Bejeweled Handle",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"ENCHANTED_GOLD",quantity:10,source:"bazaar"}],hotm:2,itemId:"Mithril Pickaxe",time:.75},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Beacon I",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:5,source:"bazaar"}],hotm:2,itemId:"Beacon II",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:2,source:"bazaar"}],hotm:2,itemId:"Titanium Talisman",time:14},{bazaarItem:!0,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:3,source:"bazaar"}],hotm:2,itemId:"DIAMONITE",time:6},{bazaarItem:!0,craftMaterial:[{intermediaryCraft:!1,itemId:"STARFALL",quantity:256,source:"bazaar"}],hotm:2,itemId:"POWER_CRYSTAL",time:2},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"MITHRIL_ORE",quantity:48,source:"bazaar"},{intermediaryCraft:!1,itemId:"TITANIUM_ORE",quantity:80,source:"bazaar"},{intermediaryCraft:!1,itemId:"ENCHANTED_ENDER_PEARL",quantity:16,source:"bazaar"},{intermediaryCraft:!1,itemId:"coins",quantity:25e3,source:"vendor"}],hotm:2,itemId:"Travel Scroll to the Dwarven Forge",time:5},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:3,source:"bazaar"},{intermediaryCraft:!0,itemId:"Bejeweled Handle",quantity:2,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:1,source:"bazaar"},{intermediaryCraft:!1,itemId:"ENCHANTED_GOLD",quantity:30,source:"bazaar"}],hotm:3,itemId:"Refined Mithril Pickaxe",time:22},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:3,source:"bazaar"},{intermediaryCraft:!0,itemId:"Fuel Tank",quantity:1,source:"auction"}],hotm:3,itemId:"Mithril Drill SX-R226",time:4},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:3,source:"auction"},{intermediaryCraft:!0,itemId:"Fuel Tank",quantity:5,source:"auction"}],hotm:3,itemId:"Mithril-Infused Fuel Tank",time:10},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Drill Engine",quantity:2,source:"auction"},{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:3,source:"auction"}],hotm:3,itemId:"Mithril-Plated Drill Engine",time:15},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Beacon II",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:10,source:"bazaar"}],hotm:3,itemId:"Beacon III",time:30},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:6,source:"bazaar"},{intermediaryCraft:!0,itemId:"Titanium Talisman",quantity:1,source:"auction"}],hotm:3,itemId:"Titanium Ring",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:2,source:"bazaar"}],hotm:3,itemId:"Pure Mithril",time:12},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"ENCHANTED_COBBLESTONE",quantity:128,source:"bazaar"},{intermediaryCraft:!1,itemId:"TREASURITE",quantity:64,source:"bazaar"}],hotm:3,itemId:"Rock Gemstone",time:22},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"STARFALL",quantity:512,source:"bazaar"}],hotm:3,itemId:"Petrified Starfall",time:14},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"GOBLIN_EGG_GREEN",quantity:99,source:"bazaar"},{intermediaryCraft:!1,itemId:"FINE_JADE_GEM",quantity:1,source:"bazaar"}],hotm:4,itemId:"Pesto Goblin Omelette",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Helix",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"coins",quantity:3e5,source:"vendor"}],hotm:3,itemId:"Ammonite Pet",time:288},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Fuel Tank",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"FINE_RUBY_GEM",quantity:6,source:"bazaar"}],hotm:3,itemId:"Ruby Drill TX-15",time:1},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"FLAWED_RUBY_GEM",quantity:48,source:"bazaar"},{intermediaryCraft:!1,itemId:"FINE_RUBY_GEM",quantity:80,source:"bazaar"},{intermediaryCraft:!1,itemId:"ENCHANTED_ENDER_PEARL",quantity:16,source:"bazaar"},{intermediaryCraft:!1,itemId:"coins",quantity:5e4,source:"vendor"}],hotm:3,itemId:"Travel Scroll to the Crystal Hollows",time:10},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Mithril Drill SX-R226",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Golden Plate",quantity:10,source:"auction"},{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:2,source:"auction"}],hotm:4,itemId:"Mithril Drill SX-R326",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Drill Engine",quantity:10,source:"auction"},{intermediaryCraft:!1,itemId:"PLASMA_BUCKET",quantity:5,source:"bazaar"},{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:4,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:5,source:"bazaar"}],hotm:4,itemId:"Titanium-Plated Drill Engine",time:30},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"GOBLIN_EGG",quantity:99,source:"bazaar"}],hotm:4,itemId:"Goblin Omelette",time:18},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Beacon III",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:20,source:"bazaar"},{intermediaryCraft:!1,itemId:"PLASMA_BUCKET",quantity:1,source:"bazaar"}],hotm:4,itemId:"Beacon IV",time:40},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:12,source:"bazaar"},{intermediaryCraft:!0,itemId:"Titanium Ring",quantity:1,source:"auction"}],hotm:4,itemId:"Titanium Artifact",time:36},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"HARD_STONE",quantity:128,source:"bazaar"},{intermediaryCraft:!1,itemId:"ROUGH_AMBER_GEM",quantity:64,source:"bazaar"}],hotm:4,itemId:"Hot Stuff",time:24},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"GOBLIN_EGG_YELLOW",quantity:99,source:"bazaar"},{intermediaryCraft:!1,itemId:"FINE_TOPAZ_GEM",quantity:1,source:"bazaar"}],hotm:6,itemId:"Sunny Side Goblin Omelette",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Ruby Drill TX-15",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:3,source:"auction"}],hotm:4,itemId:"Gemstone Drill LT-522",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Fuel Tank",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Golden Plate",quantity:6,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:10,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:10,source:"bazaar"}],hotm:5,itemId:"Titanium Drill DR-X355",time:64},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Titanium Drill DR-X355",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:10,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:16,source:"bazaar"},{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:6,source:"auction"}],hotm:5,itemId:"Titanium Drill DR-X455",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Titanium Drill DR-X455",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:20,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:32,source:"bazaar"},{intermediaryCraft:!1,itemId:"ENCHANTED_IRON_BLOCK",quantity:2,source:"bazaar"},{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:15,source:"auction"},{intermediaryCraft:!1,itemId:"PLASMA_BUCKET",quantity:20,source:"bazaar"}],hotm:5,itemId:"Titanium Drill DR-X555",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:10,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:10,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:10,source:"bazaar"},{intermediaryCraft:!0,itemId:"Fuel Tank",quantity:10,source:"auction"}],hotm:5,itemId:"Titanium-Infused Fuel Tank",time:25},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Beacon IV",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_MITHRIL",quantity:40,source:"bazaar"},{intermediaryCraft:!1,itemId:"PLASMA_BUCKET",quantity:5,source:"bazaar"}],hotm:5,itemId:"Beacon V",time:50},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:20,source:"bazaar"},{intermediaryCraft:!0,itemId:"Titanium Artifact",quantity:1,source:"auction"}],hotm:5,itemId:"Titanium Relic",time:72},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"GOBLIN_EGG_RED",quantity:99,source:"bazaar"},{intermediaryCraft:!1,itemId:"FLAWLESS_RUBY_GEM",quantity:1,source:"bazaar"}],hotm:5,itemId:"Spicy Goblin Omelette",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"WORM_MEMBRANE",quantity:100,source:"bazaar"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"coins",quantity:25e3,source:"vendor"}],hotm:5,itemId:"Gemstone Chamber",time:4},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Gemstone Drill LT-522",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_TOPAZ_GEM",quantity:1,source:"bazaar"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:3,source:"auction"},{intermediaryCraft:!1,itemId:"Magma Core",quantity:5,source:"auction"}],hotm:5,itemId:"Topaz Drill KGR-12",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Mithril-Plated Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"Superlite Motor",quantity:10,source:"auction"},{intermediaryCraft:!1,itemId:"FINE_RUBY_GEM",quantity:10,source:"bazaar"}],hotm:5,itemId:"Ruby-polished Drill Engine",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Titanium-Infused Fuel Tank",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"Control Switch",quantity:30,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:10,source:"auction"}],hotm:5,itemId:"Gemstone Fuel Tank",time:30},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"PERFECT_SAPPHIRE_GEM",quantity:1,source:"bazaar"},{intermediaryCraft:!1,itemId:"GOBLIN_EGG_BLUE",quantity:99,source:"bazaar"}],hotm:6,itemId:"Blue Cheese Goblin Omelette",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Titanium Drill DR-X555",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"Corleonite",quantity:30,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_RUBY_GEM",quantity:1,source:"bazaar"},{intermediaryCraft:!0,itemId:"REFINED_DIAMOND",quantity:5,source:"bazaar"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:16,source:"auction"},{intermediaryCraft:!0,itemId:"REFINED_TITANIUM",quantity:12,source:"bazaar"},{intermediaryCraft:!0,itemId:"Mithril Plate",quantity:5,source:"auction"}],hotm:6,itemId:"Titanium Drill DR-X655",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Topaz Drill KGR-12",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_JASPER_GEM",quantity:1,source:"bazaar"},{intermediaryCraft:!1,itemId:"TREASURITE",quantity:100,source:"bazaar"}],hotm:6,itemId:"Jasper Drill X",time:.008333333333333333},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Titanium-Plated Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"Electron Transmitter",quantity:25,source:"auction"},{intermediaryCraft:!1,itemId:"FTX 3070",quantity:25,source:"auction"},{intermediaryCraft:!1,itemId:"FINE_SAPPHIRE_GEM",quantity:20,source:"bazaar"}],hotm:6,itemId:"Sapphire-polished Drill Engine",time:20},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"FINE_AMBER_GEM",quantity:12,source:"bazaar"},{intermediaryCraft:!0,itemId:"Golden Plate",quantity:1,source:"auction"}],hotm:6,itemId:"Amber Material",time:7},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Divan Fragment",quantity:5,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:10,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_RUBY_GEM",quantity:1,source:"bazaar"}],hotm:6,itemId:"Helmet Of Divan",time:23},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Divan Fragment",quantity:8,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:10,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_RUBY_GEM",quantity:1,source:"bazaar"}],hotm:6,itemId:"Chestplate Of Divan",time:23},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Divan Fragment",quantity:7,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:10,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_RUBY_GEM",quantity:1,source:"bazaar"}],hotm:6,itemId:"Leggings Of Divan",time:23},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Divan Fragment",quantity:4,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:10,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_RUBY_GEM",quantity:1,source:"bazaar"}],hotm:6,itemId:"Boots Of Divan",time:23},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Ruby-polished Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Sapphire-polished Drill Engine",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"FLAWLESS_AMBER_GEM",quantity:1,source:"bazaar"},{intermediaryCraft:!1,itemId:"Robotron Reflector",quantity:50,source:"auction"}],hotm:7,itemId:"Amber-polished Drill Engine",time:50},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!0,itemId:"Gemstone Fuel Tank",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Gemstone Mixture",quantity:25,source:"auction"},{intermediaryCraft:!1,itemId:"Synthetic Heart",quantity:70,source:"auction"}],hotm:7,itemId:"Perfectly-Cut Fuel Tank",time:50},{bazaarItem:!1,craftMaterial:[{intermediaryCraft:!1,itemId:"Divan's Alloy",quantity:1,source:"auction"},{intermediaryCraft:!0,itemId:"Titanium Drill DR-X655",quantity:1,source:"auction"},{intermediaryCraft:!1,itemId:"coins",quantity:5e7,source:"vendor"}],hotm:7,itemId:"Divan's Drill",time:60}],Xt=[...Ri.map((e,t)=>({...e,category:"refine",id:t*10})),...Ai.map((e,t)=>({...e,category:"casting",id:t*10+1}))],Si={items:{"Amber Material":"Amber Material","Amber-polished Drill Engine":"Amber-polished Drill Engine","Ammonite Pet":"Ammonite Pet","Beacon I":"Beacon I","Beacon II":"Beacon II","Beacon III":"Beacon III","Beacon IV":"Beacon IV","Beacon V":"Beacon V","Bejeweled Handle":"Bejeweled Handle","Blue Cheese Goblin Omelette":"Blue Cheese Goblin Omelette","Boots Of Divan":"Boots Of Divan","Chestplate Of Divan":"Chestplate Of Divan","Control Switch":"Control Switch",Corleonite:"Corleonite",DIAMONITE:"Diamonite","Divan Fragment":"Divan Fragment","Divan's Alloy":"Divan's Alloy","Divan's Drill":"Divan's Drill","Drill Engine":"Drill Engine",ENCHANTED_COAL_BLOCK:"Enchanted Block of Coal",ENCHANTED_COBBLESTONE:"Enchanted Cobblestone",ENCHANTED_DIAMOND_BLOCK:"Enchanted Diamond Block",ENCHANTED_ENDER_PEARL:"Enchanted Ender Pearl",ENCHANTED_GOLD:"Enchanted Gold",ENCHANTED_GOLD_BLOCK:"Enchanted Gold Block",ENCHANTED_IRON_BLOCK:"Enchanted Iron Block",ENCHANTED_MITHRIL:"Enchanted Mithril",ENCHANTED_REDSTONE_BLOCK:"Enchanted Redstone Block",ENCHANTED_TITANIUM:"Enchanted Titanium","Electron Transmitter":"Electron Transmitter",FINE_AMBER_GEM:"Fine Amber Gemstone",FINE_AMETHYST_GEM:"Fine Amethyst Gemstone",FINE_JADE_GEM:"Fine Jade Gemstone",FINE_RUBY_GEM:"Fine Ruby Gemstone",FINE_SAPPHIRE_GEM:"Fine Sapphire Gemstone",FINE_TOPAZ_GEM:"Fine Topaz Gemstone",FLAWED_RUBY_GEM:"Flawed Ruby Gemstone",FLAWLESS_AMBER_GEM:"Flawless Amber Gemstone",FLAWLESS_JASPER_GEM:"Flawless Jasper Gemstone",FLAWLESS_RUBY_GEM:"Flawless Ruby Gemstone",FLAWLESS_TOPAZ_GEM:"Flawless Topaz Gemstone","FTX 3070":"FTX 3070","Fuel Tank":"Fuel Tank",GOBLIN_EGG:"Goblin Egg",GOBLIN_EGG_BLUE:"Blue Goblin Egg",GOBLIN_EGG_GREEN:"Green Goblin Egg",GOBLIN_EGG_RED:"Red Goblin Egg",GOBLIN_EGG_YELLOW:"Yellow Goblin Egg","Gemstone Chamber":"Gemstone Chamber","Gemstone Drill LT-522":"Gemstone Drill LT-522","Gemstone Fuel Tank":"Gemstone Fuel Tank","Gemstone Mixture":"Gemstone Mixture","Glacite Jewel":"Glacite Jewel","Goblin Omelette":"Goblin Omelette","Golden Plate":"Golden Plate",HARD_STONE:"Hard Stone",Helix:"Helix","Helmet Of Divan":"Helmet Of Divan","Hot Stuff":"Hot Stuff","Jasper Drill X":"Jasper Drill X","Leggings Of Divan":"Leggings Of Divan",MITHRIL_ORE:"Mithril","Magma Core":"Magma Core","Mithril Drill SX-R226":"Mithril Drill SX-R226","Mithril Drill SX-R326":"Mithril Drill SX-R326","Mithril Pickaxe":"Mithril Pickaxe","Mithril Plate":"Mithril Plate","Mithril-Infused Fuel Tank":"Mithril-Infused Fuel Tank","Mithril-Plated Drill Engine":"Mithril-Plated Drill Engine",PERFECT_SAPPHIRE_GEM:"Perfect Sapphire Gemstone",PLASMA_BUCKET:"Plasma",POWER_CRYSTAL:"Power Crystal","Perfectly-Cut Fuel Tank":"Perfectly-Cut Fuel Tank","Pesto Goblin Omelette":"Pesto Goblin Omelette","Petrified Starfall":"Petrified Starfall","Pure Mithril":"Pure Mithril",REFINED_DIAMOND:"Refined Diamond",REFINED_MITHRIL:"Refined Mithril",REFINED_TITANIUM:"Refined Titanium",ROUGH_AMBER_GEM:"Rough Amber Gemstone","Refined Mithril Pickaxe":"Refined Mithril Pickaxe","Robotron Reflector":"Robotron Reflector","Rock Gemstone":"Rock Gemstone","Ruby Drill TX-15":"Ruby Drill TX-15","Ruby-polished Drill Engine":"Ruby-polished Drill Engine",SLUDGE_JUICE:"Sludge Juice",STARFALL:"Starfall","Sapphire-polished Drill Engine":"Sapphire-polished Drill Engine","Spicy Goblin Omelette":"Spicy Goblin Omelette","Sunny Side Goblin Omelette":"Sunny Side Goblin Omelette","Superlite Motor":"Superlite Motor","Synthetic Heart":"Synthetic Heart",TITANIUM_ORE:"Titanium",TREASURITE:"Treasurite","Titanium Artifact":"Titanium Artifact","Titanium Drill DR-X355":"Titanium Drill DR-X355","Titanium Drill DR-X455":"Titanium Drill DR-X455","Titanium Drill DR-X555":"Titanium Drill DR-X555","Titanium Drill DR-X655":"Titanium Drill DR-X655","Titanium Relic":"Titanium Relic","Titanium Ring":"Titanium Ring","Titanium Talisman":"Titanium Talisman","Titanium-Infused Fuel Tank":"Titanium-Infused Fuel Tank","Titanium-Plated Drill Engine":"Titanium-Plated Drill Engine","Topaz Drill KGR-12":"Topaz Drill KGR-12","Travel Scroll to the Crystal Hollows":"Travel Scroll to the Crystal Hollows","Travel Scroll to the Dwarven Forge":"Travel Scroll to the Dwarven Forge",WORM_MEMBRANE:"Worm Membrane",coins:"Coins"},notification:{timerEnded:"Your {0} timer has ended",timerStarted:"Starting timer for {0}"},ui:{amount:"Amount",auction:"Auction",bazaar:"Bazaar",casting:"Casting",craftCost:"Crafting cost",filters:"Filters",hotm:"HOTM",hour:"H",item:"Item",itemPrice:"Item price",options:{auctionsBINOnlyDescription:"Use BINs Auctions only for material.",auctionsBINOnlyLabel:"BINs material",forceRefresh:"Force refresh",hotmDescription:"Set your HOTM level.",hotmLabel:"HOTM Level",includeAuctionsFlipDescription:"Include Auctions-only craft.",includeAuctionsFlipLabel:"Auctions Craft",intermediateCraftDescription:"Craft intermediary material instead of buying-it.",intermediateCraftLabel:"Intermediary Craft",languageDescription:"Only the interface is translated, the item names are in english.",languageLabel:"Language",languageOptionEnglish:"English",languageOptionFrench:"French",maxCraftingCostDescription:"Limit to max crafting cost. Set to 0 to disable",maxCraftingCostLabel:"Max crafting cost",playFrequencyDescription:"Adjust your play-frequency to profit calculation.",playFrequencyLabel:"Play frequency",playFrequencyOptionEveryday:"Once every day",playFrequencyOptionLess:"Occasionally",playFrequencyOptionNonStop:"Non-stop",playFrequencyOptionThreeTime:"Three-time per days",playFrequencyOptionTwice:"Twice a day",quickForgeDescription:"Quick Forge perks level. Current bonus",quickForgeLabel:"Quick Forge",title:"Options"},profit:"Profit",profitByTimeEveryday:"Profit per day",profitByTimeNonStop:"Profit per hour",profitByTimeThreeTime:"Profits for 8h",profitByTimeTwice:"Profits for 12h",refine:"Refine",sell:"Sell",sellPrice:"Sell price",shoppingList:"Shopping list",time:"Duration",timer:"Timer",timerButton:"Start timer",title:"HyPixel Skyblock's Forge Stonks",totalPrice:"Total price",type:"Type",vendor:"Vendor"}},Mi={items:{"Amber Material":"Amber Material","Amber-polished Drill Engine":"Amber-polished Drill Engine","Ammonite Pet":"Ammonite Pet","Beacon I":"Beacon I","Beacon II":"Beacon II","Beacon III":"Beacon III","Beacon IV":"Beacon IV","Beacon V":"Beacon V","Bejeweled Handle":"Bejeweled Handle","Blue Cheese Goblin Omelette":"Blue Cheese Goblin Omelette","Boots Of Divan":"Boots Of Divan","Chestplate Of Divan":"Chestplate Of Divan","Control Switch":"Control Switch",Corleonite:"Corleonite",DIAMONITE:"Diamonite","Divan Fragment":"Divan Fragment","Divan's Alloy":"Divan's Alloy","Divan's Drill":"Divan's Drill","Drill Engine":"Drill Engine",ENCHANTED_COAL_BLOCK:"Enchanted Block of Coal",ENCHANTED_COBBLESTONE:"Enchanted Cobblestone",ENCHANTED_DIAMOND_BLOCK:"Enchanted Diamond Block",ENCHANTED_ENDER_PEARL:"Enchanted Ender Pearl",ENCHANTED_GOLD:"Enchanted Gold",ENCHANTED_GOLD_BLOCK:"Enchanted Gold Block",ENCHANTED_IRON_BLOCK:"Enchanted Iron Block",ENCHANTED_MITHRIL:"Enchanted Mithril",ENCHANTED_REDSTONE_BLOCK:"Enchanted Redstone Block",ENCHANTED_TITANIUM:"Enchanted Titanium","Electron Transmitter":"Electron Transmitter",FINE_AMBER_GEM:"Fine Amber Gemstone",FINE_AMETHYST_GEM:"Fine Amethyst Gemstone",FINE_JADE_GEM:"Fine Jade Gemstone",FINE_RUBY_GEM:"Fine Ruby Gemstone",FINE_SAPPHIRE_GEM:"Fine Sapphire Gemstone",FINE_TOPAZ_GEM:"Fine Topaz Gemstone",FLAWED_RUBY_GEM:"Flawed Ruby Gemstone",FLAWLESS_AMBER_GEM:"Flawless Amber Gemstone",FLAWLESS_JASPER_GEM:"Flawless Jasper Gemstone",FLAWLESS_RUBY_GEM:"Flawless Ruby Gemstone",FLAWLESS_TOPAZ_GEM:"Flawless Topaz Gemstone","FTX 3070":"FTX 3070","Fuel Tank":"Fuel Tank",GOBLIN_EGG:"Goblin Egg",GOBLIN_EGG_BLUE:"Blue Goblin Egg",GOBLIN_EGG_GREEN:"Green Goblin Egg",GOBLIN_EGG_RED:"Red Goblin Egg",GOBLIN_EGG_YELLOW:"Yellow Goblin Egg","Gemstone Chamber":"Gemstone Chamber","Gemstone Drill LT-522":"Gemstone Drill LT-522","Gemstone Fuel Tank":"Gemstone Fuel Tank","Gemstone Mixture":"Gemstone Mixture","Glacite Jewel":"Glacite Jewel","Goblin Omelette":"Goblin Omelette","Golden Plate":"Golden Plate",HARD_STONE:"Hard Stone",Helix:"Helix","Helmet Of Divan":"Helmet Of Divan","Hot Stuff":"Hot Stuff","Jasper Drill X":"Jasper Drill X","Leggings Of Divan":"Leggings Of Divan",MITHRIL_ORE:"Mithril","Magma Core":"Magma Core","Mithril Drill SX-R226":"Mithril Drill SX-R226","Mithril Drill SX-R326":"Mithril Drill SX-R326","Mithril Pickaxe":"Mithril Pickaxe","Mithril Plate":"Mithril Plate","Mithril-Infused Fuel Tank":"Mithril-Infused Fuel Tank","Mithril-Plated Drill Engine":"Mithril-Plated Drill Engine",PERFECT_SAPPHIRE_GEM:"Perfect Sapphire Gemstone",PLASMA_BUCKET:"Plasma",POWER_CRYSTAL:"Power Crystal","Perfectly-Cut Fuel Tank":"Perfectly-Cut Fuel Tank","Pesto Goblin Omelette":"Pesto Goblin Omelette","Petrified Starfall":"Petrified Starfall","Pure Mithril":"Pure Mithril",REFINED_DIAMOND:"Refined Diamond",REFINED_MITHRIL:"Refined Mithril",REFINED_TITANIUM:"Refined Titanium",ROUGH_AMBER_GEM:"Rough Amber Gemstone","Refined Mithril Pickaxe":"Refined Mithril Pickaxe","Robotron Reflector":"Robotron Reflector","Rock Gemstone":"Rock Gemstone","Ruby Drill TX-15":"Ruby Drill TX-15","Ruby-polished Drill Engine":"Ruby-polished Drill Engine",SLUDGE_JUICE:"Sludge Juice",STARFALL:"Starfall","Sapphire-polished Drill Engine":"Sapphire-polished Drill Engine","Spicy Goblin Omelette":"Spicy Goblin Omelette","Sunny Side Goblin Omelette":"Sunny Side Goblin Omelette","Superlite Motor":"Superlite Motor","Synthetic Heart":"Synthetic Heart",TITANIUM_ORE:"Titanium",TREASURITE:"Treasurite","Titanium Artifact":"Titanium Artifact","Titanium Drill DR-X355":"Titanium Drill DR-X355","Titanium Drill DR-X455":"Titanium Drill DR-X455","Titanium Drill DR-X555":"Titanium Drill DR-X555","Titanium Drill DR-X655":"Titanium Drill DR-X655","Titanium Relic":"Titanium Relic","Titanium Ring":"Titanium Ring","Titanium Talisman":"Titanium Talisman","Titanium-Infused Fuel Tank":"Titanium-Infused Fuel Tank","Titanium-Plated Drill Engine":"Titanium-Plated Drill Engine","Topaz Drill KGR-12":"Topaz Drill KGR-12","Travel Scroll to the Crystal Hollows":"Travel Scroll to the Crystal Hollows","Travel Scroll to the Dwarven Forge":"Travel Scroll to the Dwarven Forge",WORM_MEMBRANE:"Worm Membrane",coins:"Pi\xE8ces"},notification:{timerEnded:"Votre chrono pour {0} s'est termin\xE9",timerStarted:"D\xE9marrage du chrono pour {0}"},ui:{amount:"Quantit\xE9",auction:"Actions",bazaar:"Bazaar",casting:"Moulage",craftCost:"Co\xFBt de fabrication",filters:"Filtres",hotm:"HOTM",hour:"H",item:"Objet",itemPrice:"Prix de l'objet",options:{auctionsBINOnlyDescription:"Utiliser uniquement les ressources en BIN",auctionsBINOnlyLabel:"Ressources en BIN",forceRefresh:"Rafraichissement",hotmDescription:"Indiquez votre niveau d'HOTM",hotmLabel:"Niveau d'HOTM",includeAuctionsFlipDescription:"Include les craft vendus uniquement en actions",includeAuctionsFlipLabel:"Craft d'actions",intermediateCraftDescription:"Crafter les objets interm\xE9diaire",intermediateCraftLabel:"Crafts interm\xE9diaires",languageDescription:"Traduction uniquement de l'interface, les objets restent en anglais",languageLabel:"Langue",languageOptionEnglish:"Anglais",languageOptionFrench:"Baguette",maxCraftingCostDescription:"Limiter les co\xFBts des crafts. Mettre \xE0 0 pour d\xE9sactiver",maxCraftingCostLabel:"Co\xFBt maximum des crafts",playFrequencyDescription:"Ajustez votre fr\xE9quence de jeu pour le calcule des b\xE9n\xE9fices",playFrequencyLabel:"Fr\xE9quence de jeu",playFrequencyOptionEveryday:"Une fois par jour",playFrequencyOptionLess:"Joueur occasionnel",playFrequencyOptionNonStop:"Team Ch\xF4mage",playFrequencyOptionThreeTime:"3x par jour",playFrequencyOptionTwice:"2x par jour",quickForgeDescription:"Niveau d'am\xE9lioration de Quick Forge. Bonus actuel",quickForgeLabel:"Quick Forge",title:"Options"},profit:"B\xE9n\xE9fices",profitByTimeEveryday:"B\xE9n\xE9fices par jour",profitByTimeNonStop:"B\xE9n\xE9fices par heure",profitByTimeThreeTime:"B\xE9n\xE9fices pour 8h",profitByTimeTwice:"B\xE9n\xE9fices pour 12h",refine:"Affinage",sell:"Vente",sellPrice:"Prix de vente",shoppingList:"Liste d'achat",time:"Dur\xE9e",timer:"Chrono",timerButton:"Lancer le chrono",title:"HyPixel Skyblock's Forge Stonks",totalPrice:"Prix total",type:"Type",vendor:"Vendeur"}},be={auctionsBINOnly:!0,cacheDuration:60,hotm:2,includeAuctionsFlip:!0,intermediateCraft:!1,maxCraftingCost:0,playFrequency:"nonstop",quickForge:0};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var P=function(){return P=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},P.apply(this,arguments)};function rn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var k=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,z=Object.keys,U=Array.isArray;typeof Promise<"u"&&!k.Promise&&(k.Promise=Promise);function V(e,t){return typeof t!="object"||z(t).forEach(function(n){e[n]=t[n]}),e}var tt=Object.getPrototypeOf,Oi={}.hasOwnProperty;function Y(e,t){return Oi.call(e,t)}function ze(e,t){typeof t=="function"&&(t=t(tt(e))),(typeof Reflect>"u"?z:Reflect.ownKeys)(t).forEach(function(n){me(e,n,t[n])})}var Ar=Object.defineProperty;function me(e,t,n,r){Ar(e,t,V(n&&Y(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function qe(e){return{from:function(t){return e.prototype=Object.create(t.prototype),me(e.prototype,"constructor",e),{extend:ze.bind(null,e.prototype)}}}}var Pi=Object.getOwnPropertyDescriptor;function Pn(e,t){var n=Pi(e,t),r;return n||(r=tt(e))&&Pn(r,t)}var Ni=[].slice;function zt(e,t,n){return Ni.call(e,t,n)}function Sr(e,t){return t(e)}function Je(e){if(!e)throw new Error("Assertion Failed")}function Mr(e){k.setImmediate?setImmediate(e):setTimeout(e,0)}function Or(e,t){return e.reduce(function(n,r,i){var a=t(r,i);return a&&(n[a[0]]=a[1]),n},{})}function Fi(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function de(e,t){if(Y(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=de(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(o!==-1){var s=e[t.substr(0,o)];return s===void 0?void 0:de(s,t.substr(o+1))}}function re(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Je(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)re(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var o=t.substr(0,a),s=t.substr(a+1);if(s==="")n===void 0?U(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var u=e[o];(!u||!Y(e,o))&&(u=e[o]={}),re(u,s,n)}}else n===void 0?U(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function xi(e,t){typeof t=="string"?re(e,t,void 0):"length"in t&&[].map.call(t,function(n){re(e,n,void 0)})}function Pr(e){var t={};for(var n in e)Y(e,n)&&(t[n]=e[n]);return t}var Bi=[].concat;function Nr(e){return Bi.apply([],e)}var Fr="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Nr([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return k[e]}),Li=Fr.map(function(e){return k[e]});Or(Fr,function(e){return[e,!0]});var we=null;function lt(e){we=typeof WeakMap<"u"&&new WeakMap;var t=an(e);return we=null,t}function an(e){if(!e||typeof e!="object")return e;var t=we&&we.get(e);if(t)return t;if(U(e)){t=[],we&&we.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(an(e[n]))}else if(Li.indexOf(e.constructor)>=0)t=e;else{var i=tt(e);t=i===Object.prototype?{}:Object.create(i),we&&we.set(e,t);for(var a in e)Y(e,a)&&(t[a]=an(e[a]))}return t}var ki={}.toString;function on(e){return ki.call(e).slice(8,-1)}var sn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Gi=typeof sn=="symbol"?function(e){var t;return e!=null&&(t=e[sn])&&t.apply(e)}:function(){return null},ke={};function ce(e){var t,n,r,i;if(arguments.length===1){if(U(e))return e.slice();if(this===ke&&typeof e=="string")return[e];if(i=Gi(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Nn=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},se=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function xr(e,t){se=e,Br=t}var Br=function(){return!0},zi=!new Error("").stack;function xe(){if(zi)try{throw xe.arguments,new Error}catch(e){return e}return new Error}function un(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Br).map(function(r){return`
`+r}).join("")):""}var qi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Lr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Fn=qi.concat(Lr),Ki={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ke(e,t){this._e=xe(),this.name=e,this.message=t}qe(Ke).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+un(this._e,2))}},toString:function(){return this.name+": "+this.message}});function kr(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Ot(e,t,n,r){this._e=xe(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=kr(e,t)}qe(Ot).from(Ke);function Qe(e,t){this._e=xe(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=kr(e,t)}qe(Qe).from(Ke);var xn=Fn.reduce(function(e,t){return e[t]=t+"Error",e},{}),Hi=Ke,S=Fn.reduce(function(e,t){var n=t+"Error";function r(i,a){this._e=xe(),this.name=n,i?typeof i=="string"?(this.message=""+i+(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=Ki[t]||n,this.inner=null)}return qe(r).from(Hi),e[t]=r,e},{});S.Syntax=SyntaxError;S.Type=TypeError;S.Range=RangeError;var tr=Lr.reduce(function(e,t){return e[t+"Error"]=S[t],e},{});function Ui(e,t){if(!e||e instanceof Ke||e instanceof TypeError||e instanceof SyntaxError||!e.name||!tr[e.name])return e;var n=new tr[e.name](t||e.message,e);return"stack"in e&&me(n,"stack",{get:function(){return this.inner.stack}}),n}var qt=Fn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=S[t]),e},{});qt.ModifyError=Ot;qt.DexieError=Ke;qt.BulkError=Qe;function L(){}function ct(e){return e}function ji(e,t){return e==null||e===ct?t:function(n){return t(e(n))}}function Ne(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Wi(e,t){return e===L?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ne(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ne(i,this.onerror):i),a!==void 0?a:n}}function Xi(e,t){return e===L?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ne(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ne(r,this.onerror):r)}}function Vi(e,t){return e===L?t:function(n){var r=e.apply(this,arguments);V(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ne(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Ne(a,this.onerror):a),r===void 0?o===void 0?void 0:o:V(r,o)}}function Ji(e,t){return e===L?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Bn(e,t){return e===L?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var nt={},Yi=100,$i=20,Gr=100,Ln=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,tt(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,tt(t),e]}(),ln=Ln[0],Pt=Ln[1],cn=Ln[2],zr=Pt&&Pt.then,wt=ln&&ln.constructor,kn=!!cn,fn=!1,Qi=cn?function(){cn.then(gt)}:k.setImmediate?setImmediate.bind(null,gt):k.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){gt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(gt,0)},rt=function(e,t){Ye.push([e,t]),Nt&&(Qi(),Nt=!1)},dn=!0,Nt=!0,Me=[],Tt=[],hn=null,mn=ct,Ge={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ir,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{ir(e[0],e[1])}catch{}})}},D=Ge,Ye=[],Oe=0,Ct=[];function C(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=L,this._lib=!1;var t=this._PSD=D;if(se&&(this._stackHolder=xe(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==nt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&yn(this,this._value);return}this._state=null,this._value=null,++t.ref,Kr(this,e)}var pn={get:function(){var e=D,t=Ft;function n(r,i){var a=this,o=!e.global&&(e!==D||t!==Ft),s=o&&!pe(),u=new C(function(l,c){Gn(a,new qr(Bt(r,e,o,s),Bt(i,e,o,s),l,c,e))});return se&&jr(u,this),u}return n.prototype=nt,n},set:function(e){me(this,"then",e&&e.prototype===nt?pn:{get:function(){return e},set:pn.set})}};ze(C.prototype,{then:pn,_then:function(e,t){Gn(this,new qr(null,null,e,t,D))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Dt(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Dt(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Dt(t)})},stack:{get:function(){if(this._stack)return this._stack;try{fn=!0;var e=Ur(this,[],$i),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{fn=!1}}},timeout:function(e,t){var n=this;return e<1/0?new C(function(r,i){var a=setTimeout(function(){return i(new S.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&me(C.prototype,Symbol.toStringTag,"Dexie.Promise");Ge.env=Wr();function qr(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}ze(C,{all:function(){var e=ce.apply(null,arguments).map(xt);return new C(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return C.resolve(i).then(function(o){e[a]=o,--r||t(e)},n)})})},resolve:function(e){if(e instanceof C)return e;if(e&&typeof e.then=="function")return new C(function(n,r){e.then(n,r)});var t=new C(nt,!0,e);return jr(t,hn),t},reject:Dt,race:function(){var e=ce.apply(null,arguments).map(xt);return new C(function(t,n){e.map(function(r){return C.resolve(r).then(t,n)})})},PSD:{get:function(){return D},set:function(e){return D=e}},totalEchoes:{get:function(){return Ft}},newPSD:Ce,usePSD:Ue,scheduler:{get:function(){return rt},set:function(e){rt=e}},rejectionMapper:{get:function(){return mn},set:function(e){mn=e}},follow:function(e,t){return new C(function(n,r){return Ce(function(i,a){var o=D;o.unhandleds=[],o.onunhandled=a,o.finalize=Ne(function(){var s=this;ea(function(){s.unhandleds.length===0?i():a(s.unhandleds[0])})},o.finalize),e()},t,n,r)})}});wt&&(wt.allSettled&&me(C,"allSettled",function(){var e=ce.apply(null,arguments).map(xt);return new C(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return C.resolve(i).then(function(o){return r[a]={status:"fulfilled",value:o}},function(o){return r[a]={status:"rejected",reason:o}}).then(function(){return--n||t(r)})})})}),wt.any&&typeof AggregateError<"u"&&me(C,"any",function(){var e=ce.apply(null,arguments).map(xt);return new C(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,o){return C.resolve(a).then(function(s){return t(s)},function(s){i[o]=s,--r||n(new AggregateError(i))})})})}));function Kr(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&ft();n&&typeof n.then=="function"?Kr(e,function(i,a){n instanceof C?n._then(i,a):n.then(i,a)}):(e._state=!0,e._value=n,Hr(e)),r&&dt()}},yn.bind(null,e))}catch(n){yn(e,n)}}function yn(e,t){if(Tt.push(t),e._state===null){var n=e._lib&&ft();t=mn(t),e._state=!1,e._value=t,se&&t!==null&&typeof t=="object"&&!t._promise&&Fi(function(){var r=Pn(t,"stack");t._promise=e,me(t,"stack",{get:function(){return fn?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),ta(e),Hr(e),n&&dt()}}function Hr(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Gn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Oe===0&&(++Oe,rt(function(){--Oe===0&&zn()},[]))}function Gn(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Oe,rt(Zi,[n,e,t])}function Zi(e,t,n){try{hn=t;var r,i=t._value;t._state?r=e(i):(Tt.length&&(Tt=[]),r=e(i),Tt.indexOf(i)===-1&&na(t)),n.resolve(r)}catch(a){n.reject(a)}finally{hn=null,--Oe===0&&zn(),--n.psd.ref||n.psd.finalize()}}function Ur(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,a,o;i!=null?(a=i.name||"Error",o=i.message||i,r=un(i,0)):(a=i,o=""),t.push(a+(o?": "+o:"")+r)}return se&&(r=un(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Ur(e._prev,t,n)),t}function jr(e,t){var n=t?t._numPrev+1:0;n<Yi&&(e._prev=t,e._numPrev=n)}function gt(){ft()&&dt()}function ft(){var e=dn;return dn=!1,Nt=!1,e}function dt(){var e,t,n;do for(;Ye.length>0;)for(e=Ye,Ye=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Ye.length>0);dn=!0,Nt=!0}function zn(){var e=Me;Me=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Ct.slice(0),n=t.length;n;)t[--n]()}function ea(e){function t(){e(),Ct.splice(Ct.indexOf(t),1)}Ct.push(t),++Oe,rt(function(){--Oe===0&&zn()},[])}function ta(e){Me.some(function(t){return t._value===e._value})||Me.push(e)}function na(e){for(var t=Me.length;t;)if(Me[--t]._value===e._value){Me.splice(t,1);return}}function Dt(e){return new C(nt,!1,e)}function G(e,t){var n=D;return function(){var r=ft(),i=D;try{return De(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{De(i,!1),r&&dt()}}}var H={awaits:0,echoes:0,id:0},ra=0,Rt=[],Vt=0,Ft=0,ia=0;function Ce(e,t,n,r){var i=D,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++ia;var o=Ge.env;a.env=kn?{Promise:C,PromiseProp:{value:C,configurable:!0,writable:!0},all:C.all,race:C.race,allSettled:C.allSettled,any:C.any,resolve:C.resolve,reject:C.reject,nthen:nr(o.nthen,a),gthen:nr(o.gthen,a)}:{},t&&V(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=Ue(a,e,n,r);return a.ref===0&&a.finalize(),s}function He(){return H.id||(H.id=++ra),++H.awaits,H.echoes+=Gr,H.id}function pe(){return H.awaits?(--H.awaits===0&&(H.id=0),H.echoes=H.awaits*Gr,!0):!1}(""+zr).indexOf("[native code]")===-1&&(He=pe=L);function xt(e){return H.echoes&&e&&e.constructor===wt?(He(),e.then(function(t){return pe(),t},function(t){return pe(),q(t)})):e}function aa(e){++Ft,(!H.echoes||--H.echoes===0)&&(H.echoes=H.id=0),Rt.push(D),De(e,!0)}function oa(){var e=Rt[Rt.length-1];Rt.pop(),De(e,!1)}function De(e,t){var n=D;if((t?H.echoes&&(!Vt++||e!==D):Vt&&(!--Vt||e!==D))&&Xr(t?aa.bind(null,e):oa),e!==D&&(D=e,n===Ge&&(Ge.env=Wr()),kn)){var r=Ge.env.Promise,i=e.env;Pt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(k,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Wr(){var e=k.Promise;return kn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(k,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Pt.then,gthen:e.prototype.then}:{}}function Ue(e,t,n,r,i){var a=D;try{return De(e,!0),t(n,r,i)}finally{De(a,!1)}}function Xr(e){zr.call(ln,e)}function Bt(e,t,n,r){return typeof e!="function"?e:function(){var i=D;n&&He(),De(t,!0);try{return e.apply(this,arguments)}finally{De(i,!1),r&&Xr(pe)}}}function nr(e,t){return function(n,r){return e.call(this,Bt(n,t),Bt(r,t))}}var rr="unhandledrejection";function ir(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(k.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(rr,!0,!0),V(r,i)):k.CustomEvent&&(r=new CustomEvent(rr,{detail:i}),V(r,i)),r&&k.dispatchEvent&&(dispatchEvent(r),!k.PromiseRejectionEvent&&k.onunhandledrejection))try{k.onunhandledrejection(r)}catch{}se&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var q=C.reject;function vn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!D.letThrough&&!e._vip){if(e._state.openComplete)return q(new S.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return q(new S.DatabaseClosed);e.open().catch(L)}return e._state.dbReadyPromise.then(function(){return vn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===xn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return vn(e,t,n,r)})):q(a)}return i._promise(t,function(a,o){return Ce(function(){return D.trans=i,r(a,o,i)})}).then(function(a){return i._completion.then(function(){return a})})}}var ar="3.2.2",Se=String.fromCharCode(65535),gn=-1/0,ue="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vr="String expected.",Ze=[],Kt=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),sa=Kt,ua=Kt,Jr=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Ht="__dbnames",Jt="readonly",Yt="readwrite";function Fe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Yr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function bt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=lt(t),delete t[e]),t}:function(t){return t}}var la=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||D.trans,a=this.name;function o(u,l,c){if(!c.schema[a])throw new S.NotFound("Table "+a+" not part of transaction");return n(c.idbtrans,c)}var s=ft();try{return i&&i.db===this.db?i===D.trans?i._promise(t,o,r):Ce(function(){return i._promise(t,o,r)},{trans:i,transless:D.transless||D}):vn(this.db,t,[this.name],o)}finally{s&&dt()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(U(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=z(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(c){return c.compound&&n.every(function(d){return c.keyPath.indexOf(d)>=0})&&c.keyPath.every(function(d){return n.indexOf(d)>=0})})[0];if(r&&this.db._maxKey!==Se)return this.where(r.name).equals(r.keyPath.map(function(c){return t[c]}));!r&&se&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,a=this.db._deps.indexedDB;function o(c,d){try{return a.cmp(c,d)===0}catch{return!1}}var s=n.reduce(function(c,d){var m=c[0],p=c[1],f=i[d],h=t[d];return[m||f,m||!f?Fe(p,f&&f.multi?function(v){var b=de(v,d);return U(b)&&b.some(function(I){return o(h,I)})}:function(v){return o(h,de(v,d))}):p]},[null,null]),u=s[0],l=s[1];return u?this.where(u.name).equals(t[u.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,U(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var a in r)if(Y(r,a))try{i[a]=r[a]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){V(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,s=t;return o&&a&&(s=bt(o)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"add",keys:n!=null?[n]:null,values:[s]})}).then(function(u){return u.numFailures?C.reject(u.failures[0]):u.lastResult}).then(function(u){if(o)try{re(t,o,u)}catch{}return u})},e.prototype.update=function(t,n){if(typeof t=="object"&&!U(t)){var r=de(t,this.schema.primKey.keyPath);if(r===void 0)return q(new S.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?z(n).forEach(function(i){re(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,s=t;return o&&a&&(s=bt(o)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"put",values:[s],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?C.reject(u.failures[0]):u.lastResult}).then(function(u){if(o)try{re(t,o,u)}catch{}return u})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?C.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Yr})}).then(function(n){return n.numFailures?C.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&a)throw new S.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new S.InvalidArgument("Arguments objects and keys must have the same length");var d=t.length,m=c&&l?t.map(bt(c)):t;return i.core.mutate({trans:s,type:"add",keys:a,values:m,wantResults:o}).then(function(p){var f=p.numFailures,h=p.results,v=p.lastResult,b=p.failures,I=o?h:v;if(f===0)return I;throw new Qe(i.name+".bulkAdd(): "+f+" of "+d+" operations failed",b)})})},e.prototype.bulkPut=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&a)throw new S.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new S.InvalidArgument("Arguments objects and keys must have the same length");var d=t.length,m=c&&l?t.map(bt(c)):t;return i.core.mutate({trans:s,type:"put",keys:a,values:m,wantResults:o}).then(function(p){var f=p.numFailures,h=p.results,v=p.lastResult,b=p.failures,I=o?h:v;if(f===0)return I;throw new Qe(i.name+".bulkPut(): "+f+" of "+d+" operations failed",b)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var a=i.numFailures,o=i.lastResult,s=i.failures;if(a===0)return o;throw new Qe(n.name+".bulkDelete(): "+a+" of "+r+" operations failed",s)})},e}();function ht(e){var t={},n=function(s,u){if(u){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return t[s].subscribe.apply(null,c),e}else if(typeof s=="string")return t[s]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(s,u,l){if(typeof s=="object")return o(s);u||(u=Ji),l||(l=L);var c={subscribers:[],fire:l,subscribe:function(d){c.subscribers.indexOf(d)===-1&&(c.subscribers.push(d),c.fire=u(c.fire,d))},unsubscribe:function(d){c.subscribers=c.subscribers.filter(function(m){return m!==d}),c.fire=c.subscribers.reduce(u,l)}};return t[s]=n[s]=c,c}function o(s){z(s).forEach(function(u){var l=s[u];if(U(l))a(u,s[u][0],s[u][1]);else if(l==="asap")var c=a(u,ct,function(){for(var m=arguments.length,p=new Array(m);m--;)p[m]=arguments[m];c.subscribers.forEach(function(f){Mr(function(){f.apply(null,p)})})});else throw new S.InvalidArgument("Invalid event config")})}}function mt(e,t){return qe(t).from({prototype:e}),t}function ca(e){return mt(la.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:ht(null,{creating:[Wi,L],reading:[ji,ct],updating:[Vi,L],deleting:[Xi,L]})})}function Be(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function $t(e,t){e.filter=Fe(e.filter,t)}function Qt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Fe(r(),t())}:t,e.justLimit=n&&!r}function fa(e,t){e.isMatch=Fe(e.isMatch,t)}function At(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new S.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function or(e,t,n){var r=At(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Et(e,t,n,r){var i=e.replayFilter?Fe(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},o=function(s,u,l){if(!i||i(u,l,function(m){return u.stop(m)},function(m){return u.fail(m)})){var c=u.primaryKey,d=""+c;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(c)),Y(a,d)||(a[d]=!0,t(s,u,l))}};return Promise.all([e.or._iterate(o,n),sr(or(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}else return sr(or(e,r,n),Fe(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function sr(e,t,n,r){var i=r?function(o,s,u){return n(r(o),s,u)}:n,a=G(i);return e.then(function(o){if(o)return o.start(function(){var s=function(){return o.continue()};(!t||t(o,function(u){return s=u},function(u){o.stop(u),s=L},function(u){o.fail(u),s=L}))&&a(o.value,o,function(u){return s=u}),s()})})}function X(e,t){try{var n=ur(e),r=ur(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return ha(lr(e),lr(t));case"Array":return da(e,t)}}catch{}return NaN}function da(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var o=X(e[a],t[a]);if(o!==0)return o}return n===r?0:n<r?-1:1}function ha(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function ur(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=on(e);return n==="ArrayBuffer"?"binary":n}function lr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ma=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,q.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,q.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Fe(n.algorithm,t)},e.prototype._iterate=function(t,n){return Et(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&V(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return Et(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(Be(i,!0))return a.count({trans:r,query:{index:At(i,a.schema),range:i.range}}).then(function(s){return Math.min(s,i.limit)});var o=0;return Et(i,function(){return++o,!1},r,a).then(function(){return o})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],a=r.length-1;function o(l,c){return c?o(l[r[c]],c-1):l[i]}var s=this._ctx.dir==="next"?1:-1;function u(l,c){var d=o(l,a),m=o(c,a);return d<m?-s:d>m?s:0}return this.toArray(function(l){return l.sort(u)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Be(i,!0)&&i.limit>0){var a=i.valueMapper,o=At(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(u){var l=u.result;return a?l.map(a):l})}else{var s=[];return Et(i,function(u){return s.push(u)},r,i.table.core).then(function(){return s})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,Be(n)?Qt(n,function(){var r=t;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):Qt(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Qt(this._ctx,function(){var n=t;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},e.prototype.until=function(t,n){return $t(this._ctx,function(r,i,a){return t(r.value)?(i(a),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return $t(this._ctx,function(n){return t(n.value)}),fa(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&Be(n,!0)&&n.limit>0)return this._read(function(i){var a=At(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return $t(this._ctx,function(i){var a=i.primaryKey.toString(),o=Y(r,a);return r[a]=!0,!o}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof t=="function")a=t;else{var o=z(t),s=o.length;a=function(b){for(var I=!1,E=0;E<s;++E){var _=o[E],g=t[_];de(b,_)!==g&&(re(b,_,g),I=!0)}return I}}var u=r.table.core,l=u.schema.primaryKey,c=l.outbound,d=l.extractKey,m=n.db._options.modifyChunkSize||200,p=[],f=0,h=[],v=function(b,I){var E=I.failures,_=I.numFailures;f+=b-_;for(var g=0,w=z(E);g<w.length;g++){var R=w[g];p.push(E[R])}};return n.clone().primaryKeys().then(function(b){var I=function(E){var _=Math.min(m,b.length-E);return u.getMany({trans:i,keys:b.slice(E,E+_),cache:"immutable"}).then(function(g){for(var w=[],R=[],T=c?[]:null,A=[],M=0;M<_;++M){var x=g[M],B={value:lt(x),primKey:b[E+M]};a.call(B,B.value,B)!==!1&&(B.value==null?A.push(b[E+M]):!c&&X(d(x),d(B.value))!==0?(A.push(b[E+M]),w.push(B.value)):(R.push(B.value),c&&T.push(b[E+M])))}var F=Be(r)&&r.limit===1/0&&(typeof t!="function"||t===Zt)&&{index:r.index,range:r.range};return Promise.resolve(w.length>0&&u.mutate({trans:i,type:"add",values:w}).then(function(K){for(var O in K.failures)A.splice(parseInt(O),1);v(w.length,K)})).then(function(){return(R.length>0||F&&typeof t=="object")&&u.mutate({trans:i,type:"put",keys:T,values:R,criteria:F,changeSpec:typeof t!="function"&&t}).then(function(K){return v(R.length,K)})}).then(function(){return(A.length>0||F&&t===Zt)&&u.mutate({trans:i,type:"delete",keys:A,criteria:F}).then(function(K){return v(A.length,K)})}).then(function(){return b.length>E+_&&I(E+m)})})};return I(0).then(function(){if(p.length>0)throw new Ot("Error modifying one or more objects",p,f,h);return b.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return Be(t)&&(t.isPrimKey&&!ua||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,a=n;return t.table.core.count({trans:r,query:{index:i,range:a}}).then(function(o){return t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(s){var u=s.failures;s.lastResult,s.results;var l=s.numFailures;if(l)throw new Ot("Could not delete some values",Object.keys(u).map(function(c){return u[c]}),o-l);return o-l})})}):this.modify(Zt)},e}(),Zt=function(e,t){return t.value=null};function pa(e){return mt(ma.prototype,function(n,r){this.db=e;var i=Yr,a=null;if(r)try{i=r()}catch(l){a=l}var o=n._ctx,s=o.table,u=s.hook.reading.fire;this._ctx={table:s,index:o.index,isPrimKey:!o.index||s.schema.primKey.keyPath&&o.index===s.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:o.or,valueMapper:u!==ct?u:null}})}function ya(e,t){return e<t?-1:e===t?0:1}function va(e,t){return e>t?-1:e===t?0:1}function J(e,t,n){var r=e instanceof Qr?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Le(e){return new e.Collection(e,function(){return $r("")}).limit(0)}function ga(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function ba(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Ea(e,t,n,r,i,a){for(var o=Math.min(e.length,r.length),s=-1,u=0;u<o;++u){var l=t[u];if(l!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[u],l)<0&&(s=u)}return o<r.length&&a==="next"?e+n.substr(e.length):o<e.length&&a==="prev"?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function _t(e,t,n,r){var i,a,o,s,u,l,c,d=n.length;if(!n.every(function(h){return typeof h=="string"}))return J(e,Vr);function m(h){i=ga(h),a=ba(h),o=h==="next"?ya:va;var v=n.map(function(b){return{lower:a(b),upper:i(b)}}).sort(function(b,I){return o(b.lower,I.lower)});s=v.map(function(b){return b.upper}),u=v.map(function(b){return b.lower}),l=h,c=h==="next"?"":r}m("next");var p=new e.Collection(e,function(){return Ie(s[0],u[d-1]+r)});p._ondirectionchange=function(h){m(h)};var f=0;return p._addAlgorithm(function(h,v,b){var I=h.key;if(typeof I!="string")return!1;var E=a(I);if(t(E,u,f))return!0;for(var _=null,g=f;g<d;++g){var w=Ea(I,E,s[g],u[g],o,l);w===null&&_===null?f=g+1:(_===null||o(_,w)>0)&&(_=w)}return v(_!==null?function(){h.continue(_+c)}:b),!1}),p}function Ie(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function $r(e){return{type:1,lower:e,upper:e}}var Qr=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?Le(this):new this.Collection(this,function(){return Ie(t,n,!r,!i)})}catch{return J(this,ue)}},e.prototype.equals=function(t){return t==null?J(this,ue):new this.Collection(this,function(){return $r(t)})},e.prototype.above=function(t){return t==null?J(this,ue):new this.Collection(this,function(){return Ie(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?J(this,ue):new this.Collection(this,function(){return Ie(t,void 0,!1)})},e.prototype.below=function(t){return t==null?J(this,ue):new this.Collection(this,function(){return Ie(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?J(this,ue):new this.Collection(this,function(){return Ie(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?J(this,Vr):this.between(t,t+Se,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):_t(this,function(n,r){return n.indexOf(r[0])===0},[t],Se)},e.prototype.equalsIgnoreCase=function(t){return _t(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=ce.apply(ke,arguments);return t.length===0?Le(this):_t(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=ce.apply(ke,arguments);return t.length===0?Le(this):_t(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Se)},e.prototype.anyOf=function(){var t=this,n=ce.apply(ke,arguments),r=this._cmp;try{n.sort(r)}catch{return J(this,ue)}if(n.length===0)return Le(this);var i=new this.Collection(this,function(){return Ie(n[0],n[n.length-1])});i._ondirectionchange=function(o){r=o==="next"?t._ascending:t._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(o,s,u){for(var l=o.key;r(l,n[a])>0;)if(++a,a===n.length)return s(u),!1;return r(l,n[a])===0?!0:(s(function(){o.continue(n[a])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[gn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=ce.apply(ke,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return J(this,ue)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[gn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,a=this._ascending,o=this._descending,s=this._min,u=this._max;if(t.length===0)return Le(this);if(!t.every(function(g){return g[0]!==void 0&&g[1]!==void 0&&a(g[0],g[1])<=0}))return J(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",S.InvalidArgument);var l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;function d(g,w){for(var R=0,T=g.length;R<T;++R){var A=g[R];if(i(w[0],A[1])<0&&i(w[1],A[0])>0){A[0]=s(A[0],w[0]),A[1]=u(A[1],w[1]);break}}return R===T&&g.push(w),g}var m=a;function p(g,w){return m(g[0],w[0])}var f;try{f=t.reduce(d,[]),f.sort(p)}catch{return J(this,ue)}var h=0,v=c?function(g){return a(g,f[h][1])>0}:function(g){return a(g,f[h][1])>=0},b=l?function(g){return o(g,f[h][0])>0}:function(g){return o(g,f[h][0])>=0};function I(g){return!v(g)&&!b(g)}var E=v,_=new this.Collection(this,function(){return Ie(f[0][0],f[f.length-1][1],!l,!c)});return _._ondirectionchange=function(g){g==="next"?(E=v,m=a):(E=b,m=o),f.sort(p)},_._addAlgorithm(function(g,w,R){for(var T=g.key;E(T);)if(++h,h===f.length)return w(R),!1;return I(T)?!0:(r._cmp(T,f[h][1])===0||r._cmp(T,f[h][0])===0||w(function(){m===a?g.continue(f[h][0]):g.continue(f[h][1])}),!1)}),_},e.prototype.startsWithAnyOf=function(){var t=ce.apply(ke,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?Le(this):this.inAnyRange(t.map(function(n){return[n,n+Se]})):J(this,"startsWithAnyOf() only works with strings")},e}();function _a(e){return mt(Qr.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var a=e._deps.indexedDB;if(!a)throw new S.MissingAPI;this._cmp=this._ascending=a.cmp.bind(a),this._descending=function(o,s){return a.cmp(s,o)},this._max=function(o,s){return a.cmp(o,s)>0?o:s},this._min=function(o,s){return a.cmp(o,s)<0?o:s},this._IDBKeyRange=e._deps.IDBKeyRange})}function oe(e){return G(function(t){return it(t),e(t.target.error),!1})}function it(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var at="storagemutated",Te="x-storagemutated-1",Re=ht(null,at),Ia=function(){function e(){}return e.prototype._lock=function(){return Je(!D.global),++this._reculock,this._reculock===1&&!D.global&&(D.lockOwnerFor=this),this},e.prototype._unlock=function(){if(Je(!D.global),--this._reculock===0)for(D.global||(D.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Ue(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&D.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(Je(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new S.DatabaseClosed(i);case"MissingAPIError":throw new S.MissingAPI(i.message,i);default:throw new S.OpenFailed(i)}if(!this.active)throw new S.TransactionInactive;return Je(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=G(function(a){it(a),n._reject(t.error)}),t.onabort=G(function(a){it(a),n.active&&n._reject(new S.Abort(t.error)),n.active=!1,n.on("abort").fire(a)}),t.oncomplete=G(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Re.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return q(new S.ReadOnly("Transaction is readonly"));if(!this.active)return q(new S.TransactionInactive);if(this._locked())return new C(function(o,s){i._blockedFuncs.push([function(){i._promise(t,n,r).then(o,s)},D])});if(r)return Ce(function(){var o=new C(function(s,u){i._lock();var l=n(s,u,i);l&&l.then&&l.then(s,u)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var a=new C(function(o,s){var u=n(o,s,i);u&&u.then&&u.then(o,s)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=C.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var a=n._waitingFor;return new C(function(o,s){r.then(function(u){return n._waitingQueue.push(G(o.bind(null,u)))},function(u){return n._waitingQueue.push(G(s.bind(null,u)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new S.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(Y(n,t))return n[t];var r=this.schema[t];if(!r)throw new S.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function wa(e){return mt(Ia.prototype,function(n,r,i,a,o){var s=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=ht(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new C(function(u,l){s._resolve=u,s._reject=l}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(u){var l=s.active;return s.active=!1,s.on.error.fire(u),s.parent?s.parent._reject(u):l&&s.idbtrans&&s.idbtrans.abort(),q(u)})})}function bn(e,t,n,r,i,a,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Zr(t)}}function Zr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function ei(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Or(n,function(r){return[r.name,r]})}}function Ta(e){return e.length===1?e[0]:e}var ot=function(e){try{return e.only([[]]),ot=function(){return[[]]},[[]]}catch{return ot=function(){return Se},Se}};function En(e){return e==null?function(){}:typeof e=="string"?Ca(e):function(t){return de(t,e)}}function Ca(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return de(n,e)}}function cr(e){return[].slice.call(e)}var Da=0;function et(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function Ra(e,t,n){function r(d,m){var p=cr(d.objectStoreNames);return{schema:{name:d.name,tables:p.map(function(f){return m.objectStore(f)}).map(function(f){var h=f.keyPath,v=f.autoIncrement,b=U(h),I=h==null,E={},_={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:I,compound:b,keyPath:h,autoIncrement:v,unique:!0,extractKey:En(h)},indexes:cr(f.indexNames).map(function(g){return f.index(g)}).map(function(g){var w=g.name,R=g.unique,T=g.multiEntry,A=g.keyPath,M=U(A),x={name:w,compound:M,keyPath:A,unique:R,multiEntry:T,extractKey:En(A)};return E[et(A)]=x,x}),getIndexByKeyPath:function(g){return E[et(g)]}};return E[":id"]=_.primaryKey,h!=null&&(E[et(h)]=_.primaryKey),_})},hasGetAll:p.length>0&&"getAll"in m.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(d){if(d.type===3)return null;if(d.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var m=d.lower,p=d.upper,f=d.lowerOpen,h=d.upperOpen,v=m===void 0?p===void 0?null:t.upperBound(p,!!h):p===void 0?t.lowerBound(m,!!f):t.bound(m,p,!!f,!!h);return v}function a(d){var m=d.name;function p(v){var b=v.trans,I=v.type,E=v.keys,_=v.values,g=v.range;return new Promise(function(w,R){w=G(w);var T=b.objectStore(m),A=T.keyPath==null,M=I==="put"||I==="add";if(!M&&I!=="delete"&&I!=="deleteRange")throw new Error("Invalid operation type: "+I);var x=(E||_||{length:1}).length;if(E&&_&&E.length!==_.length)throw new Error("Given keys array must have same length as given values array.");if(x===0)return w({numFailures:0,failures:{},results:[],lastResult:void 0});var B,F=[],K=[],O=0,$=function(ae){++O,it(ae)};if(I==="deleteRange"){if(g.type===4)return w({numFailures:O,failures:K,results:[],lastResult:void 0});g.type===3?F.push(B=T.clear()):F.push(B=T.delete(i(g)))}else{var ee=M?A?[_,E]:[_,null]:[E,null],ve=ee[0],ie=ee[1];if(M)for(var Q=0;Q<x;++Q)F.push(B=ie&&ie[Q]!==void 0?T[I](ve[Q],ie[Q]):T[I](ve[Q])),B.onerror=$;else for(var Q=0;Q<x;++Q)F.push(B=T[I](ve[Q])),B.onerror=$}var ge=function(ae){var Xe=ae.target.result;F.forEach(function(te,vt){return te.error!=null&&(K[vt]=te.error)}),w({numFailures:O,failures:K,results:I==="delete"?E:F.map(function(te){return te.result}),lastResult:Xe})};B.onerror=function(ae){$(ae),ge(ae)},B.onsuccess=ge})}function f(v){var b=v.trans,I=v.values,E=v.query,_=v.reverse,g=v.unique;return new Promise(function(w,R){w=G(w);var T=E.index,A=E.range,M=b.objectStore(m),x=T.isPrimaryKey?M:M.index(T.name),B=_?g?"prevunique":"prev":g?"nextunique":"next",F=I||!("openKeyCursor"in x)?x.openCursor(i(A),B):x.openKeyCursor(i(A),B);F.onerror=oe(R),F.onsuccess=G(function(K){var O=F.result;if(!O){w(null);return}O.___id=++Da,O.done=!1;var $=O.continue.bind(O),ee=O.continuePrimaryKey;ee&&(ee=ee.bind(O));var ve=O.advance.bind(O),ie=function(){throw new Error("Cursor not started")},Q=function(){throw new Error("Cursor not stopped")};O.trans=b,O.stop=O.continue=O.continuePrimaryKey=O.advance=ie,O.fail=G(R),O.next=function(){var ge=this,ae=1;return this.start(function(){return ae--?ge.continue():ge.stop()}).then(function(){return ge})},O.start=function(ge){var ae=new Promise(function(te,vt){te=G(te),F.onerror=oe(vt),O.fail=vt,O.stop=function(wi){O.stop=O.continue=O.continuePrimaryKey=O.advance=Q,te(wi)}}),Xe=function(){if(F.result)try{ge()}catch(te){O.fail(te)}else O.done=!0,O.start=function(){throw new Error("Cursor behind last entry")},O.stop()};return F.onsuccess=G(function(te){F.onsuccess=Xe,Xe()}),O.continue=$,O.continuePrimaryKey=ee,O.advance=ve,Xe(),ae},w(O)},R)})}function h(v){return function(b){return new Promise(function(I,E){I=G(I);var _=b.trans,g=b.values,w=b.limit,R=b.query,T=w===1/0?void 0:w,A=R.index,M=R.range,x=_.objectStore(m),B=A.isPrimaryKey?x:x.index(A.name),F=i(M);if(w===0)return I({result:[]});if(v){var K=g?B.getAll(F,T):B.getAllKeys(F,T);K.onsuccess=function(ve){return I({result:ve.target.result})},K.onerror=oe(E)}else{var O=0,$=g||!("openKeyCursor"in B)?B.openCursor(F):B.openKeyCursor(F),ee=[];$.onsuccess=function(ve){var ie=$.result;if(!ie)return I({result:ee});if(ee.push(g?ie.value:ie.primaryKey),++O===w)return I({result:ee});ie.continue()},$.onerror=oe(E)}})}}return{name:m,schema:d,mutate:p,getMany:function(v){var b=v.trans,I=v.keys;return new Promise(function(E,_){E=G(E);for(var g=b.objectStore(m),w=I.length,R=new Array(w),T=0,A=0,M,x=function(O){var $=O.target;(R[$._pos]=$.result)!=null,++A===T&&E(R)},B=oe(_),F=0;F<w;++F){var K=I[F];K!=null&&(M=g.get(I[F]),M._pos=F,M.onsuccess=x,M.onerror=B,++T)}T===0&&E(R)})},get:function(v){var b=v.trans,I=v.key;return new Promise(function(E,_){E=G(E);var g=b.objectStore(m),w=g.get(I);w.onsuccess=function(R){return E(R.target.result)},w.onerror=oe(_)})},query:h(u),openCursor:f,count:function(v){var b=v.query,I=v.trans,E=b.index,_=b.range;return new Promise(function(g,w){var R=I.objectStore(m),T=E.isPrimaryKey?R:R.index(E.name),A=i(_),M=A?T.count(A):T.count();M.onsuccess=G(function(x){return g(x.target.result)}),M.onerror=oe(w)})}}}var o=r(e,n),s=o.schema,u=o.hasGetAll,l=s.tables.map(function(d){return a(d)}),c={};return l.forEach(function(d){return c[d.name]=d}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(d){var m=c[d];if(!m)throw new Error("Table '"+d+"' not found");return c[d]},MIN_KEY:-1/0,MAX_KEY:ot(t),schema:s}}function Aa(e,t){return t.reduce(function(n,r){var i=r.create;return P(P({},n),i(n))},e)}function Sa(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=Aa(Ra(t,i,r),e.dbcore);return{dbcore:a}}function qn(e,t){var n=e._novip,r=t.db,i=Sa(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(a){var o=a.name;n.core.schema.tables.some(function(s){return s.name===o})&&(a.core=n.core.table(o),n[o]instanceof n.Table&&(n[o].core=a.core))})}function Lt(e,t,n,r){var i=e._novip;n.forEach(function(a){var o=r[a];t.forEach(function(s){var u=Pn(s,a);(!u||"value"in u&&u.value===void 0)&&(s===i.Transaction.prototype||s instanceof i.Transaction?me(s,a,{get:function(){return this.table(a)},set:function(l){Ar(this,a,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[a]=new i.Table(a,o))})})}function _n(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function Ma(e,t){return e._cfg.version-t._cfg.version}function Oa(e,t,n,r){var i=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),s=D.transless||D;Ce(function(){D.trans=a,D.transless=s,t===0?(z(i).forEach(function(u){Kn(n,u,i[u].primKey,i[u].indexes)}),qn(e,n),C.follow(function(){return e.on.populate.fire(a)}).catch(o)):Pa(e,t,a,n).catch(o)})}function Pa(e,t,n,r){var i=e._novip,a=[],o=i._versions,s=i._dbSchema=Hn(i,i.idbdb,r),u=!1,l=o.filter(function(d){return d._cfg.version>=t});l.forEach(function(d){a.push(function(){var m=s,p=d._cfg.dbschema;wn(i,m,r),wn(i,p,r),s=i._dbSchema=p;var f=ti(m,p);f.add.forEach(function(_){Kn(r,_[0],_[1].primKey,_[1].indexes)}),f.change.forEach(function(_){if(_.recreate)throw new S.Upgrade("Not yet support for changing primary key");var g=r.objectStore(_.name);_.add.forEach(function(w){return In(g,w)}),_.change.forEach(function(w){g.deleteIndex(w.name),In(g,w)}),_.del.forEach(function(w){return g.deleteIndex(w)})});var h=d._cfg.contentUpgrade;if(h&&d._cfg.version>t){qn(i,r),n._memoizedTables={},u=!0;var v=Pr(p);f.del.forEach(function(_){v[_]=m[_]}),_n(i,[i.Transaction.prototype]),Lt(i,[i.Transaction.prototype],z(v),v),n.schema=v;var b=Nn(h);b&&He();var I,E=C.follow(function(){if(I=h(n),I&&b){var _=pe.bind(null,null);I.then(_,_)}});return I&&typeof I.then=="function"?C.resolve(I):E.then(function(){return I})}}),a.push(function(m){if(!u||!sa){var p=d._cfg.dbschema;Fa(p,m)}_n(i,[i.Transaction.prototype]),Lt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function c(){return a.length?C.resolve(a.shift()(n.idbtrans)).then(c):C.resolve()}return c().then(function(){Na(s,r)})}function ti(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],a=t[r];if(!i)n.add.push([r,a]);else{var o={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!Kt)o.recreate=!0,n.change.push(o);else{var s=i.idxByName,u=a.idxByName,l=void 0;for(l in s)u[l]||o.del.push(l);for(l in u){var c=s[l],d=u[l];c?c.src!==d.src&&o.change.push(d):o.add.push(d)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function Kn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return In(i,a)}),i}function Na(e,t){z(e).forEach(function(n){t.db.objectStoreNames.contains(n)||Kn(t,n,e[n].primKey,e[n].indexes)})}function Fa(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function In(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Hn(e,t,n){var r={},i=zt(t.objectStoreNames,0);return i.forEach(function(a){for(var o=n.objectStore(a),s=o.keyPath,u=bn(Zr(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),l=[],c=0;c<o.indexNames.length;++c){var d=o.index(o.indexNames[c]);s=d.keyPath;var m=bn(d.name,s,!!d.unique,!!d.multiEntry,!1,s&&typeof s!="string",!1);l.push(m)}r[a]=ei(a,u,l)}),r}function xa(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=Hn(r,t,n);r._storeNames=zt(t.objectStoreNames,0),Lt(r,[r._allTables],z(i),i)}function Ba(e,t){var n=Hn(e,e.idbdb,t),r=ti(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function wn(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,a=0;a<i.length;++a){var o=i[a],s=n.objectStore(o);r._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var l=s.indexNames[u],c=s.index(l).keyPath,d=typeof c=="string"?c:"["+zt(c).join("+")+"]";if(t[o]){var m=t[o].idxByName[d];m&&(m.name=l,delete t[o].idxByName[d],t[o].idxByName[l]=m)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&k.WorkerGlobalScope&&k instanceof k.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function La(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return bn(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),U(i),n===0)})}var ka=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){z(t).forEach(function(r){if(t[r]!==null){var i=La(t[r]),a=i.shift();if(a.multi)throw new S.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new S.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new S.Schema("Index must have a name and cannot be an empty string")}),n[r]=ei(r,a,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?V(this._cfg.storesSource,t):t;var r=n._versions,i={},a={};return r.forEach(function(o){V(i,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(i,a)}),n._dbSchema=a,_n(n,[n._allTables,n,n.Transaction.prototype]),Lt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],z(a),a),n._storeNames=z(a),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Bn(this._cfg.contentUpgrade||L,t),this},e}();function Ga(e){return mt(ka.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Un(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Vn(Ht,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function jn(e){return e&&typeof e.databases=="function"}function za(e){var t=e.indexedDB,n=e.IDBKeyRange;return jn(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Ht})}):Un(t,n).toCollection().primaryKeys()}function qa(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!jn(n)&&t!==Ht&&Un(n,r).put({name:t}).catch(L)}function Ka(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!jn(n)&&t!==Ht&&Un(n,r).delete(t).catch(L)}function Tn(e){return Ce(function(){return D.letThrough=!0,e()})}function Ha(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function Ua(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?q(t.dbOpenError):e});se&&(t.openCanceller._stackHolder=xe()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new S.DatabaseClosed("db.open() was cancelled")}var a=t.dbReadyResolve,o=null,s=!1;return C.race([r,(typeof navigator>"u"?C.resolve():Ha()).then(function(){return new C(function(u,l){if(i(),!n)throw new S.MissingAPI;var c=e.name,d=t.autoSchema?n.open(c):n.open(c,Math.round(e.verno*10));if(!d)throw new S.MissingAPI;d.onerror=oe(l),d.onblocked=G(e._fireOnBlocked),d.onupgradeneeded=G(function(m){if(o=d.transaction,t.autoSchema&&!e._options.allowEmptyDB){d.onerror=it,o.abort(),d.result.close();var p=n.deleteDatabase(c);p.onsuccess=p.onerror=G(function(){l(new S.NoSuchDatabase("Database "+c+" doesnt exist"))})}else{o.onerror=oe(l);var f=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;s=f<1,e._novip.idbdb=d.result,Oa(e,f/10,o,l)}},l),d.onsuccess=G(function(){o=null;var m=e._novip.idbdb=d.result,p=zt(m.objectStoreNames);if(p.length>0)try{var f=m.transaction(Ta(p),"readonly");t.autoSchema?xa(e,m,f):(wn(e,e._dbSchema,f),Ba(e,f)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),qn(e,f)}catch{}Ze.push(e),m.onversionchange=G(function(h){t.vcFired=!0,e.on("versionchange").fire(h)}),m.onclose=G(function(h){e.on("close").fire(h)}),s&&qa(e._deps,c),u()},l)})})]).then(function(){return i(),t.onReadyBeingFired=[],C.resolve(Tn(function(){return e.on.ready.fire(e.vip)})).then(function u(){if(t.onReadyBeingFired.length>0){var l=t.onReadyBeingFired.reduce(Bn,L);return t.onReadyBeingFired=[],C.resolve(Tn(function(){return l(e.vip)})).then(u)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(u){t.dbOpenError=u;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),q(u)}).finally(function(){t.openComplete=!0,a()})}function Cn(e){var t=function(o){return e.next(o)},n=function(o){return e.throw(o)},r=a(t),i=a(n);function a(o){return function(s){var u=o(s),l=u.value;return u.done?l:!l||typeof l.then!="function"?U(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return a(t)()}function ja(e,t,n){var r=arguments.length;if(r<2)throw new S.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=Nr(i);return[e,a,n]}function ni(e,t,n,r,i){return C.resolve().then(function(){var a=D.transless||D,o=e._createTransaction(t,n,e._dbSchema,r),s={trans:o,transless:a};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(d){return d.name===xn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return ni(e,t,n,null,i)})):q(d)}var u=Nn(i);u&&He();var l,c=C.follow(function(){if(l=i.call(o,o),l)if(u){var d=pe.bind(null,null);l.then(d,d)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Cn(l))},s);return(l&&typeof l.then=="function"?C.resolve(l).then(function(d){return o.active?d:q(new S.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return l})).then(function(d){return r&&o._resolve(),o._completion.then(function(){return d})}).catch(function(d){return o._reject(d),q(d)})})}function It(e,t,n){for(var r=U(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function Wa(e){return P(P({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function o(h,v,b){var I=et(h),E=i[I]=i[I]||[],_=h==null?0:typeof h=="string"?1:h.length,g=v>0,w=P(P({},b),{isVirtual:g,keyTail:v,keyLength:_,extractKey:En(h),unique:!g&&b.unique});if(E.push(w),w.isPrimaryKey||a.push(w),_>1){var R=_===2?h[0]:h.slice(0,_-1);o(R,v+1,b)}return E.sort(function(T,A){return T.keyTail-A.keyTail}),w}var s=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var u=0,l=r.indexes;u<l.length;u++){var c=l[u];o(c.keyPath,0,c)}function d(h){var v=i[et(h)];return v&&v[0]}function m(h,v){return{type:h.type===1?2:h.type,lower:It(h.lower,h.lowerOpen?e.MAX_KEY:e.MIN_KEY,v),lowerOpen:!0,upper:It(h.upper,h.upperOpen?e.MIN_KEY:e.MAX_KEY,v),upperOpen:!0}}function p(h){var v=h.query.index;return v.isVirtual?P(P({},h),{query:{index:v,range:m(h.query.range,v.keyTail)}}):h}var f=P(P({},n),{schema:P(P({},r),{primaryKey:s,indexes:a,getIndexByKeyPath:d}),count:function(h){return n.count(p(h))},query:function(h){return n.query(p(h))},openCursor:function(h){var v=h.query.index,b=v.keyTail,I=v.isVirtual,E=v.keyLength;if(!I)return n.openCursor(h);function _(g){function w(T){T!=null?g.continue(It(T,h.reverse?e.MAX_KEY:e.MIN_KEY,b)):h.unique?g.continue(g.key.slice(0,E).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,b)):g.continue()}var R=Object.create(g,{continue:{value:w},continuePrimaryKey:{value:function(T,A){g.continuePrimaryKey(It(T,e.MAX_KEY,b),A)}},primaryKey:{get:function(){return g.primaryKey}},key:{get:function(){var T=g.key;return E===1?T[0]:T.slice(0,E)}},value:{get:function(){return g.value}}});return R}return n.openCursor(p(h)).then(function(g){return g&&_(g)})}});return f}})}var Xa={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Wa};function Wn(e,t,n,r){return n=n||{},r=r||"",z(e).forEach(function(i){if(!Y(t,i))n[r+i]=void 0;else{var a=e[i],o=t[i];if(typeof a=="object"&&typeof o=="object"&&a&&o){var s=on(a),u=on(o);s!==u?n[r+i]=t[i]:s==="Object"?Wn(a,o,n,r+i+"."):a!==o&&(n[r+i]=t[i])}else a!==o&&(n[r+i]=t[i])}}),z(t).forEach(function(i){Y(e,i)||(n[r+i]=t[i])}),n}function Va(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Ja={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return P(P({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=P(P({},n),{mutate:function(a){var o=D.trans,s=o.table(t).hook,u=s.deleting,l=s.creating,c=s.updating;switch(a.type){case"add":if(l.fire===L)break;return o._promise("readwrite",function(){return d(a)},!0);case"put":if(l.fire===L&&c.fire===L)break;return o._promise("readwrite",function(){return d(a)},!0);case"delete":if(u.fire===L)break;return o._promise("readwrite",function(){return d(a)},!0);case"deleteRange":if(u.fire===L)break;return o._promise("readwrite",function(){return m(a)},!0)}return n.mutate(a);function d(f){var h=D.trans,v=f.keys||Va(r,f);if(!v)throw new Error("Keys missing");return f=f.type==="add"||f.type==="put"?P(P({},f),{keys:v}):P({},f),f.type!=="delete"&&(f.values=rn([],f.values,!0)),f.keys&&(f.keys=rn([],f.keys,!0)),Ya(n,f,v).then(function(b){var I=v.map(function(E,_){var g=b[_],w={onerror:null,onsuccess:null};if(f.type==="delete")u.fire.call(w,E,g,h);else if(f.type==="add"||g===void 0){var R=l.fire.call(w,E,f.values[_],h);E==null&&R!=null&&(E=R,f.keys[_]=E,r.outbound||re(f.values[_],r.keyPath,E))}else{var T=Wn(g,f.values[_]),A=c.fire.call(w,T,E,g,h);if(A){var M=f.values[_];Object.keys(A).forEach(function(x){Y(M,x)?M[x]=A[x]:re(M,x,A[x])})}}return w});return n.mutate(f).then(function(E){for(var _=E.failures,g=E.results,w=E.numFailures,R=E.lastResult,T=0;T<v.length;++T){var A=g?g[T]:v[T],M=I[T];A==null?M.onerror&&M.onerror(_[T]):M.onsuccess&&M.onsuccess(f.type==="put"&&b[T]?f.values[T]:A)}return{failures:_,results:g,numFailures:w,lastResult:R}}).catch(function(E){return I.forEach(function(_){return _.onerror&&_.onerror(E)}),Promise.reject(E)})})}function m(f){return p(f.trans,f.range,1e4)}function p(f,h,v){return n.query({trans:f,values:!1,query:{index:r,range:h},limit:v}).then(function(b){var I=b.result;return d({type:"delete",keys:I,trans:f}).then(function(E){return E.numFailures>0?Promise.reject(E.failures[0]):I.length<v?{failures:[],numFailures:0,lastResult:void 0}:p(f,P(P({},h),{lower:I[I.length-1],lowerOpen:!0}),v)})})}}});return i}})}};function Ya(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function ri(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)X(t.keys[i],e[a])===0&&(r.push(n?lt(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var $a={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return P(P({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=ri(r.keys,r.trans._cache,r.cache==="clone");return i?C.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?lt(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},en;function Xn(e){return!("from"in e)}var le=function(e,t){if(this)V(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new le;return e&&"d"in e&&V(n,e),n}};ze(le.prototype,(en={add:function(e){return kt(this,e),this},addKey:function(e){return st(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return st(t,n,n)}),this}},en[sn]=function(){return Dn(this)},en));function st(e,t,n){var r=X(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(Xn(e))return V(e,{from:t,to:n,d:1});var i=e.l,a=e.r;if(X(n,e.from)<0)return i?st(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},fr(e);if(X(t,e.to)>0)return a?st(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},fr(e);X(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),X(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var o=!e.r;i&&!e.l&&kt(e,i),a&&o&&kt(e,a)}}function kt(e,t){function n(r,i){var a=i.from,o=i.to,s=i.l,u=i.r;st(r,a,o),s&&n(r,s),u&&n(r,u)}Xn(t)||n(e,t)}function Qa(e,t){var n=Dn(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=Dn(e),o=a.next(i.from),s=o.value;!r.done&&!o.done;){if(X(s.from,i.to)<=0&&X(s.to,i.from)>=0)return!0;X(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(o=a.next(i.from)).value}return!1}function Dn(e){var t=Xn(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&X(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||X(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function fr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",o=P({},e),s=e[i];e.from=s.from,e.to=s.to,e[i]=s[i],o[i]=s[a],e[a]=o,o.d=dr(o)}e.d=dr(e)}function dr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var Za={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new le(e.MIN_KEY,e.MAX_KEY);return P(P({},e),{table:function(r){var i=e.table(r),a=i.schema,o=a.primaryKey,s=o.extractKey,u=o.outbound,l=P(P({},i),{mutate:function(m){var p=m.trans,f=p.mutatedParts||(p.mutatedParts={}),h=function(R){var T="idb://"+t+"/"+r+"/"+R;return f[T]||(f[T]=new le)},v=h(""),b=h(":dels"),I=m.type,E=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[[],m.values]:[],_=E[0],g=E[1],w=m.trans._cache;return i.mutate(m).then(function(R){if(U(_)){I!=="delete"&&(_=R.results),v.addKeys(_);var T=ri(_,w);!T&&I!=="add"&&b.addKeys(_),(T||g)&&eo(h,a,T,g)}else if(_){var A={from:_.lower,to:_.upper};b.add(A),v.add(A)}else v.add(n),b.add(n),a.indexes.forEach(function(M){return h(M.name).add(n)});return R})}}),c=function(m){var p,f,h=m.query,v=h.index,b=h.range;return[v,new le((p=b.lower)!==null&&p!==void 0?p:e.MIN_KEY,(f=b.upper)!==null&&f!==void 0?f:e.MAX_KEY)]},d={get:function(m){return[o,new le(m.key)]},getMany:function(m){return[o,new le().addKeys(m.keys)]},count:c,query:c,openCursor:c};return z(d).forEach(function(m){l[m]=function(p){var f=D.subscr;if(f){var h=function(w){var R="idb://"+t+"/"+r+"/"+w;return f[R]||(f[R]=new le)},v=h(""),b=h(":dels"),I=d[m](p),E=I[0],_=I[1];if(h(E.name||"").add(_),!E.isPrimaryKey)if(m==="count")b.add(n);else{var g=m==="query"&&u&&p.values&&i.query(P(P({},p),{values:!1}));return i[m].apply(this,arguments).then(function(w){if(m==="query"){if(u&&p.values)return g.then(function(M){var x=M.result;return v.addKeys(x),w});var R=p.values?w.result.map(s):w.result;p.values?v.addKeys(R):b.addKeys(R)}else if(m==="openCursor"){var T=w,A=p.values;return T&&Object.create(T,{key:{get:function(){return b.addKey(T.primaryKey),T.key}},primaryKey:{get:function(){var M=T.primaryKey;return b.addKey(M),M}},value:{get:function(){return A&&v.addKey(T.primaryKey),T.value}}})}return w})}}return i[m].apply(this,arguments)}}),l}})}};function eo(e,t,n,r){function i(a){var o=e(a.name||"");function s(l){return l!=null?a.extractKey(l):null}var u=function(l){return a.multiEntry&&U(l)?l.forEach(function(c){return o.addKey(c)}):o.addKey(l)};(n||r).forEach(function(l,c){var d=n&&s(n[c]),m=r&&s(r[c]);X(d,m)!==0&&(d!=null&&u(d),m!=null&&u(m))})}t.indexes.forEach(i)}var Vn=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=P({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:L,dbReadyPromise:null,cancelOpen:L,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new C(function(s){o.dbReadyResolve=s}),o.openCanceller=new C(function(s,u){o.cancelOpen=u}),this._state=o,this.name=t,this.on=ht(this,"populate","blocked","versionchange","close",{ready:[Bn,L]}),this.on.ready.subscribe=Sr(this.on.ready.subscribe,function(s){return function(u,l){e.vip(function(){var c=r._state;if(c.openComplete)c.dbOpenError||C.resolve().then(u),l&&s(u);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(u),l&&s(u);else{s(u);var d=r;l||s(function m(){d.on.ready.unsubscribe(u),d.on.ready.unsubscribe(m)})}})}}),this.Collection=pa(this),this.Table=ca(this),this.Transaction=wa(this),this.Version=Ga(this),this.WhereClause=_a(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+s.oldVersion/10)}),this._maxKey=ot(n.IDBKeyRange),this._createTransaction=function(s,u,l,c){return new r.Transaction(s,u,l,r._options.chromeTransactionDurability,c)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),Ze.filter(function(u){return u.name===r.name&&u!==r&&!u._state.vcFired}).map(function(u){return u.on("versionchange").fire(s)})},this.use(Xa),this.use(Ja),this.use(Za),this.use($a),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new S.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new S.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(Ma),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||D.letThrough||this._vip)?t():new C(function(r,i){if(n._state.openComplete)return i(new S.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new S.DatabaseClosed);return}n.open().catch(L)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,a=t.name;a&&this.unuse({stack:n,name:a});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:i==null?10:i,name:a}),o.sort(function(s,u){return s.level-u.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},e.prototype.open=function(){return Ua(this)},e.prototype._close=function(){var t=this._state,n=Ze.indexOf(this);if(n>=0&&Ze.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new C(function(r){t.dbReadyResolve=r}),t.openCanceller=new C(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new S.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new C(function(i,a){var o=function(){t.close();var s=t._deps.indexedDB.deleteDatabase(t.name);s.onsuccess=G(function(){Ka(t._deps,t.name),i()}),s.onerror=oe(a),s.onblocked=t._fireOnBlocked};if(n)throw new S.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return z(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=ja.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,a=D.trans;(!a||a.db!==this||t.indexOf("!")!==-1)&&(a=null);var o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var s,u;try{if(u=n.map(function(c){var d=c instanceof i.Table?c.name:c;if(typeof d!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return d}),t=="r"||t===Jt)s=Jt;else if(t=="rw"||t==Yt)s=Yt;else throw new S.InvalidArgument("Invalid transaction mode: "+t);if(a){if(a.mode===Jt&&s===Yt)if(o)a=null;else throw new S.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&u.forEach(function(c){if(a&&a.storeNames.indexOf(c)===-1)if(o)a=null;else throw new S.SubTransaction("Table "+c+" not included in parent transaction.")}),o&&a&&!a.active&&(a=null)}}catch(c){return a?a._promise(null,function(d,m){m(c)}):q(c)}var l=ni.bind(null,this,s,u,a,r);return a?a._promise(s,l,"lock"):D.trans?Ue(D.transless,function(){return i._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(t){if(!Y(this._allTables,t))throw new S.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),to=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",no=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[to]=function(){return this},e}();function ii(e,t){return z(t).forEach(function(n){var r=e[n]||(e[n]=new le);kt(r,t[n])}),e}function ro(e){return new no(function(t){var n=Nn(e);function r(p){n&&He();var f=function(){return Ce(e,{subscr:p,trans:null})},h=D.trans?Ue(D.transless,f):f();return n&&h.then(pe,pe),h}var i=!1,a={},o={},s={get closed(){return i},unsubscribe:function(){i=!0,Re.storagemutated.unsubscribe(d)}};t.start&&t.start(s);var u=!1,l=!1;function c(){return z(o).some(function(p){return a[p]&&Qa(a[p],o[p])})}var d=function(p){ii(a,p),c()&&m()},m=function(){if(!(u||i)){a={};var p={},f=r(p);l||(Re(at,d),l=!0),u=!0,Promise.resolve(f).then(function(h){u=!1,!i&&(c()?m():(a={},o=p,t.next&&t.next(h)))},function(h){u=!1,t.error&&t.error(h),s.unsubscribe()})}};return m(),s})}var Rn;try{Rn={indexedDB:k.indexedDB||k.mozIndexedDB||k.webkitIndexedDB||k.msIndexedDB,IDBKeyRange:k.IDBKeyRange||k.webkitIDBKeyRange}}catch{Rn={indexedDB:null,IDBKeyRange:null}}var Ae=Vn;ze(Ae,P(P({},qt),{delete:function(e){var t=new Ae(e,{addons:[]});return t.delete()},exists:function(e){return new Ae(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return za(Ae.dependencies).then(e)}catch{return q(new S.MissingAPI)}},defineClass:function(){function e(t){V(this,t)}return e},ignoreTransaction:function(e){return D.trans?Ue(D.transless,e):e()},vip:Tn,async:function(e){return function(){try{var t=Cn(e.apply(this,arguments));return!t||typeof t.then!="function"?C.resolve(t):t}catch(n){return q(n)}}},spawn:function(e,t,n){try{var r=Cn(e.apply(n,t||[]));return!r||typeof r.then!="function"?C.resolve(r):r}catch(i){return q(i)}},currentTransaction:{get:function(){return D.trans||null}},waitFor:function(e,t){var n=C.resolve(typeof e=="function"?Ae.ignoreTransaction(e):e).timeout(t||6e4);return D.trans?D.trans.waitFor(n):n},Promise:C,debug:{get:function(){return se},set:function(e){xr(e,e==="dexie"?function(){return!0}:Jr)}},derive:qe,extend:V,props:ze,override:Sr,Events:ht,on:Re,liveQuery:ro,extendObservabilitySet:ii,getByKeyPath:de,setByKeyPath:re,delByKeyPath:xi,shallowClone:Pr,deepClone:lt,getObjectDiff:Wn,cmp:X,asap:Mr,minKey:gn,addons:[],connections:Ze,errnames:xn,dependencies:Rn,semVer:ar,version:ar.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));Ae.maxKey=ot(Ae.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Re(at,function(e){if(!fe){var t;Kt?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Te,!0,!0,e)):t=new CustomEvent(Te,{detail:e}),fe=!0,dispatchEvent(t),fe=!1}}),addEventListener(Te,function(e){var t=e.detail;fe||Gt(t)}));function Gt(e){var t=fe;try{fe=!0,Re.storagemutated.fire(e)}finally{fe=t}}var fe=!1;if(typeof BroadcastChannel<"u"){var hr=new BroadcastChannel(Te);Re(at,function(e){fe||hr.postMessage(e)}),hr.onmessage=function(e){e.data&&Gt(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Re(at,function(e){try{fe||(typeof localStorage<"u"&&localStorage.setItem(Te,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&rn([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:Te,changedParts:e})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(e){if(e.key===Te){var t=JSON.parse(e.newValue);t&&Gt(t.changedParts)}});var mr=self.document&&navigator.serviceWorker;mr&&mr.addEventListener("message",io)}function io(e){var t=e.data;t&&t.type===Te&&Gt(t.changedParts)}C.rejectionMapper=Ui;xr(se,Jr);function ai(e,t){return function(){return e.apply(t,arguments)}}const{toString:oi}=Object.prototype,{getPrototypeOf:Jn}=Object,Yn=(e=>t=>{const n=oi.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ye=e=>(e=e.toLowerCase(),t=>Yn(t)===e),Ut=e=>t=>typeof t===e,{isArray:pt}=Array,An=Ut("undefined");function ao(e){return e!==null&&!An(e)&&e.constructor!==null&&!An(e.constructor)&&je(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const si=ye("ArrayBuffer");function oo(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&si(e.buffer),t}const so=Ut("string"),je=Ut("function"),ui=Ut("number"),li=e=>e!==null&&typeof e=="object",uo=e=>e===!0||e===!1,St=e=>{if(Yn(e)!=="object")return!1;const t=Jn(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lo=ye("Date"),co=ye("File"),fo=ye("Blob"),ho=ye("FileList"),mo=e=>li(e)&&je(e.pipe),po=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||oi.call(e)===t||je(e.toString)&&e.toString()===t)},yo=ye("URLSearchParams"),vo=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jt(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),pt(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let s;for(r=0;r<o;r++)s=a[r],t.call(null,e[s],s,e)}}function Sn(){const e={},t=(n,r)=>{St(e[r])&&St(n)?e[r]=Sn(e[r],n):St(n)?e[r]=Sn({},n):pt(n)?e[r]=n.slice():e[r]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&jt(arguments[n],t);return e}const go=(e,t,n,{allOwnKeys:r}={})=>(jt(t,(i,a)=>{n&&je(i)?e[a]=ai(i,n):e[a]=i},{allOwnKeys:r}),e),bo=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Eo=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},_o=(e,t,n,r)=>{let i,a,o;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],(!r||r(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=n!==!1&&Jn(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Io=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},wo=e=>{if(!e)return null;if(pt(e))return e;let t=e.length;if(!ui(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},To=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Jn(Uint8Array)),Co=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},Do=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Ro=ye("HTMLFormElement"),Ao=e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),pr=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),So=ye("RegExp"),ci=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};jt(n,(i,a)=>{t(i,a,e)!==!1&&(r[a]=i)}),Object.defineProperties(e,r)},Mo=e=>{ci(e,(t,n)=>{const r=e[n];if(!!je(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not read-only method '"+n+"'")})}})},Oo=(e,t)=>{const n={},r=i=>{i.forEach(a=>{n[a]=!0})};return pt(e)?r(e):r(String(e).split(t)),n},Po=()=>{},No=(e,t)=>(e=+e,Number.isFinite(e)?e:t);var y={isArray:pt,isArrayBuffer:si,isBuffer:ao,isFormData:po,isArrayBufferView:oo,isString:so,isNumber:ui,isBoolean:uo,isObject:li,isPlainObject:St,isUndefined:An,isDate:lo,isFile:co,isBlob:fo,isRegExp:So,isFunction:je,isStream:mo,isURLSearchParams:yo,isTypedArray:To,isFileList:ho,forEach:jt,merge:Sn,extend:go,trim:vo,stripBOM:bo,inherits:Eo,toFlatObject:_o,kindOf:Yn,kindOfTest:ye,endsWith:Io,toArray:wo,forEachEntry:Co,matchAll:Do,isHTMLForm:Ro,hasOwnProperty:pr,hasOwnProp:pr,reduceDescriptors:ci,freezeMethods:Mo,toObjectSet:Oo,toCamelCase:Ao,noop:Po,toFiniteNumber:No};function N(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}y.inherits(N,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const fi=N.prototype,di={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{di[e]={value:e}});Object.defineProperties(N,di);Object.defineProperty(fi,"isAxiosError",{value:!0});N.from=(e,t,n,r,i,a)=>{const o=Object.create(fi);return y.toFlatObject(e,o,function(u){return u!==Error.prototype},s=>s!=="isAxiosError"),N.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var Fo=typeof self=="object"?self.FormData:window.FormData;function Mn(e){return y.isPlainObject(e)||y.isArray(e)}function hi(e){return y.endsWith(e,"[]")?e.slice(0,-2):e}function yr(e,t,n){return e?e.concat(t).map(function(i,a){return i=hi(i),!n&&a?"["+i+"]":i}).join(n?".":""):t}function xo(e){return y.isArray(e)&&!e.some(Mn)}const Bo=y.toFlatObject(y,{},null,function(t){return/^is[A-Z]/.test(t)});function Lo(e){return e&&y.isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator]}function Wt(e,t,n){if(!y.isObject(e))throw new TypeError("target must be an object");t=t||new(Fo||FormData),n=y.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,v){return!y.isUndefined(v[h])});const r=n.metaTokens,i=n.visitor||c,a=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Lo(t);if(!y.isFunction(i))throw new TypeError("visitor must be a function");function l(f){if(f===null)return"";if(y.isDate(f))return f.toISOString();if(!u&&y.isBlob(f))throw new N("Blob is not supported. Use a Buffer instead.");return y.isArrayBuffer(f)||y.isTypedArray(f)?u&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function c(f,h,v){let b=f;if(f&&!v&&typeof f=="object"){if(y.endsWith(h,"{}"))h=r?h:h.slice(0,-2),f=JSON.stringify(f);else if(y.isArray(f)&&xo(f)||y.isFileList(f)||y.endsWith(h,"[]")&&(b=y.toArray(f)))return h=hi(h),b.forEach(function(E,_){!(y.isUndefined(E)||E===null)&&t.append(o===!0?yr([h],_,a):o===null?h:h+"[]",l(E))}),!1}return Mn(f)?!0:(t.append(yr(v,h,a),l(f)),!1)}const d=[],m=Object.assign(Bo,{defaultVisitor:c,convertValue:l,isVisitable:Mn});function p(f,h){if(!y.isUndefined(f)){if(d.indexOf(f)!==-1)throw Error("Circular reference detected in "+h.join("."));d.push(f),y.forEach(f,function(b,I){(!(y.isUndefined(b)||b===null)&&i.call(t,b,y.isString(I)?I.trim():I,h,m))===!0&&p(b,h?h.concat(I):[I])}),d.pop()}}if(!y.isObject(e))throw new TypeError("data must be an object");return p(e),t}function vr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function $n(e,t){this._pairs=[],e&&Wt(e,this,t)}const mi=$n.prototype;mi.append=function(t,n){this._pairs.push([t,n])};mi.toString=function(t){const n=t?function(r){return t.call(this,r,vr)}:vr;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function ko(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pi(e,t,n){if(!t)return e;const r=n&&n.encode||ko,i=n&&n.serialize;let a;if(i?a=i(t,n):a=y.isURLSearchParams(t)?t.toString():new $n(t,n).toString(r),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class gr{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){y.forEach(this.handlers,function(r){r!==null&&t(r)})}}var yi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Go=typeof URLSearchParams<"u"?URLSearchParams:$n,zo=FormData;const qo=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})();var he={isBrowser:!0,classes:{URLSearchParams:Go,FormData:zo,Blob},isStandardBrowserEnv:qo,protocols:["http","https","file","blob","url","data"]};function Ko(e,t){return Wt(e,new he.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,a){return he.isNode&&y.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function Ho(e){return y.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Uo(e){const t={},n=Object.keys(e);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],t[a]=e[a];return t}function vi(e){function t(n,r,i,a){let o=n[a++];const s=Number.isFinite(+o),u=a>=n.length;return o=!o&&y.isArray(i)?i.length:o,u?(y.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!s):((!i[o]||!y.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],a)&&y.isArray(i[o])&&(i[o]=Uo(i[o])),!s)}if(y.isFormData(e)&&y.isFunction(e.entries)){const n={};return y.forEachEntry(e,(r,i)=>{t(Ho(r),i,n,0)}),n}return null}function jo(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new N("Request failed with status code "+n.status,[N.ERR_BAD_REQUEST,N.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}var Wo=he.isStandardBrowserEnv?function(){return{write:function(n,r,i,a,o,s){const u=[];u.push(n+"="+encodeURIComponent(r)),y.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),y.isString(a)&&u.push("path="+a),y.isString(o)&&u.push("domain="+o),s===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Xo(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Vo(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function gi(e,t){return e&&!Xo(t)?Vo(e,t):t}var Jo=he.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(a){let o=a;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const s=y.isString(o)?i(o):o;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}();function yt(e,t,n){N.call(this,e==null?"canceled":e,N.ERR_CANCELED,t,n),this.name="CanceledError"}y.inherits(yt,N,{__CANCEL__:!0});function Yo(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}const $o=y.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Qo=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&$o[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t};const br=Symbol("internals"),bi=Symbol("defaults");function $e(e){return e&&String(e).trim().toLowerCase()}function Mt(e){return e===!1||e==null?e:y.isArray(e)?e.map(Mt):String(e)}function Zo(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}function Er(e,t,n,r){if(y.isFunction(r))return r.call(this,t,n);if(!!y.isString(t)){if(y.isString(r))return t.indexOf(r)!==-1;if(y.isRegExp(r))return r.test(t)}}function es(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function ts(e,t){const n=y.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,a,o){return this[r].call(this,t,i,a,o)},configurable:!0})})}function Ve(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}function Z(e,t){e&&this.set(e),this[bi]=t||null}Object.assign(Z.prototype,{set:function(e,t,n){const r=this;function i(a,o,s){const u=$e(o);if(!u)throw new Error("header name must be a non-empty string");const l=Ve(r,u);l&&s!==!0&&(r[l]===!1||s===!1)||(r[l||o]=Mt(a))}return y.isPlainObject(e)?y.forEach(e,(a,o)=>{i(a,o,t)}):i(t,e,n),this},get:function(e,t){if(e=$e(e),!e)return;const n=Ve(this,e);if(n){const r=this[n];if(!t)return r;if(t===!0)return Zo(r);if(y.isFunction(t))return t.call(this,r,n);if(y.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}},has:function(e,t){if(e=$e(e),e){const n=Ve(this,e);return!!(n&&(!t||Er(this,this[n],n,t)))}return!1},delete:function(e,t){const n=this;let r=!1;function i(a){if(a=$e(a),a){const o=Ve(n,a);o&&(!t||Er(n,n[o],o,t))&&(delete n[o],r=!0)}}return y.isArray(e)?e.forEach(i):i(e),r},clear:function(){return Object.keys(this).forEach(this.delete.bind(this))},normalize:function(e){const t=this,n={};return y.forEach(this,(r,i)=>{const a=Ve(n,i);if(a){t[a]=Mt(r),delete t[i];return}const o=e?es(i):String(i).trim();o!==i&&delete t[i],t[o]=Mt(r),n[o]=!0}),this},toJSON:function(e){const t=Object.create(null);return y.forEach(Object.assign({},this[bi]||null,this),(n,r)=>{n==null||n===!1||(t[r]=e&&y.isArray(n)?n.join(", "):n)}),t}});Object.assign(Z,{from:function(e){return y.isString(e)?new this(Qo(e)):e instanceof this?e:new this(e)},accessor:function(e){const n=(this[br]=this[br]={accessors:{}}).accessors,r=this.prototype;function i(a){const o=$e(a);n[o]||(ts(r,a),n[o]=!0)}return y.isArray(e)?e.forEach(i):i(e),this}});Z.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);y.freezeMethods(Z.prototype);y.freezeMethods(Z);function ns(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,a=0,o;return t=t!==void 0?t:1e3,function(u){const l=Date.now(),c=r[a];o||(o=l),n[i]=u,r[i]=l;let d=a,m=0;for(;d!==i;)m+=n[d++],d=d%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),l-o<t)return;const p=c&&l-c;return p?Math.round(m*1e3/p):void 0}}function _r(e,t){let n=0;const r=ns(50,250);return i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-n,u=r(s),l=a<=o;n=a;const c={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:u||void 0,estimated:u&&o&&l?(o-a)/u:void 0};c[t?"download":"upload"]=!0,e(c)}}function Ir(e){return new Promise(function(n,r){let i=e.data;const a=Z.from(e.headers).normalize(),o=e.responseType;let s;function u(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}y.isFormData(i)&&he.isStandardBrowserEnv&&a.setContentType(!1);let l=new XMLHttpRequest;if(e.auth){const p=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(p+":"+f))}const c=gi(e.baseURL,e.url);l.open(e.method.toUpperCase(),pi(c,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function d(){if(!l)return;const p=Z.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),h={data:!o||o==="text"||o==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:p,config:e,request:l};jo(function(b){n(b),u()},function(b){r(b),u()},h),l=null}if("onloadend"in l?l.onloadend=d:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(d)},l.onabort=function(){!l||(r(new N("Request aborted",N.ECONNABORTED,e,l)),l=null)},l.onerror=function(){r(new N("Network Error",N.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let f=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const h=e.transitional||yi;e.timeoutErrorMessage&&(f=e.timeoutErrorMessage),r(new N(f,h.clarifyTimeoutError?N.ETIMEDOUT:N.ECONNABORTED,e,l)),l=null},he.isStandardBrowserEnv){const p=(e.withCredentials||Jo(c))&&e.xsrfCookieName&&Wo.read(e.xsrfCookieName);p&&a.set(e.xsrfHeaderName,p)}i===void 0&&a.setContentType(null),"setRequestHeader"in l&&y.forEach(a.toJSON(),function(f,h){l.setRequestHeader(h,f)}),y.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),o&&o!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",_r(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",_r(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=p=>{!l||(r(!p||p.type?new yt(null,e,l):p),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const m=Yo(c);if(m&&he.protocols.indexOf(m)===-1){r(new N("Unsupported protocol "+m+":",N.ERR_BAD_REQUEST,e));return}l.send(i||null)})}const wr={http:Ir,xhr:Ir};var Tr={getAdapter:e=>{if(y.isString(e)){const t=wr[e];if(!e)throw Error(y.hasOwnProp(e)?`Adapter '${e}' is not available in the build`:`Can not resolve adapter '${e}'`);return t}if(!y.isFunction(e))throw new TypeError("adapter is not a function");return e},adapters:wr};const rs={"Content-Type":"application/x-www-form-urlencoded"};function is(){let e;return typeof XMLHttpRequest<"u"?e=Tr.getAdapter("xhr"):typeof process<"u"&&y.kindOf(process)==="process"&&(e=Tr.getAdapter("http")),e}function as(e,t,n){if(y.isString(e))try{return(t||JSON.parse)(e),y.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const We={transitional:yi,adapter:is(),transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,a=y.isObject(t);if(a&&y.isHTMLForm(t)&&(t=new FormData(t)),y.isFormData(t))return i&&i?JSON.stringify(vi(t)):t;if(y.isArrayBuffer(t)||y.isBuffer(t)||y.isStream(t)||y.isFile(t)||y.isBlob(t))return t;if(y.isArrayBufferView(t))return t.buffer;if(y.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Ko(t,this.formSerializer).toString();if((s=y.isFileList(t))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Wt(s?{"files[]":t}:t,u&&new u,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),as(t)):t}],transformResponse:[function(t){const n=this.transitional||We.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(t&&y.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(o)throw s.name==="SyntaxError"?N.from(s,N.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:he.classes.FormData,Blob:he.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};y.forEach(["delete","get","head"],function(t){We.headers[t]={}});y.forEach(["post","put","patch"],function(t){We.headers[t]=y.merge(rs)});function tn(e,t){const n=this||We,r=t||n,i=Z.from(r.headers);let a=r.data;return y.forEach(e,function(s){a=s.call(n,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function Ei(e){return!!(e&&e.__CANCEL__)}function nn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new yt}function Cr(e){return nn(e),e.headers=Z.from(e.headers),e.data=tn.call(e,e.transformRequest),(e.adapter||We.adapter)(e).then(function(r){return nn(e),r.data=tn.call(e,e.transformResponse,r),r.headers=Z.from(r.headers),r},function(r){return Ei(r)||(nn(e),r&&r.response&&(r.response.data=tn.call(e,e.transformResponse,r.response),r.response.headers=Z.from(r.response.headers))),Promise.reject(r)})}function ut(e,t){t=t||{};const n={};function r(l,c){return y.isPlainObject(l)&&y.isPlainObject(c)?y.merge(l,c):y.isPlainObject(c)?y.merge({},c):y.isArray(c)?c.slice():c}function i(l){if(y.isUndefined(t[l])){if(!y.isUndefined(e[l]))return r(void 0,e[l])}else return r(e[l],t[l])}function a(l){if(!y.isUndefined(t[l]))return r(void 0,t[l])}function o(l){if(y.isUndefined(t[l])){if(!y.isUndefined(e[l]))return r(void 0,e[l])}else return r(void 0,t[l])}function s(l){if(l in t)return r(e[l],t[l]);if(l in e)return r(void 0,e[l])}const u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s};return y.forEach(Object.keys(e).concat(Object.keys(t)),function(c){const d=u[c]||i,m=d(c);y.isUndefined(m)&&d!==s||(n[c]=m)}),n}const _i="1.1.3",Qn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Qn[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Dr={};Qn.transitional=function(t,n,r){function i(a,o){return"[Axios v"+_i+"] Transitional option '"+a+"'"+o+(r?". "+r:"")}return(a,o,s)=>{if(t===!1)throw new N(i(o," has been removed"+(n?" in "+n:"")),N.ERR_DEPRECATED);return n&&!Dr[o]&&(Dr[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,o,s):!0}};function os(e,t,n){if(typeof e!="object")throw new N("options must be an object",N.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],o=t[a];if(o){const s=e[a],u=s===void 0||o(s,a,e);if(u!==!0)throw new N("option "+a+" must be "+u,N.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new N("Unknown option "+a,N.ERR_BAD_OPTION)}}var On={assertOptions:os,validators:Qn};const Ee=On.validators;class Pe{constructor(t){this.defaults=t,this.interceptors={request:new gr,response:new gr}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ut(this.defaults,n);const{transitional:r,paramsSerializer:i}=n;r!==void 0&&On.assertOptions(r,{silentJSONParsing:Ee.transitional(Ee.boolean),forcedJSONParsing:Ee.transitional(Ee.boolean),clarifyTimeoutError:Ee.transitional(Ee.boolean)},!1),i!==void 0&&On.assertOptions(i,{encode:Ee.function,serialize:Ee.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();const a=n.headers&&y.merge(n.headers.common,n.headers[n.method]);a&&y.forEach(["delete","get","head","post","put","patch","common"],function(f){delete n.headers[f]}),n.headers=new Z(n.headers,a);const o=[];let s=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(n)===!1||(s=s&&f.synchronous,o.unshift(f.fulfilled,f.rejected))});const u=[];this.interceptors.response.forEach(function(f){u.push(f.fulfilled,f.rejected)});let l,c=0,d;if(!s){const p=[Cr.bind(this),void 0];for(p.unshift.apply(p,o),p.push.apply(p,u),d=p.length,l=Promise.resolve(n);c<d;)l=l.then(p[c++],p[c++]);return l}d=o.length;let m=n;for(c=0;c<d;){const p=o[c++],f=o[c++];try{m=p(m)}catch(h){f.call(this,h);break}}try{l=Cr.call(this,m)}catch(p){return Promise.reject(p)}for(c=0,d=u.length;c<d;)l=l.then(u[c++],u[c++]);return l}getUri(t){t=ut(this.defaults,t);const n=gi(t.baseURL,t.url);return pi(n,t.params,t.paramsSerializer)}}y.forEach(["delete","get","head","options"],function(t){Pe.prototype[t]=function(n,r){return this.request(ut(r||{},{method:t,url:n,data:(r||{}).data}))}});y.forEach(["post","put","patch"],function(t){function n(r){return function(a,o,s){return this.request(ut(s||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Pe.prototype[t]=n(),Pe.prototype[t+"Form"]=n(!0)});class Zn{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(s=>{r.subscribe(s),a=s}).then(i);return o.cancel=function(){r.unsubscribe(a)},o},t(function(a,o,s){r.reason||(r.reason=new yt(a,o,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Zn(function(i){t=i}),cancel:t}}}function ss(e){return function(n){return e.apply(null,n)}}function us(e){return y.isObject(e)&&e.isAxiosError===!0}function Ii(e){const t=new Pe(e),n=ai(Pe.prototype.request,t);return y.extend(n,Pe.prototype,t,{allOwnKeys:!0}),y.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return Ii(ut(e,i))},n}const j=Ii(We);j.Axios=Pe;j.CanceledError=yt;j.CancelToken=Zn;j.isCancel=Ei;j.VERSION=_i;j.toFormData=Wt;j.AxiosError=N;j.Cancel=j.CanceledError;j.all=function(t){return Promise.all(t)};j.spread=ss;j.isAxiosError=us;j.formToJSON=e=>vi(y.isHTMLForm(e)?new FormData(e):e);const ls=()=>j.get("https://api.hypixel.net/skyblock/bazaar").then(e=>e.data).then(e=>{if(!e||!e.success)throw new Error("Invalid query");return Object.keys(e.products).map(n=>({buyPrice:e.products[n].quick_status.buyPrice,item_name:n,sellPrice:e.products[n].quick_status.sellPrice}))}),cs=async e=>{const n=(await j.get(`https://api.hypixel.net/skyblock/auctions?page=${e}`)).data;return n&&n.success?n.auctions.filter(r=>!r.claimed):Promise.reject()},fs=e=>{const t=new Map;return e.auctions.filter(n=>!n.claimed).forEach(({bin:n,highest_bid_amount:r,item_name:i,starting_bid:a,uuid:o})=>{t.set(o,{bin:n,buyPrice:n||r?a:r,item_name:i,sellPrice:n||r?a:r})}),t},ds=()=>j.get("https://api.hypixel.net/skyblock/auctions").then(e=>e.data).then(e=>{if(!e||!e.success)throw new Error("Invalid query");const t=fs(e),n=[];if(e.totalPages>1)for(let r=1;r<e.totalPages;r++)n.push(cs(r));return Promise.all(n).then(r=>(r.forEach(i=>{i.forEach(a=>{const{bin:o,highest_bid_amount:s,item_name:u,starting_bid:l,uuid:c}=a;t.set(c,{bin:o,buyPrice:o||s===0?l:s,item_name:u,sellPrice:o||s===0?l:s})})}),Array.from(t.values())))}),hs={command:"Response-Loading",loading:!0},Rr={command:"Response-Loading",loading:!1};class ms extends Vn{constructor(n,r){super("Database");W(this,"bazaars");W(this,"auctions");W(this,"bins");W(this,"cache");W(this,"timers");W(this,"_cacheDuration",-1);W(this,"_lastRefresh",-1);W(this,"_polling");W(this,"ctx");W(this,"postRefresh");this.ctx=n,this.postRefresh=r,this.version(1).stores({auctions:"item_name, sellPrice, buyPrice",bazaars:"item_name, sellPrice, buyPrice",bins:"item_name, sellPrice, buyPrice",cache:"key",timers:"id++, itemId, startTime, endTime"}),this.cache.get("lastRefresh").then(i=>{if(i){const a=Number(i.value);Number.isNaN(a)||(this._lastRefresh=a)}})}set cacheDuration(n){n===void 0?(this._cacheDuration=-1,this._stopPolling()):(this._cacheDuration=n,this._startPolling())}_startPolling(){!this._polling&&this._cacheDuration!==-1&&(this._polling=setInterval(()=>{this._doPolling()},1e3))}_stopPolling(){this._polling&&clearInterval(this._polling)}_doPolling(){const n=Date.now();this._lastRefresh+this._cacheDuration<n&&(this._lastRefresh=n,this.addToCache("lastRefresh",n),this._refresh())}addToCache(n,r){return this.cache.get(n).then(i=>{i?this.cache.update(n,{value:r}):this.cache.add({key:n,value:r})})}removeFromCache(n){return this.cache.get(n).then(r=>{r&&this.cache.delete(n)})}getFromCache(n){return this.cache.get(n).then(r=>r==null?void 0:r.value)}async forceRefresh(){const n=Date.now();this._lastRefresh=n,this.addToCache("lastRefresh",n),await this._refresh()}sendMessage(n){const r={command:"Response-Message",message:n};this.ctx.postMessage(r)}async _refresh(){this.ctx.postMessage(hs);const n=new Promise(i=>ls().then(a=>{this.transaction("rw",this.bazaars,async()=>{this.bazaars.toCollection().delete().then(()=>{this.bazaars.bulkAdd(a),i(),this.sendMessage("Bazaar data has been updated")})})})),r=ds().then(i=>this.transaction("rw",this.auctions,this.bins,async()=>{const a=i.filter(d=>!d.bin),o=i.filter(d=>d.bin),s=this._findMinPrice(a),u=this._findMinPrice(o),l=new Promise(d=>this.auctions.toCollection().delete().then(()=>{this.auctions.bulkAdd(s),d(),this.sendMessage("Auctions data has been updated")})),c=new Promise(d=>this.bins.toCollection().delete().then(()=>{this.bins.bulkAdd(u),d(),this.sendMessage("BINs data has been updated")}));return Promise.all([l,c])}));Promise.all([n,r]).then(()=>{this.sendMessage("All data has been updated"),this.ctx.postMessage(Rr),this.postRefresh()}).catch(i=>{this.sendMessage(JSON.stringify({err:i,message:"An error occurred"})),this.ctx.postMessage(Rr),this.postRefresh()})}_findMinPrice(n){const r=n.reduce((i,a)=>(i[a.item_name]?i[a.item_name].min>a.buyPrice&&(i[a.item_name]={item:a,min:a.buyPrice}):i[a.item_name]={item:a,min:a.buyPrice},i),{});return Object.values(r).map(i=>i.item)}async getItemPrice(n,r){if(r==="bins")return await this.bins.get(n);if(r==="auctions")return await this.auctions.get(n);if(r==="auctions+bins"){const i=await this.bins.get(n),a=await this.auctions.get(n);return i?a?(i==null?void 0:i.buyPrice)<(a==null?void 0:a.buyPrice)?i:a:i:a}return await this.bazaars.get(n)}async getItemBazaarPrice(n){return await this.bazaars.get(n)}async getItemAuctionsPrice(n){return await this.auctions.get(n)}async getItemBinsPrice(n){return await this.bins.get(n)}}const ne=self,ps=36e5;class ys{constructor(){W(this,"database");W(this,"timersInterval");W(this,"languageKey","en-US");W(this,"withNotification",!1);this.database=new ms(ne,()=>{}),this.database.cacheDuration=ps}async forceRefresh(){this.messageResponse("Starting forceRefresh"),await this.database.forceRefresh()}async getLanguage(){this.messageResponse("ask for language");const t=await this.database.cache.get("language");if(t){this.languageKey=t.value;const r={command:"Response-GetLanguage",language:this.languageKey};ne.postMessage(r)}const n={command:"Response-GetLanguage",language:void 0};ne.postMessage(n)}async getPrices(){const t=await this.getAllOptions(),n=await this.getCrafts();this.messageResponse("Starting getPrices"),this.getItemsWithCraftPrice({crafts:n,...t}).then(r=>{this.messageResponse("Ending getPrices");const i={command:"Response-GetPrices",results:r};ne.postMessage(i)})}async initialize(t){this.messageResponse("Initializing"),this.getOptions(),this.withNotification=t,await this.database.timers.count()!==0&&this.timersInterval===void 0&&(this.timersInterval=setInterval(()=>{this.checkTimers()},1e3)),this.getTimers(),this.getPrices()}setLanguage(t){this.database.addToCache("language",t),this.languageKey=t}async setOptions(t){const n=await this.getAllOptions(),r={};if(Object.keys(t).forEach(i=>{const a=t[i];a!==n[i]&&(this.database.addToCache(i,a),r[i]=a)}),Object.keys(r).length>0){const i={command:"Response-Options",...r};ne.postMessage(i),this.getPrices()}}async startTimer({itemId:t}){const n=Xt.find(i=>i.itemId===t);if(n){this.messageResponse(`Start timer for ${JSON.stringify(n)}`);const i=await this.database.timers.count();if(i<=4){const a=Date.now(),o=a+n.time*1e3*60*60;this.database.timers.add({endTime:o,itemId:t,startTime:a})}i===0&&this.timersInterval===void 0&&(this.timersInterval=setInterval(()=>{this.checkTimers()},1e3))}else this.messageResponse(`Start timer but item not found ${t}`);this.getTimers();const r={command:"Response-TimerSet",itemId:t};ne.postMessage(r)}async stopTimer({id:t}){await this.database.timers.delete(t),await this.database.timers.count()===0&&clearInterval(this.timersInterval),this.getTimers()}getTimers(){this.database.timers.toArray().then(t=>{const n={command:"Response-Timers",timers:t};ne.postMessage(n)})}async getOptions(){const t={command:"Response-Options",...await this.getAllOptions()};ne.postMessage(t)}async getCrafts(){const{hotm:t,includeAuctionsFlip:n}=await this.getAllOptions();let r=Xt;return n||(r=r.filter(i=>i.bazaarItem)),r=r.filter(i=>i.hotm<=t),r}async getAllOptions(){var t,n,r,i,a,o,s,u;return{auctionsBINOnly:(t=await this.database.getFromCache("auctionsBINOnly"))!=null?t:be.auctionsBINOnly,cacheDuration:(n=await this.database.getFromCache("cacheDuration"))!=null?n:be.cacheDuration,hotm:(r=await this.database.getFromCache("hotm"))!=null?r:be.hotm,includeAuctionsFlip:(i=await this.database.getFromCache("includeAuctionsFlip"))!=null?i:be.includeAuctionsFlip,intermediateCraft:(a=await this.database.getFromCache("intermediateCraft"))!=null?a:be.intermediateCraft,maxCraftingCost:(o=await this.database.getFromCache("maxCraftingCost"))!=null?o:be.maxCraftingCost,playFrequency:(s=await this.database.getFromCache("playFrequency"))!=null?s:be.playFrequency,quickForge:(u=await this.database.getFromCache("quickForge"))!=null?u:be.quickForge}}async checkTimers(){const t=Date.now(),n=await this.database.timers.toArray(),r=this.getLang();n.forEach(i=>{if(t>i.endTime){this.notifyMe(r.notification.timerEnded.replace("{0}",r.items[i.itemId])),this.database.timers.delete(i.id),this.getTimers();const a={command:"Response-TimerEnded",itemId:i.itemId};ne.postMessage(a)}})}notifyMe(t){this.withNotification&&Notification.permission==="granted"&&new Notification(t)}messageResponse(t){const n={command:"Response-Message",message:t};ne.postMessage(n)}async resolveItemPrices(t,n,r){var o;if(n==="bazaar"){const s=await this.database.getItemBazaarPrice(t);return s?{buy:s.buyPrice,sell:s.sellPrice}:{buy:NaN,sell:NaN}}else if(n==="vendor"){const s=(o=er[t])!=null?o:0;return{buy:s,sell:s}}const i=await this.database.getItemBinsPrice(t);if(i&&r)return{buy:i==null?void 0:i.buyPrice,sell:i==null?void 0:i.buyPrice};const a=await this.database.getItemAuctionsPrice(t);if(i||a){const s=Math.min(...[i==null?void 0:i.buyPrice,a==null?void 0:a.buyPrice].filter(u=>u));return{buy:s,sell:s}}return{buy:NaN,sell:NaN}}async resolveItemCraftPrice(t,n,r){var a;const i=Xt.find(o=>o.itemId===t);if(i){let o=0;for await(const s of i.craftMaterial)if(n&&s.intermediaryCraft){const u=await this.resolveItemCraftPrice(s.itemId,n,r);o+=u*s.quantity}else if(s.source==="vendor")o+=((a=er[s.itemId])!=null?a:0)*s.quantity;else{const{buy:u}=await this.resolveItemPrices(s.itemId,s.source,r);o+=u*s.quantity}return o}return NaN}async updater(t){const{auctionsBINOnly:n,callback:r,id:i,intermediateCraft:a,isCraft:o,source:s}=t;if(o){const u=await this.resolveItemCraftPrice(i,a,n);r(u)}else{const{buy:u}=await this.resolveItemPrices(i,s,n);r(u)}}getQuickForgeBonus(t){return t>=2&&t<=10?.85:t>=11&&t<=19?.805:t===20?.7:1}async getItemsWithCraftPrice({auctionsBINOnly:t,crafts:n,intermediateCraft:r,playFrequency:i,quickForge:a}){var u,l;const o={},s=this.getQuickForgeBonus(a);for await(const c of n){const d=(u=Di[c.itemId])!=null?u:"vendor",m=c.bazaarItem?await this.database.getItemPrice(c.itemId,"bazaar"):await this.database.getItemPrice(c.itemId,"bins"),p=(l=m==null?void 0:m.sellPrice)!=null?l:0;await this.updater({auctionsBINOnly:t,id:c.itemId,intermediateCraft:r,isCraft:!0,source:d,callback:f=>{const h=p-f;let v=1;switch(i){case"everyday":v=24;break;case"three-time":v=8;break;case"twice":v=12;break}const b=c.time*s,I=h/Math.max(b,v)*v;o[c.itemId]={...c,craft:f,profit:h,profitHourly:I,sell:p,time:b}}})}return o}getLang(){switch(this.languageKey){case"fr-FR":return Mi;case"en-US":default:return Si}}}const _e=new ys;ne.addEventListener("message",e=>{switch(e.data.command){case"Command-ForceRefresh":_e.forceRefresh();break;case"Command-GetLanguage":_e.getLanguage();break;case"Command-GetPrices":_e.getPrices();break;case"Command-Initialize":_e.initialize(e.data.withNotification);break;case"Command-SetLanguage":_e.setLanguage(e.data.language);break;case"Command-SetOptions":_e.setOptions(e.data.options);break;case"Command-StartTimer":_e.startTimer(e.data);break;case"Command-StopTimer":_e.stopTimer(e.data);break}});
